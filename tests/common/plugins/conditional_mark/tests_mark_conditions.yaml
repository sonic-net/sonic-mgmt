#######################################
#####        Define Anchors       #####
#######################################

# yaml files don't let an anchor be defined outside a yaml entry, so this block just
# creates an entry for pre-test but ensure it will always run, then the other
# conditions can just be used to define anchors for further use in this file

test_pretest.py:
  skip:
    reason: "Dummy entry to allow anchors to be defined at the top of this file"
    conditions_logical_operator: and
    conditions:
      - "False" # Ensure pretest always runs
      - &lossyTopos |
          topo_name in [
            't0-isolated-d128u128s1', 't0-isolated-v6-d128u128s1',
            't0-isolated-d128u128s2', 't0-isolated-v6-d128u128s2',
            't0-isolated-d16u16s1', 't0-isolated-v6-d16u16s1',
            't0-isolated-d16u16s2', 't0-isolated-v6-d16u16s2',
            't0-isolated-d256u256s2', 't0-isolated-v6-d256u256s2',
            't0-isolated-d32u32s2', 't0-isolated-v6-d32u32s2',
            't1-isolated-d224u8', 't1-isolated-v6-d224u8',
            't1-isolated-d28u1', 't1-isolated-v6-d28u1',
            't1-isolated-d448u15-lag', 't1-isolated-v6-d448u15-lag',
            't1-isolated-d448u16', 't1-isolated-v6-d448u16',
            't1-isolated-d56u1-lag', 't1-isolated-v6-d56u1-lag',
            't1-isolated-d56u2', 't1-isolated-v6-d56u2' ]
      - &noVxlanTopos |
          topo_name in [
            't0-isolated-d32u32s2', 't0-isolated-d256u256s2',
            't0-isolated-d96u32s2', 't0-isolated-v6-d32u32s2',
            't0-isolated-v6-d256u256s2', 't0-isolated-v6-d96u32s2',
            't1-isolated-d56u2', 't1-isolated-d56u1-lag',
            't1-isolated-d448u15-lag', 't1-isolated-d128',
            't1-isolated-d32', 't1-isolated-v6-d56u2',
            't1-isolated-v6-d56u1-lag', 't1-isolated-v6-d448u15-lag',
            't1-isolated-v6-d128' ]

#######################################
#####          cutsom_acl         #####
#######################################
acl:
  skip:
    reason: "Acl testsuite is still not enabled for macsec enable sonic-mgmt run and not supported on this DUT topology"
    conditions_logical_operator: or
    conditions:
      - "macsec_en==True"
      - "topo_type in ['m1-128']"

acl/custom_acl_table/test_custom_acl_table.py:
  skip:
    reason: "Custom ACL not supported on older releases or dualtor setup"
    conditions_logical_operator: or
    conditions:
      - "release in ['201811', '201911', '202012']"
      - "'dualtor' in topo_name"

#######################################
#####            acl              #####
#######################################
acl/null_route/test_null_route_helper.py:
  skip:
    reason: "Skip running on dualtor /m1 testbed"
    conditions_logical_operator: or
    conditions:
      - "'dualtor' in topo_name"
      - "'m1' in topo_type"

acl/test_acl.py:
  skip:
    reason: "Skip acl for isolated-v6 topology"
    conditions:
      - "'isolated-v6' in topo_name and https://github.com/sonic-net/sonic-mgmt/issues/18077"
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

acl/test_acl_outer_vlan.py:
  #Outer VLAN id match support is planned for future release with SONIC on Cisco 8000
  #For the current release, will mark the related test cases as XFAIL
  xfail:
    reason: "Cisco platform does not support ACL Outer VLAN ID tests. Or test case has issue on the t0-isolated-d256u256s2 topo."
    conditions_logical_operator: or
    conditions:
      - "asic_type in ['cisco-8000']"
      - "'t0-isolated-d256u256s2' in topo_name"
  skip:
    reason: "Skip running on dualtor testbed"
    conditions:
      - "'dualtor' in topo_name"
acl/test_acl_outer_vlan.py::TestAclVlanOuter_Egress::test_tagged_dropped[ipv4]:
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

acl/test_acl_outer_vlan.py::TestAclVlanOuter_Egress::test_tagged_forwarded[ipv4]:
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

acl/test_acl_outer_vlan.py::TestAclVlanOuter_Egress::test_untagged_forwarded[ipv4]:
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

acl/test_stress_acl.py:
  skip:
    reason: "skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"

acl/test_stress_acl.py::test_acl_add_del_stress:
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

#######################################
#####          acstests              #####
#######################################
acstests:
  skip:
    reason: "It is not  tested for now"
    conditions:
      - "True"

#######################################
#####            arp              #####
#######################################
arp/test_arp_dualtor.py::test_proxy_arp_for_standby_neighbor:
  skip:
    reason: "`accept_untracked_na` currently only available in 202012"
    conditions:
      - "release not in ['202012']"

arp/test_arp_dualtor.py::test_standby_unsolicited_neigh_learning[IPv4-active-standby]:
  skip:
    reason: "This testcase has low passing rate in KVM PR test, skip with issue to unblock PR test."
    conditions:
      - "asic_type in ['vs'] and https://github.com/sonic-net/sonic-mgmt/issues/17441"

arp/test_arp_extended.py::test_arp_garp_enabled:
  xfail:
    reason: "xfail for IPv6-only topologies, with issue it try to parse with IPv4 style"
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19904 and '-v6-' in topo_name"

arp/test_arp_extended.py::test_proxy_arp[v4-:
  skip:
    reason: "skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"

arp/test_arp_update.py::test_kernel_asic_mac_mismatch[ipv4]:
  skip:
    reason: "skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"

arp/test_neighbor_mac_noptf.py:
  skip:
    reason: "Not supported in standalone topologies."
    conditions:
      - "'standalone' in topo_name"
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

arp/test_stress_arp.py::test_ipv4_arp:
  xfail:
    reason: "skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"

arp/test_unknown_mac.py:
  skip:
    reason: "Behavior on cisco-8000 & (Marvell) platform for unknown MAC is flooding rather than DROP, hence skipping."
    conditions:
      - "asic_type in ['cisco-8000','marvell-teralynx']"

arp/test_unknown_mac.py::TestUnknownMac::test_unknown_mac:
  xfail:
    reason: "xfail for IPv6-only topologies, with issue failure to handle max number"
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19906 and '-v6-' in topo_name"

arp/test_wr_arp.py:
  skip:
    reason: "Warm reboot is broken on dualtor topology. Device fails to recover by sanity check. Skipping for now. Not supported in standalone topos / Warm reboot is not required for 202412 and this test is not run on this asic type or version or topology currently"
    conditions_logical_operator: or
    conditions:
      - "https://github.com/sonic-net/sonic-buildimage/issues/16502 and 'dualtor' in topo_name"
      - "'standalone' in topo_name"
      - "is_mgmt_ipv6_only==True" # Does not support ipv6 mgmt ip on dut, specially the ferret server
      - "'isolated' in topo_name"
      - "topo_type not in ['t0']"

#######################################
#####            bfd              #####
#######################################
bfd:
  skip:
    reason: "It is skipped for '202412' for now"
    conditions:
      - "release in ['202412']"

bfd/test_bfd.py:
  skip:
    reason: "Test not supported for platforms other than Nvidia 4280/4600c/4700/5600 and cisco-8102. Skipping the test / KVM do not support bfd test"
    conditions_logical_operator: or
    conditions:
      -  "(release in ['201811', '201911']) or (platform not in ['x86_64-mlnx_msn4600c-r0', 'x86_64-mlnx_msn4700-r0', 'x86_64-nvidia_sn5600-r0', 'x86_64-8102_64h_o-r0', 'x86_64-8101_32fh_o-r0', 'x86_64-nvidia_sn4280-r0', 'x86_64-8102_28fh_dpu_o-r0'])"
      - "asic_type in ['vs']"

bfd/test_bfd.py::test_bfd_basic:
  skip:
    reason: "Test not supported on platforms other than Cisco 8101/8102, Nvidia 4280/4600c/4700/5600. KVM platforms do not support bfd test"
    conditions_logical_operator: or
    conditions:
      - "platform not in ['x86_64-mlnx_msn4600c-r0', 'x86_64-mlnx_msn4700-r0', 'x86_64-nvidia_sn5600-r0', 'x86_64-8102_64h_o-r0', 'x86_64-8101_32fh_o-r0', 'x86_64-nvidia_sn4280-r0', 'x86_64-8102_28fh_dpu_o-r0']"
      - "release in ['201811', '201911']"
      - "asic_type in ['vs']"
  xfail:
    reason: "Test might failed due to https://github.com/sonic-net/sonic-mgmt/issues/19519"
    conditions:
      - https://github.com/sonic-net/sonic-mgmt/issues/19519

bfd/test_bfd.py::test_bfd_echo_mode:
  skip:
    reason: "https://github.com/sonic-net/sonic-mgmt/issues/14087 / KVM do not support bfd test"
    conditions_logical_operator: or
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/14087"
      - "asic_type in ['vs']"

bfd/test_bfd.py::test_bfd_scale:
  skip:
    reason: "Test is not supported for platforms other than Cisco 8102/8101, Nvidia 4280/4600c/4700/5600. KVM platforms do not support bfd test"
    conditions_logical_operator: or
    conditions:
      - "platform not in ['x86_64-mlnx_msn4600c-r0', 'x86_64-mlnx_msn4700-r0', 'x86_64-nvidia_sn5600-r0', 'x86_64-8102_64h_o-r0', 'x86_64-8101_32fh_o-r0', 'x86_64-nvidia_sn4280-r0', 'x86_64-8102_28fh_dpu_o-r0']"
      - "release in ['201811', '201911']"
      - "asic_type in ['vs']"

bfd/test_bfd_static_route.py:
  skip:
    reason: "Only supported on multi-asic system & Cisco LCs."
    conditions:
      - "(is_multi_asic is False) or (hwsku not in ['Cisco-88-LC0-36FH-M-O36', 'Cisco-8800-LC-48H-C48', 'Cisco-88-LC0-36FH-O36'])"

bfd/test_bfd_traffic.py:
  skip:
    reason: "Test only supported on Cisco 8800 platforms."
    conditions:
      - "asic_type not in ['cisco-8000']"

#######################################
#####            bgp              #####
#######################################
bgp/test_bgp_allow_list.py:
  skip:
    reason: "Only supported on t1 topo. But Cisco 8111 or 8122 T1(compute ai) platform is not supported."
    conditions_logical_operator: or
    conditions:
      - "'t1' not in topo_type"
      - "platform in ['x86_64-8111_32eh_o-r0', 'x86_64-8122_64eh_o-r0', 'x86_64-8122_64ehf_o-r0']"
  xfail:
    reason: "xfail for IPv6-only topologies, with issue it try to parse with IPv4 style"
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/20217 and '-v6-' in topo_name"

bgp/test_bgp_bbr.py:
  skip:
    reason: "Only supported on t1 topo. But Cisco 8111 or 8122 T1(compute ai) platform is not supported."
    conditions_logical_operator: or
    conditions:
      - "'t1' not in topo_type"
      - "platform in ['x86_64-8111_32eh_o-r0', 'x86_64-8122_64eh_o-r0', 'x86_64-8122_64ehf_o-r0']"
      - "asic_type in ['vs'] and https://github.com/sonic-net/sonic-mgmt/issues/17598"
  xfail:
    reason: "xfail for IPv6-only topologies, with issue it try to parse with IPv4 style"
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/20217 and '-v6-' in topo_name"

bgp/test_bgp_bbr.py::test_bbr_status_consistent_after_reload[enabled]:
  xfail:
    reason: "Testcase ignored due to issue https://github.com/sonic-net/sonic-buildimage/issues/23642"
    conditions:
      - "https://github.com/sonic-net/sonic-buildimage/issues/23642 and hwsku in ['Mellanox-SN5640-C512S2', 'Mellanox-SN5640-C448O16', 'Mellanox-SN5600-C256S1','Mellanox-SN5600-C224O8']"

bgp/test_bgp_bbr_default_state.py::test_bbr_disabled_constants_yml_default:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"

bgp/test_bgp_dual_asn.py::test_bgp_dual_asn_v4:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"

bgp/test_bgp_gr_helper.py:
  skip:
    reason: 'bgp graceful restarted is not a supported feature for T2 and skip in KVM for failing with new cEOS image'
    conditions_logical_operator: or
    conditions:
      - "'t2' in topo_name"
      - "asic_type in ['vs'] and https://github.com/sonic-net/sonic-mgmt/issues/18788"

bgp/test_bgp_gr_helper.py::test_bgp_gr_helper_routes_perserved:
  xfail:
    reason: "xfail for IPv6-only topologies. Or test case has issue on the t0-isolated-d256u256s2 topo."
    conditions_logical_operator: or
    conditions:
      - "'-v6-' in topo_name"
      - "'t0-isolated-d256u256s2' in topo_name"

bgp/test_bgp_multipath_relax.py:
  skip:
    reason: "Not supported topology backend."
    conditions_logical_operator: or
    conditions:
      - "'backend' in topo_name"
      - "'t1-isolated' in topo_name"

bgp/test_bgp_operation_in_ro.py:
  skip:
    reason: "Feature is reverted and pending enhancement"
    conditions:
      - "https://github.com/sonic-net/sonic-buildimage/issues/23462"

bgp/test_bgp_peer_shutdown.py::test_bgp_peer_shutdown:
  xfail:
    reason: "xfail for IPv6-only topologies, is with it parse everthing as IPv4"
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19907 and '-v6-' in topo_name"

bgp/test_bgp_port_disable.py:
  skip:
    reason: "Not supperted on master."
    conditions:
      - "release in ['master', '202505']"

bgp/test_bgp_queue.py:
  skip:
    reason: "Not supported on mgmt device"
    conditions:
      - "topo_type in ['m0', 'mx', 'm1']"
  xfail:
    reason: "Skipped due to issue https://github.com/sonic-net/sonic-mgmt/issues/18349"
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/18349 and ('t1-isolated-d56u2' in topo_name or 't0-isolated-d32u32s2' in topo_name)"

bgp/test_bgp_route_neigh_learning.py::test_bgp_neighbor_route_learnning:
  xfail:
    reason: "xfail for IPv6-only topologies, issue with it try to parse with IPv4 style"
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19915 and '-v6-' in topo_name"

bgp/test_bgp_router_id.py:
  skip:
    reason: "Not supported on multi-asic"
    conditions:
      - "is_multi_asic==True"
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

bgp/test_bgp_router_id.py::test_bgp_router_id_default:
  xfail:
    reason: "xfail for IPv6-only topologies, issue with trying to parse with IPv4 style"
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19916 and '-v6-' in topo_name"

bgp/test_bgp_router_id.py::test_bgp_router_id_set:
  xfail:
    reason: "xfail for IPv6-only topologies, issue with trying to parse with IPv4 style. Or test case has issue on the t0-isolated-d256u256s2 topo."
    conditions_logical_operator: or
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19916 and '-v6-' in topo_name"
      - "'t0-isolated-d256u256s2' in topo_name"

bgp/test_bgp_router_id.py::test_bgp_router_id_set_without_loopback:
  xfail:
    reason: "xfail for IPv6-only topologies, issue with trying to parse with IPv4 style"
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19916 and '-v6-' in topo_name"

bgp/test_bgp_sentinel.py::test_bgp_sentinel[IPv4:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"

bgp/test_bgp_sentinel.py::test_bgp_sentinel[IPv6:
  xfail:
    reason: "xfail for IPv6-only topologies, with issue it try to parse with IPv4 style or due to GH issue 23938"
    conditions_logical_operator: or
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/20193 and '-v6-' in topo_name"
      - "https://github.com/sonic-net/sonic-buildimage/issues/23938"

bgp/test_bgp_session.py::test_bgp_session_interface_down:
  xfail:
    reason: "xfail for IPv6-only topologies, issue with trying to parse with IPv4 style"
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19916 and '-v6-' in topo_name"

bgp/test_bgp_slb.py:
  skip:
    reason: "Skip over topologies which doesn't support slb and this test is not run on this topology currently"
    conditions_logical_operator: or
    conditions:
     - "'backend' in topo_name or 'mgmttor' in topo_name"
     - "topo_type not in ['t0']"

bgp/test_bgp_slb.py::test_bgp_slb_neighbor_persistence_across_advanced_reboot:
  skip:
    reason: "Skip it on dual tor since it got stuck during warm reboot due to known issue on master and internal image
             or over topologies which doesn't support slb."
    conditions_logical_operator: or
    conditions:
      - "topo_name in ['dualtor', 'dualtor-56', 'dualtor-120', 'dualtor-aa', 'dualtor-aa-56'] and https://github.com/sonic-net/sonic-mgmt/issues/9201"
      - "'backend' in topo_name or 'mgmttor' in topo_name or 'isolated' in topo_name"
      - "hwsku in ['Arista-7050CX3-32S-C28S4']"

bgp/test_bgp_speaker.py:
  skip:
    reason: "Not supported on topology backend."
    conditions:
      - "'backend' in topo_name"

bgp/test_bgp_speaker.py::test_bgp_speaker_announce_routes[:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"

bgp/test_bgp_speaker.py::test_bgp_speaker_announce_routes_v6:
  xfail:
    reason: "xfail for IPv6-only topologies, is with it look for vlan_ipv4_entry"
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19917 and '-v6-' in topo_name"

bgp/test_bgp_speaker.py::test_bgp_speaker_bgp_sessions:
  xfail:
    reason: "xfail for IPv6-only topologies, is with it look for vlan_ipv4_entry"
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19917 and '-v6-' in topo_name"

bgp/test_bgp_stress_link_flap.py::test_bgp_stress_link_flap[all]:
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

bgp/test_bgp_suppress_fib.py:
  skip:
    reason: "Not supported before release 202411."
    conditions_logical_operator: or
    conditions:
      - "release in ['201811', '201911', '202012', '202205', '202211', '202305', '202311', '202405', 'master']"
      - "asic_type in ['vs'] and https://github.com/sonic-net/sonic-mgmt/issues/14449"

bgp/test_bgp_update_replication.py:
  xfail:
    reason: "Testcase is not stable on dualtor-aa setup due to GH issue: https://github.com/sonic-net/sonic-mgmt/issues/21110"
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/21110 and 'dualtor-aa' in topo_name"

bgp/test_bgp_update_timer.py::test_bgp_update_timer_session_down:
  xfail:
    reason: "xfail for IPv6-only topologies, issue caused by _is_ipv4_address check"
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19918 and '-v6-' in topo_name"

bgp/test_bgp_update_timer.py::test_bgp_update_timer_single_route:
  xfail:
    reason: "xfail for IPv6-only topologies, issue caused by _is_ipv4_address check"
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19918 and '-v6-' in topo_name"

bgp/test_bgpmon.py:
  skip:
    reason: "Not supported on T2 topology or topology backend
             or Skip for IPv6-only topologies, since there are v6 verison of the test"
    conditions:
      - "'backend' in topo_name or topo_type in ['t2']"
      - "'-v6-' in topo_name"

bgp/test_bgpmon_v6.py::test_bgpmon_no_ipv6_resolve_via_default:
  skip:
    reason: "Not applicable for passive bgpmon_v6"

bgp/test_startup_tsa_tsb_service.py::test_tsa_tsb_service_with_supervisor_abnormal_reboot:
  skip:
    reason: "Not supported on T2 single node topology"
    conditions:
      - "'t2_single_node' in topo_name"

bgp/test_startup_tsa_tsb_service.py::test_tsa_tsb_service_with_supervisor_cold_reboot:
  skip:
    reason: "Not supported on T2 single node topology"
    conditions:
      - "'t2_single_node' in topo_name"

bgp/test_startup_tsa_tsb_service.py::test_tsa_tsb_service_with_tsa_on_sup:
  skip:
    reason: "Not supported on T2 single node topology"
    conditions:
      - "'t2_single_node' in topo_name"

bgp/test_startup_tsa_tsb_service.py::test_user_init_tsb_on_sup_while_service_run_on_dut:
  skip:
    reason: "Not supported on T2 single node topology"
    conditions:
      - "'t2_single_node' in topo_name"

bgp/test_traffic_shift.py:
  xfail:
    reason: "xfail for IPv6-only topologies, with issue it try to parse with IPv4 style"
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/20194 and '-v6-' in topo_name"

bgp/test_traffic_shift.py::test_load_minigraph_with_traffic_shift_away:
  skip:
    reason: "Test is flaky and causing PR test to fail unnecessarily"
    conditions:
      - "asic_type in ['vs']"
      - https://github.com/sonic-net/sonic-mgmt/issues/6471

bgp/test_traffic_shift_sup.py:
  skip:
    reason: "Not supported on T2 single node topology"
    conditions:
      - "'t2_single_node' in topo_name"

#######################################
#####            cacl             #####
#######################################
cacl/test_cacl_application.py:
  skip:
    reason: "skip test_cacl_application in PR test temporarily"
    conditions:
      - "asic_type in ['vs']"
  xfail:
    reason: "Wait PR https://github.com/sonic-net/sonic-host-services/pull/301 include in sonic-buildimage"
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/21175"

cacl/test_cacl_application.py::test_cacl_acl_loader_commands_internal:
  skip:
    reason: "test_cacl_acl_loader_commands_internal is only supported on t0/t1 testbed"
    conditions_logical_operator: or
    conditions:
      - "topo_type not in ['t1', 't0']"
      - "'dualtor' in topo_name"

cacl/test_cacl_application.py::test_cacl_application_dualtor:
  skip:
    reason: "test_cacl_application_dualtor is only supported on dualtor topology"
    conditions:
      - "topo_name not in ['dualtor', 'dualtor-56', 'dualtor-64', 'dualtor-64-breakout', 'dualtor-120']"

cacl/test_cacl_application.py::test_cacl_application_nondualtor:
  skip:
    reason: "test_cacl_application is only supported on non dualtor topology"
    conditions:
      - "topo_name in ['dualtor', 'dualtor-56', 'dualtor-64', 'dualtor-120']"

cacl/test_cacl_application.py::test_multiasic_cacl_application:
  skip:
    reason: "test_multiasic_cacl_application is only supported on multi-ASIC platform"
    conditions:
      - "not is_multi_asic"

cacl/test_ebtables_application.py:
  skip:
    reason: "Ebtables shouldn't be installed in KVM which blocks L2 forwarding, skip in PR testing"
    conditions:
      - "asic_type in ['vs']"

#######################################
#####           configlet         #####
#######################################
configlet:
  skip:
    reason: "It is skipped for '202412' for now"
    conditions:
      - "release in ['202412']"

configlet/test_add_rack.py:
  skip:
    reason: "AddRack is not yet supported on multi-ASIC platform"
    conditions:
      - "is_multi_asic==True"
  xfail:
    reason: "xfail for IPv6-only topologies, need to add support for IPv6-only - https://github.com/sonic-net/sonic-mgmt/issues/20728"
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/20728 and '-v6-' in topo_name"

container_hardening/test_container_hardening.py::test_container_privileged:
  skip:
    reason: "Not supported on 202305 and older releases"
    conditions:
      - "release in ['201811', '201911', '202012', '202205', '202211', '202305']"

#######################################
#####            copp             #####
#######################################
copp/test_copp.py:
  skip:
    reason: "Topology not supported by COPP tests"
    conditions:
      - "(topo_name not in ['dualtor-aa', 'dualtor-aa-64-breakout', 'ptf32', 'ptf64', 't0', 't0-64', 't0-52', 't0-116', 't0-118', 't0-88-o8c80', 't1', 't1-lag', 't1-28-lag', 't1-48-lag', 't1-64-lag', 't1-56-lag', 't1-backend', 'm0', 'm0-2vlan', 'mx', 'm1-48', 'm1-44', 'm1-108', 'm1-128', 't0-isolated-d16u16s1', 't1-isolated-d28u1', 't0-isolated-d32u32s2', 't1-isolated-d56u2'] and 't2' not in topo_type)"

copp/test_copp.py::TestCOPP::test_add_new_trap:
  skip:
    reason: "Copp test_add_new_trap is not yet supported on these testbeds"
    conditions_logical_operator: or
    conditions:
      - "is_multi_asic==True"
      - "(topo_name not in ['ptf32', 'ptf64', 't0', 't0-64', 't0-52', 't0-116', 't0-118', 't0-88-o8c80', 't1', 't1-lag', 't1-28-lag', 't1-48-lag', 't1-64-lag', 't1-56-lag', 't1-backend', 'm0', 'm0-2vlan', 'mx', 'm1-48', 'm1-44', 'm1-108', 'm1-128', 't0-isolated-d16u16s1', 't1-isolated-d28u1', 't0-isolated-d32u32s2', 't1-isolated-d56u2'] and 't2' not in topo_type)"

copp/test_copp.py::TestCOPP::test_remove_trap:
  skip:
    reason: "Copp test_remove_trap is not yet supported on these testbeds"
    conditions_logical_operator: or
    conditions:
      - "is_multi_asic==True"
      - "(topo_name not in ['ptf32', 'ptf64', 't0', 't0-64', 't0-52', 't0-116', 't0-118', 't0-88-o8c80', 't1', 't1-lag', 't1-28-lag', 't1-48-lag', 't1-64-lag', 't1-56-lag', 't1-backend', 'm0', 'm0-2vlan', 'mx', 'm1-48', 'm1-44', 'm1-108', 'm1-128', 't0-isolated-d16u16s1', 't1-isolated-d28u1', 't0-isolated-d32u32s2', 't1-isolated-d56u2'] and 't2' not in topo_type)"

copp/test_copp.py::TestCOPP::test_trap_config_save_after_reboot:
  skip:
    conditions_logical_operator: or
    reason: "Copp test_trap_config_save_after_reboot is not yet supported on these testbeds or not supported after docker_inram enabled"
    conditions:
      - "is_multi_asic==True"
      - "build_version.split('.')[0].isdigit() and int(build_version.split('.')[0]) == 20220531 and int(build_version.split('.')[1]) > 27 and hwsku in ['Arista-7050-QX-32S', 'Arista-7050QX32S-Q32', 'Arista-7050-QX32', 'Arista-7050QX-32S-S4Q31', 'Arista-7060CX-32S-D48C8', 'Arista-7060CX-32S-C32', 'Arista-7060CX-32S-Q32', 'Arista-7060CX-32S-C32-T1']"
      - "build_version.split('.')[0].isdigit() and int(build_version.split('.')[0]) > 20220531 and hwsku in ['Arista-7050-QX-32S', 'Arista-7050QX32S-Q32', 'Arista-7050-QX32', 'Arista-7050QX-32S-S4Q31', 'Arista-7060CX-32S-D48C8', 'Arista-7060CX-32S-C32', 'Arista-7060CX-32S-Q32', 'Arista-7060CX-32S-C32-T1']"
      - "(topo_name not in ['ptf32', 'ptf64', 't0', 't0-64', 't0-52', 't0-116', 't0-118', 't0-88-o8c80', 't1', 't1-lag', 't1-28-lag', 't1-48-lag', 't1-64-lag', 't1-56-lag', 't1-backend', 'm0', 'm0-2vlan', 'mx', 'm1-48', 'm1-44', 'm1-108', 'm1-128', 't0-isolated-d16u16s1', 't1-isolated-d28u1', 't0-isolated-d32u32s2', 't1-isolated-d56u2'] and 't2' not in topo_type)"

copp/test_copp.py::TestCOPP::test_trap_neighbor_miss:
  skip:
    reason: "Copp test_trap_neighbor_miss is not supported on broadcom platforms and non-TOR topologies"
    conditions_logical_operator: or
    conditions:
      - "(asic_type in ['broadcom'] and release in ['202411'])"
      - "(topo_name not in ['t0', 't0-64', 't0-52', 't0-116', 't0-118', 't0-88-o8c80', 't0-isolated-d16u16s1', 't1-isolated-d28u1', 't0-isolated-d32u32s2', 't1-isolated-d56u2'])"

#######################################
#####            crm              #####
#######################################
crm/test_crm.py :
  xfail:
    reason: "xfail for IPv6-only topologies, issue with it try to excute ipv4 command with no output"
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19640 and '-v6-' in topo_name"

crm/test_crm.py::test_crm_fdb_entry:
  skip:
    reason: "Unsupported topology, expected to run only on 'T0*' or 'M0/MX' topology"
    conditions:
      - "'t0' not in topo_name and topo_type not in ['m0', 'mx']"

crm/test_crm_available.py:
  xfail:
    reason: "There is a known issue with broadcom dualtor (https://github.com/sonic-net/sonic-mgmt/issues/18873) or xfail for IPv6-only topologies, as it try to excute ipv4 command"
    conditions_logical_operator: or
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/18873 and 'dualtor' in topo_name and asic_type in ['broadcom']"
      - "https://github.com/sonic-net/sonic-mgmt/issues/19919 and '-v6-' in topo_name"

#######################################
#####           dash              #####
#######################################
dash:
  skip:
    reason: "Not supported on this DUT topology."
    conditions:
      - "'dpu' not in topo_name"

dash/crm/test_dash_crm.py:
  skip:
    reason: "Currently dash tests are not supported on KVM"
    conditions:
      - "asic_type in ['vs'] and https://github.com/sonic-net/sonic-mgmt/issues/16407"

dash/test_dash_acl.py:
  skip:
    reason: "Currently dash tests are not supported on KVM"
    conditions:
      - "asic_type in ['vs'] and https://github.com/sonic-net/sonic-mgmt/issues/16407"

dash/test_dash_disable_enable_eni.py:
  skip:
    reason: "Currently dash tests are not supported on KVM"
    conditions:
      - "asic_type in ['vs'] and https://github.com/sonic-net/sonic-mgmt/issues/16407"

dash/test_dash_eni_counter.py:
  skip:
    reason: "Currently dash tests are not supported on KVM"
    conditions:
      - "asic_type in ['vs'] and https://github.com/sonic-net/sonic-mgmt/issues/16407"

dash/test_dash_privatelink.py:
  skip:
    conditions_logical_operator: or
    reason: "Currently dash tests are not supported on KVM or non-smartswitch T1s"
    conditions:
      - "asic_type in ['vs'] and https://github.com/sonic-net/sonic-mgmt/issues/16407"
      - "hwsku not in ['Cisco-8102-28FH-DPU-O-T1', 'Mellanox-SN4280-O8C40', 'Mellanox-SN4280-O28', 'Cisco-8102-28FH-DPU-O']"

dash/test_dash_smartswitch_vnet.py:
  skip:
    conditions_logical_operator: or
    reason: "Currently dash tests are not supported on KVM or non-smartswitch T1s"
    conditions:
      - "asic_type in ['vs'] and https://github.com/sonic-net/sonic-mgmt/issues/16407"
      - "hwsku not in ['Cisco-8102-28FH-DPU-O-T1', 'Mellanox-SN4280-O8C40', 'Mellanox-SN4280-O28', 'Cisco-8102-28FH-DPU-O']"

dash/test_dash_vnet.py:
  skip:
    conditions_logical_operator: or
    reason: "Currently dash tests are not supported on KVM"
    conditions:
      - "asic_type in ['vs'] and https://github.com/sonic-net/sonic-mgmt/issues/16407"
      - "platform in ['x86_64-nvidia_sn4280-r0']"

dash/test_fnic.py:
  skip:
    conditions_logical_operator: or
    reason: "Currently dash tests are not supported on KVM or non-smartswitch T1s"
    conditions:
      - "asic_type in ['vs'] and https://github.com/sonic-net/sonic-mgmt/issues/16407"
      - "hwsku not in ['Cisco-8102-28FH-DPU-O-T1', 'Mellanox-SN4280-O8C40', 'Mellanox-SN4280-O28', 'Cisco-8102-28FH-DPU-O']"

dash/test_plnsg.py:
  skip:
    conditions_logical_operator: or
    reason: "Currently dash tests are not supported on KVM or non-smartswitch T1s"
    conditions:
      - "asic_type in ['vs'] and https://github.com/sonic-net/sonic-mgmt/issues/16407"
      - "hwsku not in ['Cisco-8102-28FH-DPU-O-T1', 'Mellanox-SN4280-O8C40', 'Mellanox-SN4280-O28', 'Cisco-8102-28FH-DPU-O']"

dash/test_relaxed_match_negative.py:
  skip:
    reason: "Currently dash tests are not supported on KVM"
    conditions:
      - "asic_type in ['vs'] and https://github.com/sonic-net/sonic-mgmt/issues/16407"

#######################################
#####       db_migrator           #####
#######################################
db_migrator/test_migrate_dns.py::test_migrate_dns_03:
  xfail:
    reason: "db_migrator does not support SonicQosProfile in minigraph"
    conditions:
      - "https://github.com/sonic-net/sonic-buildimage/issues/22120"

#######################################
#####            decap            #####
#######################################
decap/test_decap.py:
  skip:
    reason: 'Skip on t1-isolated-d32/128 and v6 topos'
    conditions_logical_operator: or
    conditions:
      - "topo_name in ['t1-isolated-d128', 't1-isolated-d32']"
      - "'-v6-' in topo_name"

decap/test_decap.py::test_decap[ttl=pipe, dscp=pipe, vxlan=disable]:
  skip:
    reason: "Not supported on broadcom after 201911 release, cisco-8000 all releases. Skip on t1-isolated-d32/128 topos"
    conditions_logical_operator: or
    conditions:
      - "(asic_type in ['broadcom'] and release not in ['201811', '201911']) or (asic_type in ['cisco-8000'])"
      - "topo_name in ['t1-isolated-d128', 't1-isolated-d32']"
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

decap/test_decap.py::test_decap[ttl=pipe, dscp=pipe, vxlan=set_unset]:
  skip:
    reason: "Not supported on broadcom after 201911 release, cisco-8000 all releases and marvell-prestera asics. Skip on t1-isolated-d32/128 topos"
    conditions_logical_operator: or
    conditions:
      - "(asic_type in ['broadcom'] and release not in ['201811', '201911']) or (asic_type in ['cisco-8000']) or (asic_type in ['marvell-prestera', 'marvell'])"
      - "topo_name in ['t1-isolated-d128', 't1-isolated-d32']"
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

decap/test_decap.py::test_decap[ttl=pipe, dscp=uniform, vxlan=disable]:
  skip:
    conditions_logical_operator: or
    reason: "Not supported on backend, broadcom before 202012 release. Skip 7260CX3 T1 topo in 202305 release. Skip on t1-isolated-d32/128 topos"
    conditions:
      - "(topo_name in ['t1-backend', 't0-backend']) or (asic_type in ['broadcom'] and release in ['201811', '201911'])"
      - "'7260CX3' in hwsku and release in ['202305'] and 't1' in topo_type"
      - "topo_name in ['t1-isolated-d128', 't1-isolated-d32']"
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

decap/test_decap.py::test_decap[ttl=pipe, dscp=uniform, vxlan=set_unset]:
  skip:
    reason: "Not supported on backend, T2 topologies , broadcom platforms before 202012 release, x86_64-8111_32eh_o-r0 platform. Skip on mellanox all releases. Skip on 7260CX3 T1 topo in 202305 release. Not required on isolated topologies d256u256s2, d96u32s2, d448u15-lag, and d128, as well as their minimzed and -v6 variants."
    conditions_logical_operator: or
    conditions:
      - "('t2' in topo_name) or (topo_name in ['t1-backend', 't0-backend']) or (asic_type in ['broadcom'] and release in ['201811', '201911']) or platform in ['x86_64-8111_32eh_o-r0'] or asic_type in ['mellanox']"
      - "'7260CX3' in hwsku and release in ['202305'] and 't1' in topo_type"
      - *noVxlanTopos

decap/test_decap.py::test_decap[ttl=uniform, dscp=pipe, vxlan=disable]:
  skip:
    reason: "Not supported uniform ttl mode"

decap/test_decap.py::test_decap[ttl=uniform, dscp=pipe, vxlan=set_unset]:
  skip:
    reason: "Not supported uniform ttl mode"

decap/test_decap.py::test_decap[ttl=uniform, dscp=uniform, vxlan=disable]:
  skip:
    reason: "Not supported uniform ttl mode"

decap/test_decap.py::test_decap[ttl=uniform, dscp=uniform, vxlan=set_unset]:
  skip:
    reason: "Not supported uniform ttl mode"

decap/test_subnet_decap.py::test_vlan_subnet_decap:
  skip:
    reason: "Supported only on T0 topology with KVM or broadcom td3 asic or mellanox asic, and available for 202405 release and later, need to skip on KVM testbed since subnet_decap feature haven't been added into yang model. Skip on t1-isolated-d32/128 topos"
    conditions_logical_operator: or
    conditions:
      - "topo_type not in ['t0']"
      - "asic_type not in ['vs', 'mellanox'] and asic_gen not in ['td3']"
      - "asic_type in ['vs'] and https://github.com/sonic-net/sonic-buildimage/issues/21090"
      - "release in ['202012', '202205', '202305', '202311']"
      - "topo_name in ['t1-isolated-d128', 't1-isolated-d32']"

#######################################
#####         dhcp_relay        #####
#######################################
dhcp_relay:
  skip:
    reason: "It is skipped for '202412' for now"
    conditions:
      - "release in ['202412']"

dhcp_relay/test_dhcp_counter_stress.py::test_dhcpcom_relay_counters_stress:
  xfail:
    reason: "7215 has low performance, and can only take low stress (about 5 pps)"
    conditions:
      - "platform in ['armhf-nokia_ixs7215_52x-r0']"

dhcp_relay/test_dhcp_counter_stress.py::test_dhcpcom_relay_counters_stress[discover]:
  xfail:
    reason: "Need to skip for discover test cases on dualtor"
    conditions:
      - "'dualtor' in topo_name"
      - "https://github.com/sonic-net/sonic-mgmt/issues/19230"

dhcp_relay/test_dhcp_counter_stress.py::test_dhcpcom_relay_counters_stress[request]:
  xfail:
    reason: "Need to skip for request test cases on dualtor"
    conditions:
      - "'dualtor' in topo_name"
      - "https://github.com/sonic-net/sonic-mgmt/issues/19230"

dhcp_relay/test_dhcp_relay.py:
  skip:
    reason: "Need to skip for Cisco backend platform"
    conditions:
      - "platform in ['x86_64-8111_32eh_o-r0', 'x86_64-8122_64eh_o-r0', 'x86_64-8122_64ehf_o-r0']"

dhcp_relay/test_dhcp_relay.py::test_dhcp_relay_after_link_flap:
  skip:
    reason: "Skip test_dhcp_relay_after_link_flap on dualtor or platform x86_64-8111_32eh_o-r0"
    conditions_logical_operator: or
    conditions:
      - "'dualtor' in topo_name"
      - "platform in ['x86_64-8111_32eh_o-r0']"

dhcp_relay/test_dhcp_relay.py::test_dhcp_relay_counter:
  skip:
    reason: "Skip test_dhcp_relay_counter in old release version"
    conditions_logical_operator: or
    conditions:
      - "release in ['201811', '201911', '202012']"

dhcp_relay/test_dhcp_relay.py::test_dhcp_relay_on_dualtor_standby:
  skip:
    reason: "The test case only tests DHCP relay on the dualtor standby dut"
    conditions:
      - "'dualtor' not in topo_name"

dhcp_relay/test_dhcp_relay.py::test_dhcp_relay_random_sport:
  skip:
    reason: "Skip test_dhcp_relay_random_sport on dualtor in 201811 and 201911 or platform x86_64-8111_32eh_o-r0"
    conditions_logical_operator: or
    conditions:
      - "'dualtor' in topo_name and release in ['201811', '201911']"
      - "platform in ['x86_64-8111_32eh_o-r0']"

dhcp_relay/test_dhcp_relay.py::test_dhcp_relay_start_with_uplinks_down:
  skip:
    reason: "Skip test_dhcp_relay_start_with_uplinks_down on dualtor or platform x86_64-8111_32eh_o-r0"
    conditions_logical_operator: or
    conditions:
      - "'dualtor' in topo_name"
      - "platform in ['x86_64-8111_32eh_o-r0']"

dhcp_relay/test_dhcp_relay.py::test_dhcp_relay_unicast_mac:
  skip:
    reason: "Skip test_dhcp_relay_unicast_mac on dualtor or platform x86_64-8111_32eh_o-r0"
    conditions_logical_operator: or
    conditions:
      - "'dualtor' in topo_name and release in ['201811', '201911']"
      - "platform in ['x86_64-8111_32eh_o-r0']"

dhcp_relay/test_dhcp_relay.py::test_dhcp_relay_with_source_port_ip_in_relay_enabled:
  skip:
    reason: "Skip test_dhcp_relay_with_source_port_ip_in_relay_enabled in old release version"
    conditions_logical_operator: or
    conditions:
      - "'dualtor' in topo_name and release in ['201811', '201911']"

dhcp_relay/test_dhcp_relay.py::test_interface_binding:
  skip:
    reason: "Skip test_interface_binding in old release version"
    conditions:
      - "release in ['201811', '201911', '202106']"

dhcp_relay/test_dhcp_relay_stress.py::test_dhcp_relay_restart_with_stress:
  skip:
    reason: "Skip due to flaky issue"
    conditions:
      - "asic_type in ['vs']"
      - "https://github.com/sonic-net/sonic-mgmt/issues/16450"

dhcp_relay/test_dhcp_relay_stress.py::test_dhcp_relay_stress:
  skip:
    reason: "1. Need to skip for platform armhf-nokia_ixs7215_52x-r0 due to buffer issues
             2. Need to skip for KVM due to low performance"
    conditions_logical_operator: or
    conditions:
      - "platform in ['armhf-nokia_ixs7215_52x-r0']"
      - "asic_type in ['vs']"

dhcp_relay/test_dhcp_relay_stress.py::test_dhcp_relay_stress[discover]:
  skip:
    reason: "Testcase ignored due to github issue: https://github.com/sonic-net/sonic-mgmt/issues/14851"
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/14851"

dhcp_relay/test_dhcp_relay_stress.py::test_dhcp_relay_stress[request]:
  skip:
    reason: "Testcase ignored due to github issue: https://github.com/sonic-net/sonic-mgmt/issues/14851"
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/14851"

dhcp_relay/test_dhcpv6_relay.py:
  skip:
    reason: "Need to skip for platform x86_64-8111_32eh_o-r0"
    conditions:
      - "platform in ['x86_64-8111_32eh_o-r0']"

dhcp_relay/test_dhcpv6_relay.py::TestDhcpv6RelayWithMultipleVlan:
  skip:
    reason: "skip the multiple vlan test on aa dualtor as interface state is not aa after vlan split"
    conditions:
      - "'dualtor-aa' in topo_name"
  xfail:
    reason: "The test is expected to fail due to GH issue: https://github.com/sonic-net/sonic-mgmt/issues/20760"
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/20760"

dhcp_relay/test_dhcpv6_relay.py::test_dhcp_relay_after_link_flap:
  skip:
    reason: "Skip test_dhcp_relay_after_link_flap in dualtor and old release version"
    conditions_logical_operator: or
    conditions:
      - "release in ['201811', '201911', '202106']"
      - "'dualtor' in topo_name"

dhcp_relay/test_dhcpv6_relay.py::test_dhcp_relay_default:
  skip:
    reason: "Skip test_dhcp_relay_default in old release version"
    conditions:
      - "release in ['201811', '201911', '202106']"

dhcp_relay/test_dhcpv6_relay.py::test_dhcp_relay_start_with_uplinks_down:
  skip:
    reason: "Skip test_dhcp_relay_start_with_uplinks_down in dualtor and old release version"
    conditions_logical_operator: or
    conditions:
      - "release in ['201811', '201911', '202106']"
      - "'dualtor' in topo_name"

dhcp_relay/test_dhcpv6_relay.py::test_dhcpv6_relay_counter:
  skip:
    reason: "Skip test_dhcpv6_relay_counter in old release version"
    conditions:
      - "release in ['201911', '202106']"

dhcp_relay/test_dhcpv6_relay.py::test_interface_binding:
  skip:
    reason: "Skip test_interface_binding in old release version"
    conditions:
      - "release in ['201911', '202106']"

#######################################
#####         dhcp_server        #####
#######################################
dhcp_server:
  skip:
    reason: "It is skipped for '202412' for now"
    conditions:
      - "release in ['202412']"

#######################################
#####         drop_packets        #####
#######################################
drop_packets:
  skip:
    reason: "M0/MX topo does not support drop_packets"
    conditions:
      - "topo_type in ['m0', 'mx']"

drop_packets/test_configurable_drop_counters.py::test_neighbor_link_down:
  xfail:
    reason: "xfail for IPv6-only topologies, issue with python max size"
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19920 and '-v6-' in topo_name"

drop_packets/test_drop_counters.py::test_acl_egress_drop:
  xfail:
    reason: "xfail for IPv6-only topologies, issue with valid_ipv4"
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19921 and '-v6-' in topo_name"

drop_packets/test_drop_counters.py::test_broken_ip_header:
   xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

drop_packets/test_drop_counters.py::test_ip_is_zero_addr:
   xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

drop_packets/test_drop_counters.py::test_no_egress_drop_on_down_link:
  xfail:
    reason: "xfail for IPv6-only topologies, issue with valid_ipv4"
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19921 and '-v6-' in topo_name"

drop_packets/test_drop_counters.py::test_src_ip_is_multicast_addr:
   xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

#######################################
#####           dualtor           #####
#######################################
dualtor:
  skip:
    reason: "It is skipped for '202412' for now"
    conditions:
      - "release in ['202412']"

dualtor/test_bgp_block_loopback1.py:
  skip:
    reason: "KVM do not support dualtor tunnel functionality, lower tor bgp verify would fail."
    conditions:
      - "asic_type in ['vs']"

dualtor/test_ipinip.py::test_encap_with_mirror_session:
  xfail:
     reason: "Testcase ignored on dualtor-aa topology and mellanox setups due to Github issue: https://github.com/sonic-net/sonic-mgmt/issues/8577"
     conditions:
       - https://github.com/sonic-net/sonic-mgmt/issues/8577
       - "'dualtor-aa' in topo_name and asic_type in ['mellanox']"

dualtor/test_orch_stress.py:
  skip:
    reason: "This testcase is designed for single tor testbed with mock dualtor config."
    conditions:
      - "(topo_type not in ['t0']) or ('dualtor' in topo_name)"

dualtor/test_orchagent_active_tor_downstream.py:
  skip:
    reason: "This testcase is designed for single tor testbed with mock dualtor config."
    conditions:
      - "(topo_type not in ['t0']) or ('dualtor' in topo_name)"

dualtor/test_orchagent_active_tor_downstream.py::test_downstream_ecmp_nexthops:
  skip:
    reason: "On Mellanox SPC1 platforms, due to HW limitation, the hierarchy ecmp behavior is not exactly as expected
             in the test case. / This testcase is designed for single tor testbed with mock dualtor config."
    conditions_logical_operator: or
    conditions:
      - "asic_gen == 'spc1'"
      - "(topo_type not in ['t0']) or ('dualtor' in topo_name)"

dualtor/test_orchagent_mac_move.py:
  skip:
    reason: "This testcase is designed for single tor testbed with mock dualtor config."
    conditions:
      - "(topo_type not in ['t0']) or ('dualtor' in topo_name)"

dualtor/test_orchagent_slb.py:
  skip:
    reason: "KVM do not support dualtor tunnel functionality, lower tor bgp verify would fail."
    conditions:
      - "asic_type in ['vs']"

dualtor/test_orchagent_standby_tor_downstream.py::test_downstream_standby_mux_toggle_active:
  skip:
    reason: "This testcase is designed for single tor testbed with mock dualtor config."
    conditions:
      - "(topo_type not in ['t0']) or ('dualtor' in topo_name)"
  xfail:
    reason: "Image issue on Boradcom platforms, but not consistently failing"
    conditions:
      - "asic_type in ['broadcom']"

dualtor/test_orchagent_standby_tor_downstream.py::test_standby_tor_downstream:
  skip:
    reason: "This testcase is designed for single tor testbed with mock dualtor config."
    conditions:
      - "(topo_type not in ['t0']) or ('dualtor' in topo_name)"

dualtor/test_orchagent_standby_tor_downstream.py::test_standby_tor_downstream_bgp_recovered:
  skip:
    reason: "This testcase is designed for single tor testbed with mock dualtor config."
    conditions:
      - "(topo_type not in ['t0']) or ('dualtor' in topo_name)"

dualtor/test_orchagent_standby_tor_downstream.py::test_standby_tor_downstream_loopback_route_readded:
  skip:
    reason: "This testcase is designed for single tor testbed with mock dualtor config."
    conditions:
      - "(topo_type not in ['t0']) or ('dualtor' in topo_name)"

dualtor/test_orchagent_standby_tor_downstream.py::test_standby_tor_downstream_t1_link_recovered:
  skip:
    reason: "This testcase is designed for single tor testbed with mock dualtor config."
    conditions:
      - "(topo_type not in ['t0']) or ('dualtor' in topo_name)"

dualtor/test_orchagent_standby_tor_downstream.py::test_standby_tor_remove_neighbor_downstream_standby:
  skip:
    reason: "This testcase is designed for single tor testbed with mock dualtor config."
    conditions:
      - "(topo_type not in ['t0']) or ('dualtor' in topo_name)"

dualtor/test_standby_tor_upstream_mux_toggle.py:
  skip:
    reason: "This testcase is designed for single tor testbed with mock dualtor config."
    conditions:
      - "(topo_type not in ['t0']) or ('dualtor' in topo_name)"

dualtor/test_switchover_failure.py:
  skip:
    reason: "Test in KVM has a high failure rate, skip with Github issue."
    conditions:
      - "asic_type in ['vs']"
      - https://github.com/sonic-net/sonic-mgmt/issues/14247

dualtor/test_tor_ecn.py::test_dscp_to_queue_during_encap_on_standby:
  xfail:
     reason: "Testcase ignored on dualtor-aa topology and mellanox setups due to Github issue: https://github.com/sonic-net/sonic-mgmt/issues/8577"
     conditions:
       - https://github.com/sonic-net/sonic-mgmt/issues/8577
       - "'dualtor-aa' in topo_name and asic_type in ['mellanox']"

dualtor/test_tor_ecn.py::test_ecn_during_encap_on_standby:
  xfail:
     reason: "Testcase ignored on dualtor-aa topology and mellanox setups due to Github issue: https://github.com/sonic-net/sonic-mgmt/issues/8577"
     conditions:
       - https://github.com/sonic-net/sonic-mgmt/issues/8577
       - "'dualtor-aa' in topo_name and asic_type in ['mellanox']"

dualtor/test_tunnel_memory_leak.py::test_tunnel_memory_leak:
  skip:
    reason: "Testcase ignored on dualtor-64 topology due to Github issue: https://github.com/sonic-net/sonic-mgmt/issues/11403"
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/11403 and 'dualtor-64' in topo_name"

dualtor_io:
  skip:
    reason: "Testcase could only be executed on dualtor testbed."
    conditions:
      - "'dualtor' not in topo_name"

dualtor_io/test_grpc_server_failure.py:
  skip:
    reason: "This test only support on dualtor-aa testbed"
    conditions:
      - "'dualtor-aa' not in topo_name"

dualtor_io/test_link_failure.py::test_active_link_down_downstream_active:
  skip:
    reason: "KVM testbed do not support shutdown fanout interface action / Testcase could only be executed on dualtor testbed."
    conditions:
      - "asic_type in ['vs'] or 'dualtor' not in topo_name"

dualtor_io/test_link_failure.py::test_active_link_down_downstream_active_soc:
  skip:
    reason: "KVM testbed do not support shutdown fanout interface action / Testcase could only be executed on dualtor testbed."
    conditions:
      - "asic_type in ['vs'] or 'dualtor' not in topo_name"

dualtor_io/test_link_failure.py::test_active_link_down_downstream_standby:
  skip:
    reason: "KVM testbed do not support shutdown fanout interface action / Testcase could only be executed on dualtor testbed."
    conditions:
      - "asic_type in ['vs'] or 'dualtor' not in topo_name"

dualtor_io/test_link_failure.py::test_active_link_down_upstream:
  skip:
    reason: "KVM testbed do not support shutdown fanout interface action / Testcase could only be executed on dualtor testbed."
    conditions:
      - "asic_type in ['vs'] or 'dualtor' not in topo_name"

dualtor_io/test_link_failure.py::test_active_link_down_upstream_soc:
  skip:
    reason: "KVM testbed do not support shutdown fanout interface action / Testcase could only be executed on dualtor testbed."
    conditions:
      - "asic_type in ['vs'] or 'dualtor' not in topo_name"

dualtor_io/test_link_failure.py::test_standby_link_down_downstream_active:
  skip:
    reason: "KVM testbed do not support shutdown fanout interface action / Testcase could only be executed on dualtor testbed."
    conditions:
      - "asic_type in ['vs'] or 'dualtor' not in topo_name"

dualtor_io/test_link_failure.py::test_standby_link_down_downstream_standby:
  skip:
    reason: "KVM testbed do not support shutdown fanout interface action / Testcase could only be executed on dualtor testbed."
    conditions:
      - "asic_type in ['vs'] or 'dualtor' not in topo_name"

dualtor_io/test_link_failure.py::test_standby_link_down_upstream:
  skip:
    reason: "KVM testbed do not support shutdown fanout interface action / Testcase could only be executed on dualtor testbed."
    conditions:
      - "asic_type in ['vs'] or 'dualtor' not in topo_name"

dualtor_io/test_normal_op.py:
  skip:
    reason: "KVM do not support dualtor tunnel functionality, verify DB status would fail. Temporarily skip in PR testing"
    conditions:
      - "asic_type in ['vs']"

dualtor_io/test_tor_bgp_failure.py:
  skip:
    reason: "Skip on kvm due to an issue."
    conditions:
      - "asic_type in ['vs'] and https://github.com/sonic-net/sonic-mgmt/issues/16448"

dualtor_io/test_tor_failure.py:
  skip:
    reason: "This script would toggle PDU, which is not supported on KVM."
    conditions:
      - "asic_type in ['vs']"

dualtor_mgmt:
  skip:
    reason: "It is skipped for '202412' for now"
    conditions:
      - "release in ['202412']"

dualtor_mgmt/test_dualtor_bgp_update_delay.py:
  xfail:
    reason: "Has flaky issue on kvm testbed"
    conditions:
      - asic_type in ['vs']
      - https://github.com/sonic-net/sonic-mgmt/issues/14996

dualtor_mgmt/test_egress_drop_nvidia.py:
  skip:
    reason: "This test is only for Nvidia platforms."
    conditions:
      - "asic_type not in ['mellanox']"

dualtor_mgmt/test_server_failure.py::test_server_reboot:
  skip:
    reason: "KVM testbed does not have fanout hosts"
    conditions:
      - "asic_type in ['vs']"

dualtor_mgmt/test_toggle_mux.py:
  skip:
    reason: "This testcase has low passing rate in KVM PR test, skip with issue to unblock PR test."
    conditions:
      - "asic_type in ['vs'] and https://github.com/sonic-net/sonic-mgmt/issues/15958"

#######################################
#####         dut_console         #####
#######################################
dut_console:
  skip:
    reason: "Not supported vs testbed."
    conditions:
      - "asic_type in ['vs']"

dut_console/test_console_baud_rate.py::test_baud_rate_boot_connect:
  skip:
    reason: "Platform linecards do not have console ports"
    conditions:
      - "asic_type in ['vs'] or 'arista_7800' in platform"

dut_console/test_console_baud_rate.py::test_baud_rate_sonic_connect:
  skip:
    reason: "Platform linecards do not have console ports"
    conditions:
      - "asic_type in ['vs'] or 'arista_7800' in platform"

dut_console/test_console_chassis_conn.py::test_console_availability_serial_ports:
  skip:
    reason: "Skipping test because test is not supported on this hwsku"
    conditions_logical_operator: or
    conditions:
      - "platform in ['x86_64-nokia_ixr7250e_36x400g-r0', 'x86_64-nokia_ixr7250_x3b-r0']"
      - "'t2_single_node' in topo_name"

#######################################
#####             ecmp            #####
#######################################
ecmp/inner_hashing/test_inner_hashing.py:
  skip:
    conditions_logical_operator: or
    reason: "PBH introduced in 202111 and skip this test on Mellanox 2700 platform. Test does not support dualtor topology."
    conditions:
      - "branch in ['201811', '201911', '202012', '202106']"
      - "platform not in ['x86_64-mlnx_msn3800-r0', 'x86_64-mlnx_msn4600c-r0', 'x86_64-kvm_x86_64-r0']"
      - "topo_type not in ['t0']"
      - "asic_type not in ['mellanox', 'vs']"
      - "'dualtor' in topo_name"

ecmp/inner_hashing/test_inner_hashing_lag.py:
  skip:
    conditions_logical_operator: or
    reason: "PBH introduced in 202111 and skip this test on Mellanox 2700 platform. Test does not support dualtor topology."
    conditions:
      - "branch in ['201811', '201911', '202012', '202106']"
      - "platform not in ['x86_64-mlnx_msn3800-r0', 'x86_64-mlnx_msn4600c-r0', 'x86_64-kvm_x86_64-r0']"
      - "topo_type not in ['t0']"
      - "asic_type not in ['mellanox', 'vs']"
      - "'dualtor' in topo_name"

ecmp/inner_hashing/test_wr_inner_hashing.py:
  skip:
    conditions_logical_operator: or
    reason: "PBH introduced in 202111 and skip this test on Mellanox 2700 platform. Test does not support dualtor topology."
    conditions:
      - "branch in ['201811', '201911', '202012', '202106']"
      - "platform not in ['x86_64-mlnx_msn3800-r0', 'x86_64-mlnx_msn4600c-r0', 'x86_64-kvm_x86_64-r0']"
      - "topo_type not in ['t0']"
      - "asic_type not in ['mellanox', 'vs']"
      - "'dualtor' in topo_name"

ecmp/inner_hashing/test_wr_inner_hashing_lag.py:
  skip:
    conditions_logical_operator: or
    reason: "PBH introduced in 202111 and skip this test on Mellanox 2700 platform. Test does not support dualtor topology."
    conditions:
      - "branch in ['201811', '201911', '202012', '202106']"
      - "platform not in ['x86_64-mlnx_msn3800-r0', 'x86_64-mlnx_msn4600c-r0', 'x86_64-kvm_x86_64-r0']"
      - "topo_type not in ['t0']"
      - "asic_type not in ['mellanox', 'vs']"
      - "'dualtor' in topo_name"

ecmp/test_ecmp_balance.py:
  skip:
    reason: "Only support Broadcom T1/T0 topology for now"
    conditions_logical_operator: or
    conditions:
      - "topo_type not in ['t1', 't0']"
      - "asic_type not in ['broadcom']"

ecmp/test_ecmp_sai_value.py:
  skip:
    reason: "Only support Broadcom T1/T0 topology with 20230531 and above image, 7050cx3 T1 doesn't enable this feature"
    conditions_logical_operator: or
    conditions:
      - "topo_type not in ['t1', 't0']"
      - "asic_type not in ['broadcom']"
      - "release in ['201911', '202012', '202205', '202211']"
      - "topo_type in ['t1'] and hwsku in ['Arista-7050CX3-32S-C32', 'Arista-7050CX3-32S-C28S4']"

ecmp/test_fgnhg.py:
  skip:
    conditions_logical_operator: or
    reason: "The test case only runs on Mellanox T0 platform running 202012 or above; Mellanox 2700 platform is skipped; Skip on issue 7755"
    conditions:
      - "branch in ['201811', '201911']"
      - "platform in ['x86_64-mlnx_msn2700-r0', 'x86_64-mlnx_msn2700a1-r0']"
      - "topo_type not in ['t0']"
      - "asic_type not in ['mellanox']"
      - "https://github.com/sonic-net/sonic-mgmt/issues/7755"
      - "https://github.com/sonic-net/sonic-mgmt/issues/6558 and 'msn2' in platform"

#######################################
#####         everflow            #####
#######################################
everflow/test_everflow_ipv6.py::TestIngressEverflowIPv6::test_any_protocol[erspan_ipv4-cli-default]:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"

everflow/test_everflow_ipv6.py::TestIngressEverflowIPv6::test_any_protocol[erspan_ipv6-cli-default]:
  skip:
    reason: "SAI_STATUS_NOT_SUPPORTED for everflow over IPv6 on Arista-7260CX3 and Arista-7060CX"
    conditions_logical_operator: and
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19096"
      - "platform in ['x86_64-arista_7260cx3_64', 'x86_64-arista_7060_cx32s']"
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

everflow/test_everflow_ipv6.py::TestIngressEverflowIPv6::test_any_transport_protocol[erspan_ipv4-cli-default]:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"

everflow/test_everflow_ipv6.py::TestIngressEverflowIPv6::test_any_transport_protocol[erspan_ipv6-cli-default]:
  skip:
    reason: "SAI_STATUS_NOT_SUPPORTED for everflow over IPv6 on Arista-7260CX3 and Arista-7060CX"
    conditions_logical_operator: and
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19096"
      - "platform in ['x86_64-arista_7260cx3_64', 'x86_64-arista_7060_cx32s']"
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

everflow/test_everflow_ipv6.py::TestIngressEverflowIPv6::test_both_subnets[erspan_ipv4-cli-default]:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"

everflow/test_everflow_ipv6.py::TestIngressEverflowIPv6::test_both_subnets[erspan_ipv6-cli-default]:
  skip:
    reason: "SAI_STATUS_NOT_SUPPORTED for everflow over IPv6 on Arista-7260CX3 and Arista-7060CX"
    conditions_logical_operator: and
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19096"
      - "platform in ['x86_64-arista_7260cx3_64', 'x86_64-arista_7060_cx32s']"

everflow/test_everflow_ipv6.py::TestIngressEverflowIPv6::test_dest_subnet[erspan_ipv4-cli-default]:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"

everflow/test_everflow_ipv6.py::TestIngressEverflowIPv6::test_dest_subnet[erspan_ipv6-cli-default]:
  skip:
    reason: "SAI_STATUS_NOT_SUPPORTED for everflow over IPv6 on Arista-7260CX3 and Arista-7060CX"
    conditions_logical_operator: and
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19096"
      - "platform in ['x86_64-arista_7260cx3_64', 'x86_64-arista_7060_cx32s']"

everflow/test_everflow_ipv6.py::TestIngressEverflowIPv6::test_dscp_mirroring[erspan_ipv4-cli-default]:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"

everflow/test_everflow_ipv6.py::TestIngressEverflowIPv6::test_dscp_mirroring[erspan_ipv6-cli-default]:
  skip:
    reason: "SAI_STATUS_NOT_SUPPORTED for everflow over IPv6 on Arista-7260CX3 and Arista-7060CX"
    conditions_logical_operator: and
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19096"
      - "platform in ['x86_64-arista_7260cx3_64', 'x86_64-arista_7060_cx32s']"

everflow/test_everflow_ipv6.py::TestIngressEverflowIPv6::test_dst_ipv6_mirroring[erspan_ipv4-cli-default]:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"

everflow/test_everflow_ipv6.py::TestIngressEverflowIPv6::test_dst_ipv6_mirroring[erspan_ipv6-cli-default]:
  skip:
    reason: "SAI_STATUS_NOT_SUPPORTED for everflow over IPv6 on Arista-7260CX3 and Arista-7060CX"
    conditions_logical_operator: and
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19096"
      - "platform in ['x86_64-arista_7260cx3_64', 'x86_64-arista_7060_cx32s']"

everflow/test_everflow_ipv6.py::TestIngressEverflowIPv6::test_fuzzy_subnets[erspan_ipv4-cli-default]:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"

everflow/test_everflow_ipv6.py::TestIngressEverflowIPv6::test_fuzzy_subnets[erspan_ipv6-cli-default]:
  skip:
    reason: "SAI_STATUS_NOT_SUPPORTED for everflow over IPv6 on Arista-7260CX3 and Arista-7060CX"
    conditions_logical_operator: and
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19096"
      - "platform in ['x86_64-arista_7260cx3_64', 'x86_64-arista_7060_cx32s']"

everflow/test_everflow_ipv6.py::TestIngressEverflowIPv6::test_invalid_tcp_rule[erspan_ipv4-cli-default]:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"

everflow/test_everflow_ipv6.py::TestIngressEverflowIPv6::test_invalid_tcp_rule[erspan_ipv6-cli-default]:
  skip:
    reason: "SAI_STATUS_NOT_SUPPORTED for everflow over IPv6 on Arista-7260CX3 and Arista-7060CX"
    conditions_logical_operator: and
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19096"
      - "platform in ['x86_64-arista_7260cx3_64', 'x86_64-arista_7060_cx32s']"

everflow/test_everflow_ipv6.py::TestIngressEverflowIPv6::test_l4_dst_port_mirroring[erspan_ipv4-cli-default]:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

everflow/test_everflow_ipv6.py::TestIngressEverflowIPv6::test_l4_dst_port_mirroring[erspan_ipv6-cli-default]:
  skip:
    reason: "SAI_STATUS_NOT_SUPPORTED for everflow over IPv6 on Arista-7260CX3 and Arista-7060CX"
    conditions_logical_operator: and
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19096"
      - "platform in ['x86_64-arista_7260cx3_64', 'x86_64-arista_7060_cx32s']"

everflow/test_everflow_ipv6.py::TestIngressEverflowIPv6::test_l4_dst_port_range_mirroring[erspan_ipv4-cli-default]:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"

everflow/test_everflow_ipv6.py::TestIngressEverflowIPv6::test_l4_dst_port_range_mirroring[erspan_ipv6-cli-default]:
  skip:
    reason: "SAI_STATUS_NOT_SUPPORTED for everflow over IPv6 on Arista-7260CX3 and Arista-7060CX"
    conditions_logical_operator: and
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19096"
      - "platform in ['x86_64-arista_7260cx3_64', 'x86_64-arista_7060_cx32s']"
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

everflow/test_everflow_ipv6.py::TestIngressEverflowIPv6::test_l4_range_mirroring[erspan_ipv4-cli-default]:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"

everflow/test_everflow_ipv6.py::TestIngressEverflowIPv6::test_l4_range_mirroring[erspan_ipv6-cli-default]:
  skip:
    reason: "SAI_STATUS_NOT_SUPPORTED for everflow over IPv6 on Arista-7260CX3 and Arista-7060CX"
    conditions_logical_operator: and
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19096"
      - "platform in ['x86_64-arista_7260cx3_64', 'x86_64-arista_7060_cx32s']"

everflow/test_everflow_ipv6.py::TestIngressEverflowIPv6::test_l4_src_port_mirroring[erspan_ipv4-cli-default]:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"

everflow/test_everflow_ipv6.py::TestIngressEverflowIPv6::test_l4_src_port_mirroring[erspan_ipv6-cli-default]:
  skip:
    reason: "SAI_STATUS_NOT_SUPPORTED for everflow over IPv6 on Arista-7260CX3 and Arista-7060CX"
    conditions_logical_operator: and
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19096"
      - "platform in ['x86_64-arista_7260cx3_64', 'x86_64-arista_7060_cx32s']"

everflow/test_everflow_ipv6.py::TestIngressEverflowIPv6::test_l4_src_port_range_mirroring[erspan_ipv4-cli-default]:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"

everflow/test_everflow_ipv6.py::TestIngressEverflowIPv6::test_l4_src_port_range_mirroring[erspan_ipv6-cli-default]:
  skip:
    reason: "SAI_STATUS_NOT_SUPPORTED for everflow over IPv6 on Arista-7260CX3 and Arista-7060CX"
    conditions_logical_operator: and
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19096"
      - "platform in ['x86_64-arista_7260cx3_64', 'x86_64-arista_7060_cx32s']"

everflow/test_everflow_ipv6.py::TestIngressEverflowIPv6::test_next_header_mirroring[erspan_ipv4-cli-default]:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"

everflow/test_everflow_ipv6.py::TestIngressEverflowIPv6::test_next_header_mirroring[erspan_ipv6-cli-default]:
  skip:
    reason: "SAI_STATUS_NOT_SUPPORTED for everflow over IPv6 on Arista-7260CX3 and Arista-7060CX"
    conditions_logical_operator: and
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19096"
      - "platform in ['x86_64-arista_7260cx3_64', 'x86_64-arista_7060_cx32s']"

everflow/test_everflow_ipv6.py::TestIngressEverflowIPv6::test_source_subnet[erspan_ipv4-cli-default]:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"

everflow/test_everflow_ipv6.py::TestIngressEverflowIPv6::test_source_subnet[erspan_ipv6-cli-default]:
  skip:
    reason: "SAI_STATUS_NOT_SUPPORTED for everflow over IPv6 on Arista-7260CX3 and Arista-7060CX"
    conditions_logical_operator: and
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19096"
      - "platform in ['x86_64-arista_7260cx3_64', 'x86_64-arista_7060_cx32s']"

everflow/test_everflow_ipv6.py::TestIngressEverflowIPv6::test_src_ipv6_mirroring[erspan_ipv4-cli-default]:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

everflow/test_everflow_ipv6.py::TestIngressEverflowIPv6::test_src_ipv6_mirroring[erspan_ipv6-cli-default]:
  skip:
    reason: "SAI_STATUS_NOT_SUPPORTED for everflow over IPv6 on Arista-7260CX3 and Arista-7060CX"
    conditions_logical_operator: and
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19096"
      - "platform in ['x86_64-arista_7260cx3_64', 'x86_64-arista_7060_cx32s']"
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

everflow/test_everflow_ipv6.py::TestIngressEverflowIPv6::test_tcp_application_mirroring[erspan_ipv4-cli-default]:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"

everflow/test_everflow_ipv6.py::TestIngressEverflowIPv6::test_tcp_application_mirroring[erspan_ipv6-cli-default]:
  skip:
    reason: "SAI_STATUS_NOT_SUPPORTED for everflow over IPv6 on Arista-7260CX3 and Arista-7060CX"
    conditions_logical_operator: and
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19096"
      - "platform in ['x86_64-arista_7260cx3_64', 'x86_64-arista_7060_cx32s']"

everflow/test_everflow_ipv6.py::TestIngressEverflowIPv6::test_tcp_flags_mirroring[erspan_ipv4-cli-default]:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"

everflow/test_everflow_ipv6.py::TestIngressEverflowIPv6::test_tcp_flags_mirroring[erspan_ipv6-cli-default]:
  skip:
    reason: "SAI_STATUS_NOT_SUPPORTED for everflow over IPv6 on Arista-7260CX3 and Arista-7060CX"
    conditions_logical_operator: and
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19096"
      - "platform in ['x86_64-arista_7260cx3_64', 'x86_64-arista_7060_cx32s']"

everflow/test_everflow_ipv6.py::TestIngressEverflowIPv6::test_tcp_response_mirroring[erspan_ipv4-cli-default]:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"

everflow/test_everflow_ipv6.py::TestIngressEverflowIPv6::test_tcp_response_mirroring[erspan_ipv6-cli-default]:
  skip:
    reason: "SAI_STATUS_NOT_SUPPORTED for everflow over IPv6 on Arista-7260CX3 and Arista-7060CX"
    conditions_logical_operator: and
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19096"
      - "platform in ['x86_64-arista_7260cx3_64', 'x86_64-arista_7060_cx32s']"

everflow/test_everflow_ipv6.py::TestIngressEverflowIPv6::test_udp_application_mirroring[erspan_ipv4-cli-default]:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

everflow/test_everflow_ipv6.py::TestIngressEverflowIPv6::test_udp_application_mirroring[erspan_ipv6-cli-default]:
  skip:
    reason: "SAI_STATUS_NOT_SUPPORTED for everflow over IPv6 on Arista-7260CX3 and Arista-7060CX"
    conditions_logical_operator: and
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19096"
      - "platform in ['x86_64-arista_7260cx3_64', 'x86_64-arista_7060_cx32s']"

everflow/test_everflow_per_interface.py:
  skip:
    reason: "Skip running on dualtor testbed/unsupported platforms or
                  multi-asic due to https://github.com/sonic-net/sonic-buildimage/issues/11776"
    conditions_logical_operator: or
    conditions:
      - "'dualtor' in topo_name"
      - "platform in ['x86_64-8800_lc_48h_o-r0', 'x86_64-8800_lc_48h-r0']"
      - "(is_multi_asic==True) and https://github.com/sonic-net/sonic-buildimage/issues/11776"

everflow/test_everflow_per_interface.py::test_everflow_packet_format[ipv4-erspan_ipv6-default]:
  skip:
    reason: "SAI_STATUS_NOT_SUPPORTED for everflow over IPv6 on Arista-7260CX3 and Arista-7060CX"
    conditions_logical_operator: and
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19096"
      - "platform in ['x86_64-arista_7260cx3_64', 'x86_64-arista_7060_cx32s']"

everflow/test_everflow_per_interface.py::test_everflow_packet_format[ipv6-erspan:
  skip:
    reason: "Skip everflow packet integrity IPv6 test on unsupported platforms"
    conditions_logical_operator: or
    conditions:
      - "asic_type in ['cisco-8000', 'marvell', 'mellanox', 'marvell-prestera'] or (asic_subtype in ['broadcom-dnx'] and https://github.com/sonic-net/sonic-swss/issues/2204)"
      - "'dualtor' in topo_name"
      - "platform in ['x86_64-8800_lc_48h_o-r0', 'x86_64-8800_lc_48h-r0']"
      - "(is_multi_asic==True) and https://github.com/sonic-net/sonic-buildimage/issues/11776"

everflow/test_everflow_per_interface.py::test_everflow_packet_format[ipv6-erspan_ipv6-default]:
  skip:
    reason: "SAI_STATUS_NOT_SUPPORTED for everflow over IPv6 on Arista-7260CX3 and Arista-7060CX"
    conditions_logical_operator: and
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19096"
      - "platform in ['x86_64-arista_7260cx3_64', 'x86_64-arista_7060_cx32s']"

everflow/test_everflow_per_interface.py::test_everflow_packet_format[ipv6-m0_l3_scenario]:
  skip:
    reason: "Skip m0 everflow packet integrity IPv6 test on unsupported platforms"
    conditions_logical_operator: or
    conditions:
      - "asic_type in ['marvell', 'marvell-prestera']"
      - "'dualtor' in topo_name"
      - "platform in ['x86_64-8800_lc_48h_o-r0', 'x86_64-8800_lc_48h-r0']"
      - "(is_multi_asic==True) and https://github.com/sonic-net/sonic-buildimage/issues/11776"

everflow/test_everflow_per_interface.py::test_everflow_packet_format[ipv6-m0_vlan_scenario]:
  skip:
    reason: "Skip m0 everflow packet integrity IPv6 test on unsupported platforms"
    conditions_logical_operator: or
    conditions:
      - "asic_type in ['marvell', 'marvell-prestera']"
      - "'dualtor' in topo_name"
      - "platform in ['x86_64-8800_lc_48h_o-r0', 'x86_64-8800_lc_48h-r0']"
      - "(is_multi_asic==True) and https://github.com/sonic-net/sonic-buildimage/issues/11776"

everflow/test_everflow_per_interface.py::test_everflow_per_interface[ipv4-erspan:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"

everflow/test_everflow_per_interface.py::test_everflow_per_interface[ipv4-erspan_ipv6-default]:
  skip:
    reason: "SAI_STATUS_NOT_SUPPORTED for everflow over IPv6 on Arista-7260CX3 and Arista-7060CX"
    conditions_logical_operator: and
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19096"
      - "platform in ['x86_64-arista_7260cx3_64', 'x86_64-arista_7060_cx32s']"

everflow/test_everflow_per_interface.py::test_everflow_per_interface[ipv6-erspan:
  skip:
    reason: "Skip everflow per interface IPv6 test on unsupported platforms"
    conditions_logical_operator: or
    conditions:
      - "asic_type in ['cisco-8000', 'marvell', 'mellanox', 'marvell-prestera'] or (asic_subtype in ['broadcom-dnx'] and https://github.com/sonic-net/sonic-swss/issues/2204)"
      - "'dualtor' in topo_name"
      - "platform in ['x86_64-8800_lc_48h_o-r0', 'x86_64-8800_lc_48h-r0']"
      - "(is_multi_asic==True) and https://github.com/sonic-net/sonic-buildimage/issues/11776"

everflow/test_everflow_per_interface.py::test_everflow_per_interface[ipv6-erspan_ipv6-default]:
  skip:
    reason: "SAI_STATUS_NOT_SUPPORTED for everflow over IPv6 on Arista-7260CX3 and Arista-7060CX. Or skip everflow per interface IPv6 test on unsupported platforms x86_64-nvidia_sn5640-r0."
    conditions_logical_operator: or
    conditions:
      - "platform in ['x86_64-arista_7260cx3_64', 'x86_64-arista_7060_cx32s'] and https://github.com/sonic-net/sonic-mgmt/issues/19096"
      - "platform in ['x86_64-nvidia_sn5640-r0']"
  xfail:
    reason: "xfail for IPv6-only topologies, need support for IPv6 bgp. Or test case has issue on the t0-isolated-d256u256s2 topo."
    conditions_logical_operator: or
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19096 and '-v6-' in topo_name"
      - "'t0-isolated-d256u256s2' in topo_name"

everflow/test_everflow_per_interface.py::test_everflow_per_interface[ipv6-m0_l3_scenario]:
  skip:
    reason: "Skip m0 everflow per interface IPv6 test on unsupported platforms"
    conditions_logical_operator: or
    conditions:
      - "asic_type in ['marvell', 'marvell-prestera']"
      - "'dualtor' in topo_name"
      - "platform in ['x86_64-8800_lc_48h_o-r0', 'x86_64-8800_lc_48h-r0']"
      - "(is_multi_asic==True) and https://github.com/sonic-net/sonic-buildimage/issues/11776"

everflow/test_everflow_per_interface.py::test_everflow_per_interface[ipv6-m0_vlan_scenario]:
  skip:
    reason: "Skip m0 everflow per interface IPv6 test on unsupported platforms"
    conditions_logical_operator: or
    conditions:
      - "asic_type in ['marvell', 'marvell-prestera']"
      - "'dualtor' in topo_name"
      - "platform in ['x86_64-8800_lc_48h_o-r0', 'x86_64-8800_lc_48h-r0']"
      - "(is_multi_asic==True) and https://github.com/sonic-net/sonic-buildimage/issues/11776"

everflow/test_everflow_testbed.py::EverflowIPv4Tests::test_everflow_dscp_with_policer:
  skip:
    reason: "Test not supported on Mellanox platforms"
    conditions:
      - "asic_type in ['mellanox']"

everflow/test_everflow_testbed.py::TestEverflowV4EgressAclEgressMirror:
  skip:
    reason: "For Mellanox t0-120 setup - Need to skip the test due to HW resource limitation.
             For Cisco-8000 - EverflowV4 EgressAcl EgressMirror - is not yet fully supported on cisco chassis. Skipping it till it is fully validated.
             Or Skip for IPv6-only topologies"
    conditions_logical_operator: "OR"
    conditions:
      - "asic_type in ['cisco-8000']"
      - "'t0-120' in topo_name and asic_type in ['mellanox']"
      - "'-v6-' in topo_name"

everflow/test_everflow_testbed.py::TestEverflowV4EgressAclEgressMirror::test_everflow_basic_forwarding[erspan_ipv4-cli-downstream-default]:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"

everflow/test_everflow_testbed.py::TestEverflowV4EgressAclEgressMirror::test_everflow_basic_forwarding[erspan_ipv4-cli-upstream-default]:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"

everflow/test_everflow_testbed.py::TestEverflowV4EgressAclEgressMirror::test_everflow_basic_forwarding[erspan_ipv6-cli-downstream-default]:
  xfail:
    reason: "xfail for IPv6-only topologies, need support for IPv6 bgp. Or test case has issue on the t0-isolated-d256u256s2 topo."
    conditions_logical_operator: or
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19922 and '-v6-' in topo_name"
      - "'t0-isolated-d256u256s2' in topo_name"

everflow/test_everflow_testbed.py::TestEverflowV4EgressAclEgressMirror::test_everflow_basic_forwarding[erspan_ipv6-cli-upstream-default]:
  xfail:
    reason: "xfail for IPv6-only topologies, need support for IPv6 bgp. Or test case has issue on the t0-isolated-d256u256s2 topo."
    conditions_logical_operator: or
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19922 and '-v6-' in topo_name"
      - "'t0-isolated-d256u256s2' in topo_name"

everflow/test_everflow_testbed.py::TestEverflowV4EgressAclEgressMirror::test_everflow_dscp_with_policer:
  skip:
    reason: "Skipping test since mirror with policer is not supported on Cisco 8000 platforms and Broadcom DNX platforms."
    conditions_logical_operator: "OR"
    conditions:
      - "asic_subtype in ['broadcom-dnx']"
      - "asic_type in ['cisco-8000']"

everflow/test_everflow_testbed.py::TestEverflowV4EgressAclEgressMirror::test_everflow_dscp_with_policer[erspan_ipv4-cli-downstream-default]:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

everflow/test_everflow_testbed.py::TestEverflowV4EgressAclEgressMirror::test_everflow_dscp_with_policer[erspan_ipv4-cli-upstream-default]:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

everflow/test_everflow_testbed.py::TestEverflowV4EgressAclEgressMirror::test_everflow_dscp_with_policer[erspan_ipv6-cli-downstream-default]:
  xfail:
    reason: "xfail for IPv6-only topologies, need support for IPv6 bgp"
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19922 and '-v6-' in topo_name"

everflow/test_everflow_testbed.py::TestEverflowV4EgressAclEgressMirror::test_everflow_dscp_with_policer[erspan_ipv6-cli-upstream-default]:
  xfail:
    reason: "xfail for IPv6-only topologies, need support for IPv6 bgp"
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19922 and '-v6-' in topo_name"

everflow/test_everflow_testbed.py::TestEverflowV4EgressAclEgressMirror::test_everflow_frwd_with_bkg_trf:
  skip:
    reason: "Test is not ready for dualtor and not stable on Non-T2 platform"
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/17034 and 't2' not in topo_name"

everflow/test_everflow_testbed.py::TestEverflowV4EgressAclEgressMirror::test_everflow_fwd_recircle_port_queue_check:
    skip:
      reason: "Test not supported on non broadcom-dnx and non voq platforms"
      conditions_logical_operator: "OR"
      conditions:
        - "(asic_subtype not in ['broadcom-dnx'])"
        - "('voq' not in switch_type)"

everflow/test_everflow_testbed.py::TestEverflowV4EgressAclEgressMirror::test_everflow_neighbor_mac_change[erspan_ipv4-cli-downstream-default]:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"

everflow/test_everflow_testbed.py::TestEverflowV4EgressAclEgressMirror::test_everflow_neighbor_mac_change[erspan_ipv4-cli-upstream-default]:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

everflow/test_everflow_testbed.py::TestEverflowV4EgressAclEgressMirror::test_everflow_neighbor_mac_change[erspan_ipv6-cli-downstream-default]:
  xfail:
    reason: "xfail for IPv6-only topologies, need support for IPv6 bgp. Or test case has issue on the t0-isolated-d256u256s2 topo."
    conditions_logical_operator: or
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19922 and '-v6-' in topo_name"
      - "'t0-isolated-d256u256s2' in topo_name"

everflow/test_everflow_testbed.py::TestEverflowV4EgressAclEgressMirror::test_everflow_neighbor_mac_change[erspan_ipv6-cli-upstream-default]:
  xfail:
    reason: "xfail for IPv6-only topologies, need support for IPv6 bgp. Or test case has issue on the t0-isolated-d256u256s2 topo."
    conditions_logical_operator: or
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19922 and '-v6-' in topo_name"
      - "'t0-isolated-d256u256s2' in topo_name"

everflow/test_everflow_testbed.py::TestEverflowV4EgressAclEgressMirror::test_everflow_remove_unused_ecmp_next_hop[erspan_ipv4-cli-downstream-default]:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"

everflow/test_everflow_testbed.py::TestEverflowV4EgressAclEgressMirror::test_everflow_remove_unused_ecmp_next_hop[erspan_ipv4-cli-upstream-default]:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

everflow/test_everflow_testbed.py::TestEverflowV4EgressAclEgressMirror::test_everflow_remove_unused_ecmp_next_hop[erspan_ipv6-cli-downstream-default]:
  xfail:
    reason: "xfail for IPv6-only topologies, need support for IPv6 bgp. Or test case has issue on the t0-isolated-d256u256s2 topo."
    conditions_logical_operator: or
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19922 and '-v6-' in topo_name"
      - "'t0-isolated-d256u256s2' in topo_name"

everflow/test_everflow_testbed.py::TestEverflowV4EgressAclEgressMirror::test_everflow_remove_unused_ecmp_next_hop[erspan_ipv6-cli-upstream-default]:
  xfail:
    reason: "xfail for IPv6-only topologies, need support for IPv6 bgp. Or test case has issue on the t0-isolated-d256u256s2 topo."
    conditions_logical_operator: or
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19922 and '-v6-' in topo_name"
      - "'t0-isolated-d256u256s2' in topo_name"

everflow/test_everflow_testbed.py::TestEverflowV4EgressAclEgressMirror::test_everflow_remove_used_ecmp_next_hop[erspan_ipv4-cli-downstream-default]:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"

everflow/test_everflow_testbed.py::TestEverflowV4EgressAclEgressMirror::test_everflow_remove_used_ecmp_next_hop[erspan_ipv4-cli-upstream-default]:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

everflow/test_everflow_testbed.py::TestEverflowV4EgressAclEgressMirror::test_everflow_remove_used_ecmp_next_hop[erspan_ipv6-cli-downstream-default]:
  xfail:
    reason: "xfail for IPv6-only topologies, need support for IPv6 bgp. Or test case has issue on the t0-isolated-d256u256s2 topo."
    conditions_logical_operator: or
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19922 and '-v6-' in topo_name"
      - "'t0-isolated-d256u256s2' in topo_name"

everflow/test_everflow_testbed.py::TestEverflowV4EgressAclEgressMirror::test_everflow_remove_used_ecmp_next_hop[erspan_ipv6-cli-upstream-default]:
  xfail:
    reason: "xfail for IPv6-only topologies, need support for IPv6 bgp. Or test case has issue on the t0-isolated-d256u256s2 topo."
    conditions_logical_operator: or
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19922 and '-v6-' in topo_name"
      - "'t0-isolated-d256u256s2' in topo_name"

everflow/test_everflow_testbed.py::TestEverflowV4EgressAclIngressMirror::test_everflow_fwd_recircle_port_queue_check:
  skip:
    reason: "Test not supported on non broadcom-dnx and non voq platforms"
    conditions_logical_operator: "OR"
    conditions:
      - "(asic_subtype not in ['broadcom-dnx'])"
      - "('voq' not in switch_type)"

everflow/test_everflow_testbed.py::TestEverflowV4IngressAclEgressMirror::test_everflow_fwd_recircle_port_queue_check:
  skip:
    reason: "Test not supported on non broadcom-dnx and non voq platforms"
    conditions_logical_operator: "OR"
    conditions:
      - "(asic_subtype not in ['broadcom-dnx'])"
      - "('voq' not in switch_type)"

everflow/test_everflow_testbed.py::TestEverflowV4IngressAclIngressMirror::test_everflow_basic_forwarding[erspan_ipv4-cli-downstream-default]:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"

everflow/test_everflow_testbed.py::TestEverflowV4IngressAclIngressMirror::test_everflow_basic_forwarding[erspan_ipv4-cli-upstream-default]:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"

everflow/test_everflow_testbed.py::TestEverflowV4IngressAclIngressMirror::test_everflow_basic_forwarding[erspan_ipv6-cli-downstream-default]:
  skip:
    reason: "SAI_STATUS_NOT_SUPPORTED for everflow over IPv6 on Arista-7260CX3 and Arista-7060CX"
    conditions_logical_operator: and
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19096"
      - "platform in ['x86_64-arista_7260cx3_64', 'x86_64-arista_7060_cx32s']"
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

everflow/test_everflow_testbed.py::TestEverflowV4IngressAclIngressMirror::test_everflow_basic_forwarding[erspan_ipv6-cli-upstream-default]:
  skip:
    reason: "SAI_STATUS_NOT_SUPPORTED for everflow over IPv6 on Arista-7260CX3 and Arista-7060CX"
    conditions_logical_operator: and
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19096"
      - "platform in ['x86_64-arista_7260cx3_64', 'x86_64-arista_7060_cx32s']"
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

everflow/test_everflow_testbed.py::TestEverflowV4IngressAclIngressMirror::test_everflow_dscp_with_policer:
  skip:
    reason: "Skipping test since mirror with policer is not supported on Cisco 8000 platforms and Broadcom DNX platforms."
    conditions_logical_operator: "OR"
    conditions:
      - "asic_type in ['cisco-8000']"
      - "asic_subtype in ['broadcom-dnx']"

everflow/test_everflow_testbed.py::TestEverflowV4IngressAclIngressMirror::test_everflow_dscp_with_policer[erspan_ipv4-cli-downstream-default]:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

everflow/test_everflow_testbed.py::TestEverflowV4IngressAclIngressMirror::test_everflow_dscp_with_policer[erspan_ipv4-cli-upstream-default]:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

everflow/test_everflow_testbed.py::TestEverflowV4IngressAclIngressMirror::test_everflow_frwd_with_bkg_trf:
  skip:
    reason: "Test is not ready for dualtor and not stable on Non-T2 platform."
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/17034 and 't2' not in topo_name"

everflow/test_everflow_testbed.py::TestEverflowV4IngressAclIngressMirror::test_everflow_fwd_recircle_port_queue_check:
  skip:
    reason: "Test not supported on non broadcom-dnx and non voq platforms"
    conditions_logical_operator: "OR"
    conditions:
      - "(asic_subtype not in ['broadcom-dnx'])"
      - "('voq' not in switch_type)"

everflow/test_everflow_testbed.py::TestEverflowV4IngressAclIngressMirror::test_everflow_neighbor_mac_change[erspan_ipv4-cli-downstream-default]:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"

everflow/test_everflow_testbed.py::TestEverflowV4IngressAclIngressMirror::test_everflow_neighbor_mac_change[erspan_ipv4-cli-upstream-default]:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"

everflow/test_everflow_testbed.py::TestEverflowV4IngressAclIngressMirror::test_everflow_neighbor_mac_change[erspan_ipv6-cli-downstream-default]:
  skip:
    reason: "SAI_STATUS_NOT_SUPPORTED for everflow over IPv6 on Arista-7260CX3 and Arista-7060CX"
    conditions_logical_operator: and
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19096"
      - "platform in ['x86_64-arista_7260cx3_64', 'x86_64-arista_7060_cx32s']"
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

everflow/test_everflow_testbed.py::TestEverflowV4IngressAclIngressMirror::test_everflow_neighbor_mac_change[erspan_ipv6-cli-upstream-default]:
  skip:
    reason: "SAI_STATUS_NOT_SUPPORTED for everflow over IPv6 on Arista-7260CX3 and Arista-7060CX"
    conditions_logical_operator: and
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19096"
      - "platform in ['x86_64-arista_7260cx3_64', 'x86_64-arista_7060_cx32s']"
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

everflow/test_everflow_testbed.py::TestEverflowV4IngressAclIngressMirror::test_everflow_remove_unused_ecmp_next_hop[erspan_ipv4-cli-downstream-default]:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"

everflow/test_everflow_testbed.py::TestEverflowV4IngressAclIngressMirror::test_everflow_remove_unused_ecmp_next_hop[erspan_ipv4-cli-upstream-default]:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"

everflow/test_everflow_testbed.py::TestEverflowV4IngressAclIngressMirror::test_everflow_remove_unused_ecmp_next_hop[erspan_ipv6-cli-downstream-default]:
  skip:
    reason: "SAI_STATUS_NOT_SUPPORTED for everflow over IPv6 on Arista-7260CX3 and Arista-7060CX"
    conditions_logical_operator: and
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19096"
      - "platform in ['x86_64-arista_7260cx3_64', 'x86_64-arista_7060_cx32s']"
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

everflow/test_everflow_testbed.py::TestEverflowV4IngressAclIngressMirror::test_everflow_remove_unused_ecmp_next_hop[erspan_ipv6-cli-upstream-default]:
  skip:
    reason: "SAI_STATUS_NOT_SUPPORTED for everflow over IPv6 on Arista-7260CX3 and Arista-7060CX"
    conditions_logical_operator: and
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19096"
      - "platform in ['x86_64-arista_7260cx3_64', 'x86_64-arista_7060_cx32s']"
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

everflow/test_everflow_testbed.py::TestEverflowV4IngressAclIngressMirror::test_everflow_remove_used_ecmp_next_hop[erspan_ipv4-cli-downstream-default]:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"

everflow/test_everflow_testbed.py::TestEverflowV4IngressAclIngressMirror::test_everflow_remove_used_ecmp_next_hop[erspan_ipv4-cli-upstream-default]:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"

everflow/test_everflow_testbed.py::TestEverflowV4IngressAclIngressMirror::test_everflow_remove_used_ecmp_next_hop[erspan_ipv6-cli-downstream-default]:
  skip:
    reason: "SAI_STATUS_NOT_SUPPORTED for everflow over IPv6 on Arista-7260CX3 and Arista-7060CX"
    conditions_logical_operator: and
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19096"
      - "platform in ['x86_64-arista_7260cx3_64', 'x86_64-arista_7060_cx32s']"
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

everflow/test_everflow_testbed.py::TestEverflowV4IngressAclIngressMirror::test_everflow_remove_used_ecmp_next_hop[erspan_ipv6-cli-upstream-default]:
  skip:
    reason: "SAI_STATUS_NOT_SUPPORTED for everflow over IPv6 on Arista-7260CX3 and Arista-7060CX"
    conditions_logical_operator: and
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19096"
      - "platform in ['x86_64-arista_7260cx3_64', 'x86_64-arista_7060_cx32s']"
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

#######################################
#####            fdb              #####
#######################################
fdb/test_fdb_mac_expire.py:
  skip:
    reason: "Not supported on this DUT topology."
    conditions:
      - "topo_type not in ['t0', 'm0', 'mx']"

fdb/test_fdb_mac_learning.py::TestFdbMacLearning::testFdbMacLearning:
  skip:
    reason: "Skip at dualtor-aa topology due to github issue https://github.com/sonic-net/sonic-mgmt/issues/16110"
    conditions:
      - "'dualtor-aa' in topo_name and https://github.com/sonic-net/sonic-mgmt/issues/16110"

#######################################
#####            fib              #####
#######################################
fib/test_fib.py:
  skip:
    reason: 'Skip on t1-isolated-d32/128 topos'
    conditions:
      - "topo_name in ['t1-isolated-d128', 't1-isolated-d32']"
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

fib/test_fib.py::test_basic_fib[True-True-1514]:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

fib/test_fib.py::test_hash[ipv4]:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

fib/test_fib.py::test_hash[ipv6]:
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

fib/test_fib.py::test_ipinip_hash:
  skip:
    reason: 'ipinip hash test is not fully supported on mellanox platform (case#00581265). Skip on t1-isolated-d32/128 topos'
    conditions_logical_operator: or
    conditions:
      - "asic_type in ['mellanox']"
      - "topo_name in ['t1-isolated-d128', 't1-isolated-d32']"

fib/test_fib.py::test_ipinip_hash[ipv4:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"

fib/test_fib.py::test_ipinip_hash_negative[ipv4:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"

fib/test_fib.py::test_nvgre_hash:
  skip:
    reason: 'Nvgre hash test is not fully supported on VS and Broadcom platform; Not supported on M*. Skip on t1-isolated-d32/128 topos'
    conditions_logical_operator: or
    conditions:
      - "asic_type in ['vs', 'broadcom'] or topo_type in ['m0', 'mx', 'm1']"
      - "topo_name in ['t1-isolated-d128', 't1-isolated-d32']"
  xfail:
    reason: 'Nvgre hash test is not fully supported on SPC1 platform due to known limitation'
    conditions:
      - "asic_gen == 'spc1' and 't1-lag' in topo_name and https://github.com/sonic-net/sonic-mgmt/issues/17526"

fib/test_fib.py::test_nvgre_hash[ipv4-ipv4]:
  skip:
    reason: "Skip for IPv6-only topologies and Nvgre hash test is not fully supported on VS and Broadcom platform; Not supported on M*. Skip on t1-isolated-d32/128 topos"
    conditions_logical_operator: or
    conditions:
      - "'-v6-' in topo_name"
      - "asic_type in ['vs', 'broadcom'] or topo_type in ['m0', 'mx', 'm1']"
      - "topo_name in ['t1-isolated-d128', 't1-isolated-d32']"
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

fib/test_fib.py::test_nvgre_hash[ipv4-ipv6]:
  skip:
    reason: "Skip for IPv6-only topologies and Nvgre hash test is not fully supported on VS and Broadcom platform; Not supported on M*. Skip on t1-isolated-d32/128 topos"
    conditions_logical_operator: or
    conditions:
      - "'-v6-' in topo_name"
      - "asic_type in ['vs', 'broadcom'] or topo_type in ['m0', 'mx', 'm1']"
      - "topo_name in ['t1-isolated-d128', 't1-isolated-d32']"
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

fib/test_fib.py::test_nvgre_hash[ipv6-ipv4]:
  skip:
    reason: 'Skip for IPv6-only topologies and Nvgre hash test is not fully supported on VS and Broadcom platform; Not supported on M*. Skip on t1-isolated-d32/128 topo'
    conditions_logical_operator: or
    conditions:
      - "'-v6-' in topo_name"
      - "asic_type in ['vs', 'broadcom'] or topo_type in ['m0', 'mx', 'm1']"
      - "topo_name in ['t1-isolated-d128', 't1-isolated-d32']"
  xfail:
    reason: "Testcase ignored due to sonic-mgmt issue https://github.com/sonic-net/sonic-mgmt/issues/18304. Or test case has issue on the t0-isolated-d256u256s2 topo."
    conditions_logical_operator: or
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/18304 and 't0-isolated-d32u32s2' in topo_name and hwsku in ['Mellanox-SN5640-C512S2']"
      - "'t0-isolated-d256u256s2' in topo_name"

fib/test_fib.py::test_nvgre_hash[ipv6-ipv6]:
  skip:
    reason: 'Nvgre hash test is not fully supported on VS and Broadcom platform; Not supported on M*. Skip on t1-isolated-d32/128 topo'
    conditions_logical_operator: or
    conditions:
      - "asic_type in ['vs', 'broadcom'] or topo_type in ['m0', 'mx', 'm1']"
      - "topo_name in ['t1-isolated-d128', 't1-isolated-d32']"
  xfail:
    reason: "Testcase ignored due to sonic-mgmt issue (https://github.com/sonic-net/sonic-mgmt/issues/18304) or xfail for IPv6-only topologies, still have IPv4 function used. Or test case has issue on the t0-isolated-d256u256s2 topo."
    conditions_logical_operator: or
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/18304 and 't0-isolated-d32u32s2' in topo_name and hwsku in ['Mellanox-SN5640-C512S2']"
      - "https://github.com/sonic-net/sonic-mgmt/issues/19923 and '-v6-' in topo_name"
      - "'t0-isolated-d256u256s2' in topo_name"

fib/test_fib.py::test_vxlan_hash:
  skip:
    reason: 'Vxlan hash test is not fully supported on VS platform; Not supported on M*. Skip on t1-isolated-d32/128 topos'
    conditions_logical_operator: or
    conditions:
      - "asic_type in ['vs'] or topo_type in ['m0', 'mx', 'm1']"
      - "topo_name in ['t1-isolated-d128', 't1-isolated-d32']"

fib/test_fib.py::test_vxlan_hash[ipv4-ipv4]:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

fib/test_fib.py::test_vxlan_hash[ipv4-ipv6]:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

fib/test_fib.py::test_vxlan_hash[ipv6-ipv4]:
  skip:
    reason: 'Skip on t1-isolated-d32/128 toposor or Skip for IPv6-only topologies'
    conditions_logical_operator: or
    conditions:
      - "topo_name in ['t1-isolated-d128', 't1-isolated-d32']"
      - "'-v6-' in topo_name"
  xfail:
    reason: "Testcase ignored due to sonic-mgmt issue https://github.com/sonic-net/sonic-mgmt/issues/18304. Or test case has issue on the t0-isolated-d256u256s2 topo."
    conditions_logical_operator: or
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/18304 and 't0-isolated-d32u32s2' in topo_name and hwsku in ['Mellanox-SN5640-C512S2']"
      - "'t0-isolated-d256u256s2' in topo_name"

fib/test_fib.py::test_vxlan_hash[ipv6-ipv6]:
  skip:
    reason: 'Skip on t1-isolated-d32/128 topos'
    conditions:
      - "topo_name in ['t1-isolated-d128', 't1-isolated-d32']"
  xfail:
    reason: "Testcase ignored due to sonic-mgmt issue (https://github.com/sonic-net/sonic-mgmt/issues/18304) or xfail for IPv6-only topologies, still have IPv4 function used. Or test case has issue on the t0-isolated-d256u256s2 topo."
    conditions_logical_operator: or
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/18304 and 't0-isolated-d32u32s2' in topo_name and hwsku in ['Mellanox-SN5640-C512S2']"
      - "https://github.com/sonic-net/sonic-mgmt/issues/19923 and '-v6-' in topo_name"
      - "'t0-isolated-d256u256s2' in topo_name"

#######################################
#####   generic_config_updater    #####
#######################################
generic_config_updater:
  skip:
    reason: 'generic_config_updater is not a supported feature for T2 platform on older releases than 202405.'
    conditions:
      - "('t2' in topo_name) and (release in ['201811', '201911', '202012', '202205', '202211', '202305', '202311'])"

generic_config_updater/test_bgp_prefix.py::test_bgp_prefix_tc1_suite:
  skip:
    reason: "Cisco 8122 backend compute ai platform is not supported. Skip on VS platform due to low success rate."
    conditions_logical_operator: "OR"
    conditions:
      - "platform in ['x86_64-8122_64eh_o-r0', 'x86_64-8122_64ehf_o-r0']"
      - "asic_type in ['vs'] and https://github.com/sonic-net/sonic-mgmt/issues/18445"

generic_config_updater/test_bgp_speaker.py::test_bgp_speaker_tc1_test_config:
  xfail:
    reason: "xfail for IPv6-only topologies, still have IPv4 function used"
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19638 and '-v6-' in topo_name"

generic_config_updater/test_dhcp_relay.py:
  skip:
    reason: "Need to skip for Cisco backend platform/ generic_config_updater is not a supported feature for T2"
    conditions_logical_operator: "OR"
    conditions:
      - "platform in ['x86_64-8111_32eh_o-r0', 'x86_64-8122_64eh_o-r0', 'x86_64-8122_64ehf_o-r0']"
      - "'backend' in topo_name"
      - "'t2' in topo_name"
      - "'t0-isolated' in topo_name"

generic_config_updater/test_dynamic_acl.py:
  skip:
    reason: "Device SKUs do not support the custom ACL_TABLE_TYPE that we use in this test.  Known log error unrelated to test
     on m0-2vlan testbed causes consistent failures
     / Dynamic ACL is not supported in Cisco Q200 based platforms"
    conditions_logical_operator: "OR"
    conditions:
      - "platform in ['armhf-nokia_ixs7215_52x-r0']"
      - "hwsku in ['Cisco-8111-O64']"
      - "topo_name in ['m0-2vlan']"
      - "platform in ['x86_64-8101_32fh_o-r0', 'x86_64-8102_64h_o-r0', 'x86_64-8101_32fh_o_c01-r0']"

generic_config_updater/test_dynamic_acl.py::test_gcu_acl_arp_rule_creation[IPV4:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"

generic_config_updater/test_dynamic_acl.py::test_gcu_acl_dhcp_rule_creation:
  skip:
    reason: "DHCP is not enabled in isolated topo"
    conditions:
      - "'t0-isolated' in topo_name"

generic_config_updater/test_dynamic_acl.py::test_gcu_acl_forward_rule_removal:
  xfail:
    reason: "skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"

generic_config_updater/test_ecn_config_update.py::test_ecn_config_updates:
  skip:
    reason: "This test is not run on this asic type, topology, or version currently"
    conditions_logical_operator: "OR"
    conditions:
      - "hwsku in ['Cisco-8800-LC-48H-C48']"
      - "topo_type in ['m0', 'mx', 'm1']"
      - "release in ['202211']"

generic_config_updater/test_eth_interface.py::test_replace_fec:
  skip:
    reason: 'Skipping test on 7260/3800 platform due to bug of https://github.com/sonic-net/sonic-mgmt/issues/11237 or test is not supported on this platform'
    conditions_logical_operator: "OR"
    conditions:
      - "hwsku in ['Arista-7260CX3-D108C8', 'Arista-7260CX3-D108C10', 'Arista-7260CX3-Q64', 'Mellanox-SN3800-D112C8'] and https://github.com/sonic-net/sonic-mgmt/issues/11237"
      - "platform in ['x86_64-nokia_ixr7250e_36x400g-r0', 'x86_64-nokia_ixr7250_x3b-r0']"

generic_config_updater/test_eth_interface.py::test_replace_lanes:
  skip:
    reason: 'Skipping test due to bug of https://github.com/sonic-net/sonic-mgmt/issues/21130'
    conditions_logical_operator: "OR"
    conditions:
      - https://github.com/sonic-net/sonic-mgmt/issues/21130

generic_config_updater/test_eth_interface.py::test_toggle_pfc_asym:
  skip:
    reason: "Skip asym pfc on unsupported platforms"
    conditions_logical_operator: "OR"
    conditions:
      - "asic_type in ['cisco-8000']"
      - "hwsku in ['Mellanox-SN5600-C256S1', 'Mellanox-SN5600-C224O8', 'Mellanox-SN5640-C512S2',
                           'Mellanox-SN5640-C448O16']"

generic_config_updater/test_eth_interface.py::test_update_speed:
  skip:
    reason: 'Skip this script due to this not being a production scenario and misleading StateDB output for valid speed'
    conditions_logical_operator: "OR"
    conditions:
      - https://github.com/sonic-net/sonic-mgmt/issues/8143
      - https://github.com/sonic-net/sonic-buildimage/issues/13267

generic_config_updater/test_incremental_qos.py:
  skip:
    reason: "Does not support dualtor right now, due to issue https://github.com/sonic-net/sonic-mgmt/issues/14865"
    conditions_logical_operator: "OR"
    conditions:
      - "'dualtor' in topo_name"

generic_config_updater/test_incremental_qos.py::test_incremental_qos_config_updates:
  skip:
    reason: "This test is not run on this hwsku/asic type or version or topology currently"
    conditions_logical_operator: "OR"
    conditions:
      - "not any(i in hwsku for i in ['2700', 'Arista-7170-64C', 'montara', 'newport']) and asic_type in ['broadcom', 'cisco-8000'] and release in ['202211']"

generic_config_updater/test_ip_bgp.py::test_ip_suite[4]:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"

generic_config_updater/test_ip_bgp.py::test_ip_suite[None-4]:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"

generic_config_updater/test_mmu_dynamic_threshold_config_update.py::test_dynamic_th_config_updates:
  skip:
    reason: "This test is not run on this asic type or version or topology currently"
    conditions_logical_operator: "OR"
    conditions:
      - "asic_type in ['broadcom', 'cisco-8000'] and release in ['202211']"

generic_config_updater/test_monitor_config.py::test_monitor_config_tc1_suite:
  skip:
    reason: "This test is not run on this asic type or version currently / ERSPAN meter is not supported for Cisco Platform"
    conditions:
      - "asic_type in ['cisco-8000']"

generic_config_updater/test_multiasic_addcluster.py:
  skip:
    reason: "Only supported on multi-asic system."
    conditions:
      - "(is_multi_asic is False)"
      - "hwsku not in ['Nokia-IXR7250E-36x400G']"

generic_config_updater/test_multiasic_idf.py:
  skip:
    reason: "Only supported on multi-asic system."
    conditions:
      - "(is_multi_asic is False)"

generic_config_updater/test_multiasic_linkcrc.py:
  skip:
    reason: "Only supported on multi-asic system."
    conditions:
      - "(is_multi_asic is False)"

generic_config_updater/test_packet_trimming_config_asymmetric.py:
    skip:
        reason: "Packet trim is not supported in 202505 image"
        conditions:
        - "release in ['202505']"

generic_config_updater/test_packet_trimming_config_symmetric:
  skip:
    reason: "Packet trim is not supported in 202505 image"
    conditions:
      - "release in ['202505']"

generic_config_updater/test_pfcwd_interval.py:
  skip:
    reason: "This test can only support mellanox platforms. This test is not run on this hwsku currently"
    conditions_logical_operator: or
    conditions:
      - "asic_type not in ['mellanox', 'cisco-8000']"
      - hwsku in ['Mellanox-SN5600-C224O8', 'Mellanox-SN5600-C256S1', 'Mellanox-SN5640-C448O16', 'Mellanox-SN5640-C512S2',
                   'Arista-7060X6-64PE-C256S2', 'Arista-7060X6-64PE-C224O8', 'Arista-7060X6-64PE-B-C512S2', 'Arista-7060X6-64PE-B-C448O16']

generic_config_updater/test_pfcwd_status.py:
  skip:
    reason: "This test is not run on this topo type or version or topology or hwsku currently"
    conditions_logical_operator: or
    conditions:
      - "topo_type in ['m0', 'mx', 'm1']"
      - *lossyTopos
      - "release in ['202211']"
      - hwsku in ['Mellanox-SN5600-C224O8', 'Mellanox-SN5600-C256S1', 'Mellanox-SN5640-C448O16', 'Mellanox-SN5640-C512S2',
                   'Arista-7060X6-64PE-C256S2', 'Arista-7060X6-64PE-C224O8', 'Arista-7060X6-64PE-B-C512S2', 'Arista-7060X6-64PE-B-C448O16']

generic_config_updater/test_pg_headroom_update.py:
  skip:
    reason: "Unsupported topology."
    conditions_logical_operator: "OR"
    conditions:
      - "topo_type in ['m0', 'mx', 'm1']"

generic_config_updater/test_srv6:
  skip:
    reason: "Unsupported topology."
    conditions_logical_operator: "OR"
    conditions:
      - "topo_name in ['t0-isolated-d96u32s2']"

generic_config_updater/test_vlan_interface.py::test_vlan_interface_tc1_suite:
  xfail:
    reason: "xfail for IPv6-only topologies, need to add support for IPv6-only - https://github.com/sonic-net/sonic-mgmt/issues/20727"
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/20727 and '-v6-' in topo_name"

generic_config_updater/test_vlan_interface.py::test_vlan_interface_tc2_incremental_change:
  xfail:
    reason: "xfail for IPv6-only topologies, need to add support for IPv6-only - https://github.com/sonic-net/sonic-mgmt/issues/20727"
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/20727 and '-v6-' in topo_name"

#######################################
#####           gnmi              #####
#######################################
gnmi:
  skip:
    reason: Skip all gnmi tests on 202412 vs testbed, since it won't impact gnmi show command
    conditions:
      - "release in ['202412']"

gnmi/test_gnmi.py:
  skip:
    reason: "dut ipv6 mgmt ip not supported"
    conditions:
      - "is_mgmt_ipv6_only==True"
      - "https://github.com/sonic-net/sonic-mgmt/issues/20395"

gnmi/test_gnmi_appldb.py::test_gnmi_appldb_01:
  skip:
    reason: "dut ipv6 mgmt ip not supported"
    conditions:
      - "is_mgmt_ipv6_only==True"
      - "https://github.com/sonic-net/sonic-mgmt/issues/20395"

gnmi/test_gnmi_configdb.py:
  skip:
    reason: "This feature is not supported for multi asic. Skipping these test for T2 and multi asic."
    conditions_logical_operator: or
    conditions:
      - "topo_type in ['t2']"
      - "is_multi_asic==True"
      - "release in ['202412']"

gnmi/test_gnmi_configdb.py::test_gnmi_configdb_full_01:
  skip:
    reason: "The test refers to a stale implementation of GNOI.System.Reboot."
    conditions_logical_operator: or
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/17436"
      - "release in ['202412']"

gnmi/test_gnmi_configdb.py::test_gnmi_configdb_full_replace_01:
  skip:
    reason: "dut ipv6 mgmt ip not supported"
    conditions:
      - "is_mgmt_ipv6_only==True"
      - "https://github.com/sonic-net/sonic-mgmt/issues/20395"

gnmi/test_gnmi_configdb.py::test_gnmi_configdb_get_authenticate:
  skip:
    reason: "dut ipv6 mgmt ip not supported"
    conditions:
      - "is_mgmt_ipv6_only==True"
      - "https://github.com/sonic-net/sonic-mgmt/issues/20395"

gnmi/test_gnmi_configdb.py::test_gnmi_configdb_incremental_01:
  skip:
    reason: "dut ipv6 mgmt ip not supported"
    conditions:
      - "is_mgmt_ipv6_only==True"
      - "https://github.com/sonic-net/sonic-mgmt/issues/20395"

gnmi/test_gnmi_configdb.py::test_gnmi_configdb_incremental_02:
  skip:
    reason: "dut ipv6 mgmt ip not supported"
    conditions:
      - "is_mgmt_ipv6_only==True"
      - "https://github.com/sonic-net/sonic-mgmt/issues/20395"

gnmi/test_gnmi_configdb.py::test_gnmi_configdb_streaming_onchange_01:
  skip:
    reason: "dut ipv6 mgmt ip not supported"
    conditions:
      - "is_mgmt_ipv6_only==True"
      - "https://github.com/sonic-net/sonic-mgmt/issues/20395"

gnmi/test_gnmi_configdb.py::test_gnmi_configdb_streaming_onchange_02:
  skip:
    reason: "dut ipv6 mgmt ip not supported"
    conditions:
      - "is_mgmt_ipv6_only==True"
      - "https://github.com/sonic-net/sonic-mgmt/issues/20395"

gnmi/test_gnmi_configdb.py::test_gnmi_configdb_streaming_sample_01:
  skip:
    reason: "dut ipv6 mgmt ip not supported"
    conditions:
      - "is_mgmt_ipv6_only==True"
      - "https://github.com/sonic-net/sonic-mgmt/issues/20395"

gnmi/test_gnmi_configdb.py::test_gnmi_configdb_subscribe_authenticate:
  skip:
    reason: "dut ipv6 mgmt ip not supported"
    conditions:
      - "is_mgmt_ipv6_only==True"
      - "https://github.com/sonic-net/sonic-mgmt/issues/20395"

gnmi/test_gnmi_countersdb.py::test_gnmi_counterdb_streaming_sample_01:
  skip:
    reason: "dut ipv6 mgmt ip not supported"
    conditions:
      - "is_mgmt_ipv6_only==True"
      - "https://github.com/sonic-net/sonic-mgmt/issues/20395"

gnmi/test_gnmi_countersdb.py::test_gnmi_counterdb_streaming_sample_02:
  skip:
    reason: "dut ipv6 mgmt ip not supported"
    conditions:
      - "is_mgmt_ipv6_only==True"
      - "https://github.com/sonic-net/sonic-mgmt/issues/20395"

gnmi/test_gnmi_countersdb.py::test_gnmi_output:
  skip:
    reason: "dut ipv6 mgmt ip not supported"
    conditions:
      - "is_mgmt_ipv6_only==True"
      - "https://github.com/sonic-net/sonic-mgmt/issues/20395"

gnmi/test_gnmi_countersdb.py::test_gnmi_queue_buffer_cnt:
  skip:
    reason: "dut ipv6 mgmt ip not supported"
    conditions:
      - "is_mgmt_ipv6_only==True"
      - "https://github.com/sonic-net/sonic-mgmt/issues/20395"

gnmi/test_gnoi_killprocess.py:
  skip:
    reason: "Test noisy due to restart issue not relevant to GNOI. Disabling them to rewrite."

gnmi/test_gnoi_system_reboot.py::test_gnoi_system_reboot_halt:
  skip:
    reason: "Halt reboot should not be running on non-smartswitch"
    conditions:
      - "is_smartswitch == False"

gnmi/test_gnoi_system_reboot.py::test_gnoi_system_reboot_warm:
  skip:
    reason: "Warm reboot should only run on t0 topology but not on dualtor"
    conditions_logical_operator: or
    conditions:
      - "topo_type not in ['t0']"
      - "topo_name in ['dualtor', 'dualtor-56', 'dualtor-120', 'dualtor-aa', 'dualtor-aa-56', 'dualtor-aa-64-breakout']"
      - "release in ['202412']"

#######################################
#####           hash              #####
#######################################
hash/test_generic_hash.py:
  skip:
    reason: "Testcase ignored due to GitHub issue https://github.com/sonic-net/sonic-mgmt/issues/15340 on dualtor aa setup
             Or Skip for IPv6-only topologies"
    conditions_logical_operator: or
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/15340 and 'dualtor-aa' in topo_name"
      - "'-v6-' in topo_name"
  xfail:
    reason: "This case is not supported on many platforms and often encounters issues. We can still run it, but we wont rely on or validate the results. Or test case has issue on the t0-isolated-d256u256s2 topo."
    conditions_logical_operator: or
    conditions:
      - "topo_type in ['t0', 't1']"
      - "'t0-isolated-d256u256s2' in topo_name"

hash/test_generic_hash.py::test_algorithm_config:
  xfail:
    reason: "This is a new test cases and doesn't work for platform other than Mellanox, xfail them before the issue is addressed"
    conditions:
      - "asic_type not in ['mellanox']"
      - https://github.com/sonic-net/sonic-mgmt/issues/14109

hash/test_generic_hash.py::test_backend_error_messages:
  xfail:
    reason: "This is a new test cases and doesn't work for platform other than Mellanox, xfail them before the issue is addressed"
    conditions:
      - "asic_type not in ['mellanox']"
      - https://github.com/sonic-net/sonic-mgmt/issues/14109

hash/test_generic_hash.py::test_ecmp_and_lag_hash:
  skip:
    reason: 'On Mellanox SPC1 platforms, due to HW limitation, it would not support CRC_CCITT algorithm. For broadcom, ECMP/LAG hash not supported in broadcom SAI and Cisco 8000'
    conditions_logical_operator: or
    conditions:
      - "asic_gen == 'spc1'"
      - "asic_type in ['broadcom', 'cisco-8000']"

hash/test_generic_hash.py::test_ecmp_and_lag_hash[CRC-INNER_IP_PROTOCOL:
  skip:
    reason: "On Mellanox platforms, due to HW limitation, it would not support CRC algorithm on INNER_IP_PROTOCOL field. For broadcom, ECMP/LAG hash not supported in broadcom SAI"
    conditions:
    - "asic_type in ['broadcom', 'mellanox']"
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

hash/test_generic_hash.py::test_ecmp_and_lag_hash[CRC_CCITT-INNER_IP_PROTOCOL:
  skip:
    reason: "On Mellanox platforms, due to HW limitation, it would not support CRC algorithm on INNER_IP_PROTOCOL field. For broadcom, ECMP/LAG hash not supported in broadcom SAI"
    conditions:
    - "asic_type in ['broadcom', 'mellanox']"
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

hash/test_generic_hash.py::test_ecmp_and_lag_hash[CRC_CCITT-IN_PORT:
  skip:
    reason: "On Mellanox platforms, due to HW limitation, when ecmp and lag hash at the same time, it would not support setting ecmp hash as CRC_CCITT and lag hash as CRC on ingress port hash field. For broadcom, ECMP/LAG hash not supported in broadcom SAI"
    conditions:
    - "asic_type in ['broadcom', 'mellanox']"

hash/test_generic_hash.py::test_ecmp_hash:
  skip:
    reason: 'ECMP hash not supported in broadcom SAI and Cisco 8000'
    conditions:
      - "asic_type in ['broadcom', 'cisco-8000']"
  xfail:
    reason: 'ECMP hash skipped due to issue https://github.com/sonic-net/sonic-mgmt/issues/18304 Or xfail for IPv6-only topologies, need to add support for IPv6-only - https://github.com/sonic-net/sonic-mgmt/issues/20733'
    conditions_logical_operator: or
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/18304 and 't0-isolated-d32u32s2' in topo_name and hwsku in ['Mellanox-SN5640-C512S2']"
      - "https://github.com/sonic-net/sonic-mgmt/issues/20733 and '-v6-' in topo_name"

hash/test_generic_hash.py::test_ecmp_hash[CRC-INNER_DST_MAC-ipv4-ipv4-vxlan]:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"

hash/test_generic_hash.py::test_ecmp_hash[CRC-INNER_IP_PROTOCOL:
  skip:
    reason: "On Mellanox platforms, due to HW limitation, it would not support CRC algorithm on INNER_IP_PROTOCOL field. For broadcom, ECMP hash is not supported in broadcom SAI."
    conditions:
    - "asic_type in ['broadcom', 'mellanox']"

hash/test_generic_hash.py::test_hash_capability:
  xfail:
    reason: "This is a new test cases and doesn't work for platform other than Mellanox, xfail them before the issue is addressed"
    conditions:
      - "asic_type not in ['mellanox']"
      - https://github.com/sonic-net/sonic-mgmt/issues/14109

hash/test_generic_hash.py::test_lag_hash:
  skip:
    reason: 'LAG hash not supported in broadcom SAI and Cisco 8000'
    conditions:
      - "asic_type in ['broadcom', 'cisco-8000']"
  xfail:
    reason: 'xfail for IPv6-only topologies, need to add support for IPv6-only - https://github.com/sonic-net/sonic-mgmt/issues/20733'
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/20733 and '-v6-' in topo_name"

hash/test_generic_hash.py::test_lag_hash[CRC-DST_MAC:
  xfail:
    reason: "Testcase ignored due to RM issue: https://github.com/sonic-net/sonic-buildimage/issues/22586"
    conditions:
    - "https://github.com/sonic-net/sonic-buildimage/issues/22586 and asic_type in ['mellanox', 'nvidia']"

hash/test_generic_hash.py::test_lag_hash[CRC-ETHERTYPE:
  xfail:
    reason: "Testcase ignored due to RM issue: https://github.com/sonic-net/sonic-buildimage/issues/22586"
    conditions:
    - "https://github.com/sonic-net/sonic-buildimage/issues/22586 and asic_type in ['mellanox', 'nvidia']"

hash/test_generic_hash.py::test_lag_hash[CRC-INNER_IP_PROTOCOL:
  skip:
    reason: "On Mellanox platforms, due to HW limitation, it would not support CRC algorithm on INNER_IP_PROTOCOL field. For broadcom, LAG hash is not supported in broadcom SAI."
    conditions:
    - "asic_type in ['broadcom', 'mellanox']"

hash/test_generic_hash.py::test_lag_hash[CRC-VLAN_ID:
  xfail:
    reason: "Testcase ignored due to RM issue: https://github.com/sonic-net/sonic-buildimage/issues/22586"
    conditions:
    - "https://github.com/sonic-net/sonic-buildimage/issues/22586 and asic_type in ['mellanox', 'nvidia']"

hash/test_generic_hash.py::test_lag_hash[CRC_CCITT-DST_MAC:
  xfail:
    reason: "Testcase ignored due to RM issue: https://github.com/sonic-net/sonic-buildimage/issues/22586"
    conditions:
    - "https://github.com/sonic-net/sonic-buildimage/issues/22586 and asic_type in ['mellanox', 'nvidia']"

hash/test_generic_hash.py::test_lag_hash[CRC_CCITT-ETHERTYPE:
  xfail:
    reason: "Testcase ignored due to RM issue: https://github.com/sonic-net/sonic-buildimage/issues/22586"
    conditions:
    - "https://github.com/sonic-net/sonic-buildimage/issues/22586 and asic_type in ['mellanox', 'nvidia']"

hash/test_generic_hash.py::test_lag_hash[CRC_CCITT-VLAN_ID:
  xfail:
    reason: "Testcase ignored due to RM issue: https://github.com/sonic-net/sonic-buildimage/issues/22586"
    conditions:
    - "https://github.com/sonic-net/sonic-buildimage/issues/22586 and asic_type in ['mellanox', 'nvidia']"

hash/test_generic_hash.py::test_lag_member_flap:
  skip:
    reason: 'On Mellanox SPC1 platforms, due to HW limitation, it would not support CRC_CCITT algorithm. For broadcom, LAG hash not supported in broadcom SAI. For other platforms, skipping due to missing object in SonicHost'
    conditions_logical_operator: "OR"
    conditions:
      - "asic_gen == 'spc1'"
      - "asic_type in ['broadcom']"
      - https://github.com/sonic-net/sonic-mgmt/issues/13919
  xfail:
    reason: 'xfail for IPv6-only topologies, need to add support for IPv6-only - https://github.com/sonic-net/sonic-mgmt/issues/20733'
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/20733 and '-v6-' in topo_name"

hash/test_generic_hash.py::test_lag_member_flap[CRC-INNER_IP_PROTOCOL:
  skip:
    reason: "On Mellanox platforms, due to HW limitation, it would not support CRC algorithm on INNER_IP_PROTOCOL field.  For broadcom, LAG hash not supported in broadcom SAI."
    conditions:
    - "asic_type in ['broadcom', 'mellanox']"

hash/test_generic_hash.py::test_lag_member_flap[CRC-IN_PORT-ipv4-None-None]:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"

hash/test_generic_hash.py::test_lag_member_flap[CRC-IP_PROTOCOL-ipv4:
  skip:
    reason: "With IP Protocol alone, we don't have enough entropy to distribute the packets evenly"
    conditions:
      - "asic_type in ['cisco-8000']"

hash/test_generic_hash.py::test_lag_member_flap[CRC_CCITT-INNER_IP_PROTOCOL:
  skip:
    reason: "On Mellanox platforms, due to HW limitation, it would not support CRC algorithm on INNER_IP_PROTOCOL field.  For broadcom, LAG hash not supported in broadcom SAI."
    conditions:
    - "asic_type in ['broadcom', 'mellanox']"

hash/test_generic_hash.py::test_lag_member_flap[CRC_CCITT-IN_PORT:
  skip:
    reason: "On Mellanox platforms, due to HW limitation, when ecmp and lag hash at the same time, it would not support
     setting ecmp hash as CRC_CCITT and lag hash as CRC on ingress port hash field.  For broadcom, LAG hash not supported in broadcom SAI."
    conditions:
    - "asic_type in ['broadcom', 'mellanox']"

hash/test_generic_hash.py::test_lag_member_flap[CRC_CCITT-IP_PROTOCOL-ipv4:
  skip:
    reason: "With IP Protocol alone, we don't have enough entropy to distribute the packets evenly"
    conditions:
      - "asic_type in ['cisco-8000']"

hash/test_generic_hash.py::test_lag_member_remove_add:
  skip:
    reason: 'On Mellanox SPC1 platforms, due to HW limitation, it would not support CRC_CCITT algorithm. For broadcom, LAG hash not supported in broadcom SAI. For other platforms, skipping due to missing object in SonicHost'
    conditions_logical_operator: "OR"
    conditions:
      - "asic_gen == 'spc1'"
      - "asic_type in ['broadcom']"
      - https://github.com/sonic-net/sonic-mgmt/issues/13919
  xfail:
    reason: 'xfail for IPv6-only topologies, need to add support for IPv6-only - https://github.com/sonic-net/sonic-mgmt/issues/20733'
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/20733 and '-v6-' in topo_name"

hash/test_generic_hash.py::test_lag_member_remove_add[CRC-INNER_IP_PROTOCOL:
  skip:
    reason: "On Mellanox platforms, due to HW limitation, it would not support CRC algorithm on INNER_IP_PROTOCOL field. For broadcom, LAG hash not supported in broadcom SAI."
    conditions:
    - "asic_type in ['broadcom', 'mellanox']"

hash/test_generic_hash.py::test_lag_member_remove_add[CRC-IP_PROTOCOL-ipv4:
  skip:
    reason: "With IP Protocol alone, we don't have enough entropy to distribute the packets evenly"
    conditions:
      - "asic_type in ['cisco-8000']"

hash/test_generic_hash.py::test_lag_member_remove_add[CRC_CCITT-INNER_IP_PROTOCOL:
  skip:
    reason: "On Mellanox platforms, due to HW limitation, it would not support CRC algorithm on INNER_IP_PROTOCOL field. For broadcom, LAG hash not supported in broadcom SAI."
    conditions:
    - "asic_type in ['broadcom', 'mellanox']"

hash/test_generic_hash.py::test_lag_member_remove_add[CRC_CCITT-INNER_SRC_MAC-ipv4-ipv4-nvgre]:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"

hash/test_generic_hash.py::test_lag_member_remove_add[CRC_CCITT-IN_PORT:
  skip:
    reason: "On Mellanox platforms, due to HW limitation, when ecmp and lag hash at the same time, it would not support
     setting ecmp hash as CRC_CCITT and lag hash as CRC on ingress port hash field. For broadcom, LAG hash not supported in broadcom SAI."
    conditions:
    - "asic_type in ['broadcom', 'mellanox']"

hash/test_generic_hash.py::test_lag_member_remove_add[CRC_CCITT-IP_PROTOCOL-ipv4:
  skip:
    reason: "With IP Protocol alone, we don't have enough entropy to distribute the packets evenly"
    conditions:
      - "asic_type in ['cisco-8000']"

hash/test_generic_hash.py::test_nexthop_flap:
  skip:
    reason: 'On Mellanox SPC1 platforms, due to HW limitation, it would not support CRC_CCITT algorithm. For broadcom, ECMP/LAG hash not supported in broadcom SAI. For other platforms, skipping due to missing object in SonicHost'
    conditions_logical_operator: "OR"
    conditions:
      - "asic_gen == 'spc1'"
      - "asic_type in ['broadcom']"
      - https://github.com/sonic-net/sonic-mgmt/issues/13919
  xfail:
    reason: "Flaky hashing behavior using specific combination of hash field and algorithm."
    conditions:
      - "'isolated' in topo_name"

hash/test_generic_hash.py::test_nexthop_flap[CRC-INNER_IP_PROTOCOL:
  skip:
    reason: "On Mellanox platforms, due to HW limitation, it would not support CRC algorithm on INNER_IP_PROTOCOL field. For broadcom, ECMP/LAG hash not supported in broadcom SAI. "
    conditions:
    - "asic_type in ['broadcom', 'mellanox']"

hash/test_generic_hash.py::test_nexthop_flap[CRC-IP_PROTOCOL-ipv4-None-None]:
  skip:
    reason: "With IP Protocol alone, Cisco-8000 don't have enough entropy to distribute the packets evenly"
    conditions:
    - "asic_type in ['cisco-8000']"

hash/test_generic_hash.py::test_nexthop_flap[CRC_CCITT-INNER_IP_PROTOCOL:
  skip:
    reason: "On Mellanox platforms, due to HW limitation, it would not support CRC algorithm on INNER_IP_PROTOCOL field. For broadcom, ECMP/LAG hash not supported in broadcom SAI. "
    conditions:
    - "asic_type in ['broadcom', 'mellanox']"

hash/test_generic_hash.py::test_nexthop_flap[CRC_CCITT-IN_PORT:
  skip:
    reason: "On Mellanox platforms, due to HW limitation, when ecmp and lag hash at the same time, it would not support
     setting ecmp hash as CRC_CCITT and lag hash as CRC on ingress port hash field. For broadcom, ECMP/LAG hash not supported in broadcom SAI. "
    conditions:
    - "asic_type in ['broadcom', 'mellanox']"

hash/test_generic_hash.py::test_nexthop_flap[CRC_CCITT-IP_PROTOCOL-ipv4-None-None]:
  skip:
    reason: "With IP Protocol alone, Cisco-8000 don't have enough entropy to distribute the packets evenly"
    conditions:
    - "asic_type in ['cisco-8000']"

hash/test_generic_hash.py::test_reboot:
  skip:
    reason: 'On Mellanox SPC1 platforms, due to HW limitation, it would not support CRC_CCITT algorithm. For broadcom, ECMP/LAG hash not supported in broadcom SAI'
    conditions_logical_operator: or
    conditions:
      - "asic_gen == 'spc1'"
      - "asic_type in ['broadcom']"

hash/test_generic_hash.py::test_reboot[CRC-INNER_IP_PROTOCOL:
  skip:
    reason: "On Mellanox platforms, due to HW limitation, it would not support CRC algorithm on INNER_IP_PROTOCOL field. For broadcom, ECMP/LAG hash not supported in broadcom SAI"
    conditions:
    - "asic_type in ['broadcom', 'mellanox']"

hash/test_generic_hash.py::test_reboot[CRC-INNER_L4_SRC_PORT:
   xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

hash/test_generic_hash.py::test_reboot[CRC-IP_PROTOCOL-ipv4:
  skip:
    reason: "With IP Protocol alone, we don't have enough entropy to distribute the packets evenly"
    conditions:
      - "asic_type in ['cisco-8000']"

hash/test_generic_hash.py::test_reboot[CRC_CCITT-INNER_IP_PROTOCOL:
  skip:
    reason: "On Mellanox platforms, due to HW limitation, it would not support CRC algorithm on INNER_IP_PROTOCOL field. For broadcom, ECMP/LAG hash not supported in broadcom SAI"
    conditions:
    - "asic_type in ['broadcom', 'mellanox']"

hash/test_generic_hash.py::test_reboot[CRC_CCITT-IN_PORT:
  skip:
    reason: "On Mellanox platforms, due to HW limitation, when ecmp and lag hash at the same time, it would not support
     setting ecmp hash as CRC_CCITT and lag hash as CRC on ingress port hash field. For broadcom, ECMP/LAG hash not supported in broadcom SAI"
    conditions:
    - "asic_type in ['broadcom', 'mellanox']"

hash/test_generic_hash.py::test_reboot[CRC_CCITT-IP_PROTOCOL-ipv4:
  skip:
    reason: "With IP Protocol alone, we don't have enough entropy to distribute the packets evenly"
    conditions:
      - "asic_type in ['cisco-8000']"

#######################################
#####          http              #####
#######################################
http:
  skip:
    reason: "It is skipped for '202412' for now"
    conditions:
      - "release in ['202412']"

#######################################
#####    iface_loopback_action    #####
#######################################
iface_loopback_action/test_iface_loopback_action.py:
  skip:
    reason: "Test only supported on Mellanox SKUs, didn't supported on dualtor topology."
    conditions_logical_operator: or
    conditions:
      - "'dualtor' in topo_name"
      - "asic_type not in ['mellanox']"

#######################################
#####      iface_namingmode       #####
#######################################
iface_namingmode/test_iface_namingmode.py::TestConfigInterface:
  skip:
    reason: "x86_64-8111_32eh_o-r0 platform does not support TestConfigInterface"
    conditions:
      - "platform in ['x86_64-8111_32eh_o-r0']"

iface_namingmode/test_iface_namingmode.py::TestConfigInterface::test_config_interface_speed:
  skip:
    reason: "Arista-7060X6 doesn't support speed change as it's ASIC limitation. Skipping this test."
    conditions:
      - "'Arista-7060X6' in hwsku"

iface_namingmode/test_iface_namingmode.py::TestShowIP::test_show_ip_route_v4:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"

iface_namingmode/test_iface_namingmode.py::TestShowPriorityGroup:
  xfail:
    reason: "Platform specific issue"
    strict: True
    conditions:
      - "platform in ['x86_64-cel_e1031-r0']"
  skip:
    reason: "M* topo does not support TestShowPriorityGroup"
    conditions:
      - "topo_type in ['m0', 'mx', 'm1']"

iface_namingmode/test_iface_namingmode.py::TestShowQueue:
  skip:
    reason: "M* topo does not support TestShowQueue"
    conditions:
      - "topo_type in ['m0', 'mx', 'm1']"

iface_namingmode/test_iface_namingmode.py::TestShowQueue::test_show_queue_persistent_watermark:
  xfail:
    reason: "Platform specific issue"
    strict: True
    conditions:
      - "platform in ['x86_64-cel_e1031-r0']"

iface_namingmode/test_iface_namingmode.py::TestShowQueue::test_show_queue_watermark:
  xfail:
    reason: "Platform specific issue"
    strict: True
    conditions:
      - "platform in ['x86_64-cel_e1031-r0']"

iface_namingmode/test_iface_namingmode.py::test_show_ip_route_v4:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"

iface_namingmode/test_iface_namingmode.py::test_show_pfc_counters:
  skip:
    reason: "Not supported on SKU"
    conditions:
      - "hwsku in ['Mellanox-SN5600-C256S1', 'Mellanox-SN5600-C224O8', 'Mellanox-SN5640-C512S2',
                   'Mellanox-SN5640-C448O16']"

#######################################
#####            ip               #####
#######################################
ip/link_local/test_link_local_ip.py:
  skip:
    reason: "New test case, failing badly, need owner to enhance"
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19897"
ip/test_ip_packet.py:
  skip:
    reason: "Skipping ip packet test since can't provide enough interfaces"
    conditions:
      - "len(minigraph_interfaces) < 2 and len(minigraph_portchannels) < 2"

ip/test_ip_packet.py::TestIPPacket::test_forward_ip_packet_with_0xffff_chksum_drop:
  skip:
    reason: "Broadcom, Cisco, Barefoot, and Marvell Asic will tolorate IP packets with 0xffff checksum
            / Skipping ip packet test since can't provide enough interfaces"
    conditions_logical_operator: or
    conditions:

      - "asic_type in ['broadcom', 'cisco-8000', 'marvell', 'barefoot', 'marvell-teralynx', 'marvell-prestera'] and asic_subtype not in ['broadcom-dnx']"
      - "len(minigraph_interfaces) < 2 and len(minigraph_portchannels) < 2"
      - "topo_name in ['t2_2lc_36p-masic', 't2_2lc_min_ports-masic', 't2_5lc-mixed-96']"

ip/test_ip_packet.py::TestIPPacket::test_forward_ip_packet_with_0xffff_chksum_tolerant:
  skip:
    reason: "Mellanox and Broadcom DNX Asic will drop IP packets with 0xffff checksum
            / Skipping ip packet test since can't provide enough interfaces"
    conditions_logical_operator: or
    conditions:
      - "asic_type in ['mellanox'] or asic_subtype in ['broadcom-dnx']"
      - "len(minigraph_interfaces) < 2 and len(minigraph_portchannels) < 2"

ip/test_mgmt_ipv6_only.py:
  skip:
    reason: "Skipping mgmt ipv6 test for M* topo"
    conditions:
      - "topo_type in ['m0', 'mx', 'm1']"

#######################################
#####            ipfwd            #####
#######################################
ipfwd/test_dip_sip.py:
  skip:
    reason: "Unsupported topology or unsupported in specific Cisco platforms."
    conditions_logical_operator: or
    conditions:
      - "platform in ['x86_64-8122_64eh_o-r0', 'x86_64-8122_64ehf_o-r0']"
      - "topo_type not in ['t0', 't1', 't2', 'm0', 'mx', 'm1']"

ipfwd/test_dir_bcast.py:
  skip:
    reason: "Unsupported topology."
    conditions:
      - "topo_type not in ['t0', 'm0', 'mx'] or 'dualtor' in topo_name or 't0-backend' in topo_name"
  xfail:
    reason: "Xfail due to known issue with the secondary subnet."
    conditions:
      - "topo_type in ['t0']"
      - "asic_type in ['broadcom']"
      - https://github.com/sonic-net/sonic-mgmt/issues/18786

ipfwd/test_dir_bcast.py::test_dir_bcast:
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

ipfwd/test_mtu.py:
  skip:
    reason: "Unsupported topology."
    conditions:
      - "topo_type not in ['t1', 't2']"

ipfwd/test_nhop_group.py::test_nhop_group_interface_flap:
  xfail:
    reason: "Testcase ignored due to GitHub issue https://github.com/sonic-net/sonic-mgmt/issues/16218 on mellanox platform"
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/16218 and asic_type in ['mellanox']"

ipfwd/test_nhop_group.py::test_nhop_group_member_count:
  xfail:
    reason: "xfail for IPv6-only topologies, need to add support for IPv6-only - https://github.com/sonic-net/sonic-mgmt/issues/20731"
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/20731 and '-v6-' in topo_name"

ipfwd/test_nhop_group.py::test_nhop_group_member_order_capability:
  xfail:
    reason: "xfail for IPv6-only topologies, need to add support for IPv6-only - https://github.com/sonic-net/sonic-mgmt/issues/20731"
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/20731 and '-v6-' in topo_name"

#######################################
#####            ixia             #####
#######################################
ixia:
  skip:
    reason: "Ixia test only support on physical ixia testbed and it is not tested for now"
    conditions_logical_operator: or
    conditions:
      - "asic_type in ['vs']"
      - "True"

#######################################
#####            k8s              #####
#######################################
k8s/test_config_reload.py:
  skip:
    reason: "There is no k8s in veos_vtb, skip in PR testing"
    conditions:
      - "asic_type in ['vs']"

k8s/test_disable_flag.py:
  skip:
    reason: "There is no k8s in veos_vtb, skip in PR testing"
    conditions:
      - "asic_type in ['vs']"

k8s/test_join_available_master.py:
  skip:
    reason: "There is no k8s in veos_vtb, skip in PR testing"
    conditions:
      - "asic_type in ['vs']"

#######################################
#####         kubesonic           #####
#######################################
kubesonic/test_k8s_join_disjoin.py:
  skip:
    reason: "kubesonic feature is not supported in slim image"
    conditions_logical_operator: or
    conditions:
      - "hwsku in ['Arista-7050-QX-32S', 'Arista-7050-Q16S64', 'Arista-7050QX-32S-S4Q31', 'Arista-7050QX32S-Q32', 'Celestica-E1031-T48S4']"
      - "branch in ['master']"

#######################################
#####           lldp              #####
#######################################
lldp/test_lldp.py::test_lldp:
  skip:
    reason: "Skipping LLDP test because the topology is standalone. No LLDP neighbors detected."
    conditions:
      - "'standalone' in topo_name"

lldp/test_lldp.py::test_lldp_neighbor:
  skip:
    reason: "Skipping LLDP test because the topology is standalone. No LLDP neighbors detected."
    conditions:
      - "'standalone' in topo_name"

lldp/test_lldp.py::test_lldp_neighbor_post_swss_reboot:
  skip:
    reason: "Not M0/Mx/M1 scenario"
    conditions:
      - "topo_type in ['m0', 'mx', 'm1']"
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

lldp/test_lldp_syncd.py::test_lldp_entry_table_after_lldp_restart:
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

#######################################
#####           macsec            #####
#######################################
macsec:
  skip:
    reason: "Skip running on dualtor testbed"
    conditions:
      - "'dualtor' in topo_name"

macsec/test_dataplane.py::TestDataPlane::test_server_to_neighbor:
  skip:
    reason: 'test_server_to_neighbor needs downstream neighbors, which is not present in this topo'
    conditions:
      - "'t2' in topo_name"

macsec/test_interop_protocol.py::TestInteropProtocol::test_port_channel:
  skip:
    reason: "Skip port channel test for causing continuously failing in PR testing"
    conditions:
      - "asic_type in ['vs'] and https://github.com/sonic-net/sonic-buildimage/issues/22081"

macsec/test_interop_protocol.py::TestInteropProtocol::test_snmp:
  skip:
    reason: "Skip SNMP test for causing continuously failing in PR testing"
    conditions:
      - "asic_type in ['vs'] and https://github.com/sonic-net/sonic-mgmt/issues/18273"

#######################################
#####           mclag             #####
#######################################
mclag:
  skip:
    reason: "Skip running on dualtor testbed"
    conditions:
       - "'dualtor' in topo_name"

mclag/test_mclag_l3.py:
  skip:
    reason: "Mclag test only support on t0-mclag platform which is not in PR test"
    conditions:
      - "asic_type in ['vs']"

#######################################
#####       memory_checker        #####
#######################################
memory_checker/test_memory_checker.py:
  skip:
    reason: "Testcase ignored due to GitHub issue: https://github.com/sonic-net/sonic-buildimage/issues/19295 / Skip this test as it won't impact gnmi show command"
    conditions_logical_operator: or
    conditions:
      - "https://github.com/sonic-net/sonic-buildimage/issues/19295 and 'sn4280' in platform"
      - "release in ['202412']"

#######################################
#####            mpls             #####
#######################################
mpls:
  skip:
    reason: "Skip running on dualtor testbed and '202412' for now"
    conditions_logical_operator: "OR"
    conditions:
      - "release in ['202412']"
      - "'dualtor' in topo_name"

mpls/test_mpls.py:
  skip:
    reason: "MPLS TCs are not supported on Barefoot plarforms"
    conditions:
      - "asic_type in ['barefoot']"

#######################################
#####           mvrf              #####
#######################################
mvrf:
  skip:
    reason: "mvrf is not supported in x86_64-nokia_ixr7250e_36x400g-r0 platform, M* topo"
    conditions_logical_operator: or
    conditions:
      - "topo_type in ['m0', 'mx', 'm1']"
      - "platform in ['x86_64-nokia_ixr7250e_36x400g-r0']"

mvrf/test_mgmtvrf.py:
  skip:
    reason: "mvrf is not supported in x86_64-nokia_ixr7250e_36x400g-r0 platform, M* topo, kvm testbed, mellanox, nvidia and broadcom asic from 202411 and later"
    conditions_logical_operator: or
    conditions:
      - "asic_type in ['vs', 'mellanox', 'nvidia', 'broadcom']"
      - "topo_type in ['m0', 'mx', 'm1']"
      - "platform in ['x86_64-nokia_ixr7250e_36x400g-r0']"

mvrf/test_mgmtvrf.py::TestReboot::test_fastboot:
  skip:
    reason: "Dualtor topology doesn't support advanced-reboot"
    conditions:
      - "topo_name in ['dualtor', 'dualtor-56', 'dualtor-120', 'dualtor-aa', 'dualtor-aa-56', 'dualtor-aa-64-breakout']"

mvrf/test_mgmtvrf.py::TestReboot::test_warmboot:
  skip:
    reason: "Dualtor topology doesn't support advanced-reboot"
    conditions:
      - "topo_name in ['dualtor', 'dualtor-56', 'dualtor-120', 'dualtor-aa', 'dualtor-aa-56', 'dualtor-aa-64-breakout']"

#######################################
#####           mx              #####
#######################################
mx:
  skip:
    reason: "Test is only applicable to m0, mx, and m1 topologies"
    conditions:
      - "topo_type not in ['m0', 'mx', 'm1']"

#######################################
#####           nat               #####
#######################################
nat:
  skip:
    reason: "Nat feature is not enabled with image version, skipped on mellanox and nvidia asic from 202411 and later "
    conditions_logical_operator: or
    conditions:
      - "'nat' not in feature_status"
      - "asic_type in ['mellanox', 'nvidia']"

#######################################
#####             ospf            #####
#######################################
ospf:
  skip:
    reason: "Neighbor type must be sonic, skip in PR testing and it is skipped for '202412' for now"
    conditions_logical_operator: or
    conditions:
      - "asic_type in ['vs']"
      - "release in ['202412']"

#######################################
#####    override_config_table    #####
#######################################
override_config_table/test_override_config_table.py:
  skip:
    reason: "Skip on multi-asic platforms as test provided golden config format is not compatible with multi-asics."
    conditions:
      - "is_multi_asic==True"

#######################################
######       packet_trimming       #####
########################################
packet_trimming:
  skip:
    reason: "Packet trimming cases require PR https://github.com/sonic-net/sonic-buildimage/pull/22869, but KVM does not support it, so skip trimming case on KVM. Packet-trimming tests are only supported on certain Mellanox SN5640 and Arista 7060X6 SKUs."
    conditions_logical_operator: or
    conditions:
      - "asic_type in ['vs']"
      - "hwsku not in ['Arista-7060X6-64PE-B-C448O16', 'Arista-7060X6-64PE-B-C512S2', 'Mellanox-SN5640-C448O16', 'Mellanox-SN5640-C512S2']"
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

#######################################
#####           pc               #####
#######################################
pc/test_lag_2.py::test_lag_db_status_with_po_update:
  skip:
    reason: "Only support t1-lag, t1-56-lag, t1-28-lag, t1-64-lag and t2 topology"
    conditions:
        - "topo_name not in ['t1-lag', 't1-28-lag', 't1-48-lag', 't1-56-lag', 't1-64-lag'] and 't2' not in topo_name"

pc/test_lag_member.py:
  skip:
    reason: "Not support dualtor or t0 backend topo"
    conditions:
        - "'dualtor' in topo_name or 't0-backend' in topo_name"

pc/test_lag_member_forwarding.py:
  xfail:
    reason: "Not supported on BRCM before SDK 13.x"
    conditions_logical_operator: and
    conditions:
        - "asic_type in ['broadcom'] and https://github.com/sonic-net/sonic-buildimage/issues/21938"

pc/test_po_cleanup.py:
  skip:
    reason: "Skip test due to there is no portchannel exists in current topology."
    conditions:
      - "len(minigraph_portchannels) == 0 and not is_multi_asic"

pc/test_po_cleanup.py::test_po_cleanup_after_reload:
  xfail:
    reason: "Skip test due on dualtor setup due to github issue https://github.com/sonic-net/sonic-buildimage/issues/20414 on mellanox platform"
    conditions:
      - "'dualtor' in topo_name and https://github.com/sonic-net/sonic-buildimage/issues/20414 and asic_type in ['mellanox']"


pc/test_po_update.py::test_po_update:
  skip:
    reason: "Skip test due to there is no portchannel or no portchannel member exists in current topology."
    conditions:
      - "len(minigraph_portchannels) == 0 or len(minigraph_portchannels[list(minigraph_portchannels.keys())[0]]['members']) == 0"
  xfail:
    reason: "xfail for IPv6-only topologies, need to add support for IPv6-only - https://github.com/sonic-net/sonic-mgmt/issues/20729"
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/20729 and '-v6-' in topo_name"

pc/test_po_update.py::test_po_update_io_no_loss:
  skip:
    reason: "Skip test due to there isn't enough port channel exists in current topology."
    conditions:
      - "len(minigraph_portchannel_interfaces) < 2"

pc/test_po_voq.py:
  skip:
    reason: "Skip for non t2 or Skip since there is no portchannel configured or no portchannel member exists in current topology."
    conditions:
      - "'t2' not in topo_name or num_asic == 0 or len(minigraph_portchannels[list(minigraph_portchannels.keys())[0]]['members']) == 0 or asic_type in ['cisco-8000']"

pc/test_retry_count.py::test_retry_count:
  xfail:
    reason: "Test set up is failing. Need owner to fix it."
    conditions:
        - "https://github.com/sonic-net/sonic-mgmt/issues/19400"

#######################################
#####           pfc               #####
#######################################
pfc/test_unknown_mac.py:
  skip:
    reason: In cisco-8000 platform, a packet with unknown MAC will be flooded, not dropped. This case will not pass in cisco-8000.
    conditions:
      - "asic_type in ['cisco-8000']"

#######################################
#####         pfc_asym            #####
#######################################
pfc_asym:
  skip:
    reason: "It is not tested for now"
    conditions:
      - "True"

pfc_asym/test_pfc_asym.py:
  skip:
    reason: 'pfc_asym test skip except for on Barefoot platforms'
    conditions:
      - "asic_type not in ['barefoot']"

#######################################
#####         pfcwd               #####
#######################################
pfcwd:
  skip:
    reason: "Pfcwd tests skipped on M* testbed, and some isolated topologies and '202412' for now"
    conditions_logical_operator: or
    conditions:
      - "topo_type in ['m0', 'mx', 'm1']"
      - *lossyTopos
      - "release in ['202412']"

pfcwd/test_pfc_config.py::TestPfcConfig::test_forward_action_cfg:
   skip:
     reason: "Forward action not supported in cisco-8000; Not supported on M* testbed."
     conditions_logical_operator: or
     conditions:
        - "asic_type in ['cisco-8000']"
        - "topo_type in ['m0', 'mx', 'm1']"
        - *lossyTopos

pfcwd/test_pfcwd_all_port_storm.py:
   skip:
     reason: "Slow pfc generation rate on 7060x6 200Gb,
              pfc generation function on the Arista fanout device need to be improved by Arista
              / Pfcwd tests skipped on M* testbed."
     conditions_logical_operator: or
     conditions:
      - "hwsku in ['Arista-7060X6-64PE-256x200G']"
      - "topo_type in ['m0', 'mx', 'm1']"
      - *lossyTopos

pfcwd/test_pfcwd_all_port_storm.py::TestPfcwdAllPortStorm::test_all_port_storm_restore[IPv6.*:
   xfail:
     reason: "Xfail due to https://github.com/sonic-net/sonic-mgmt/issues/21067 or https://github.com/sonic-net/sonic-mgmt/issues/21082"
     conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/21067 and 't0-56' in topo_type and asic_type in ['mellanox']"
      - "https://github.com/sonic-net/sonic-mgmt/issues/21082 and topo_name in ['t0-88-o8c80', 't1-48-lag', 't1-lag', 't1-32-lag', 't1-64-lag'] and asic_type in ['mellanox']"

pfcwd/test_pfcwd_function.py::TestPfcwdFunc::test_pfcwd_actions:
  xfail:
    reason: "On Dualtor AA setup, test_pfcwd_actions is not stable due to github issue https://github.com/sonic-net/sonic-mgmt/issues/15387"
    conditions:
      - "'dualtor-aa' in topo_name and https://github.com/sonic-net/sonic-mgmt/issues/15387"

pfcwd/test_pfcwd_function.py::TestPfcwdFunc::test_pfcwd_no_traffic:
   skip:
     reason: "This test is applicable only for cisco-8000 / Pfcwd tests skipped on M* testbed."
     conditions_logical_operator: or
     conditions:
        - "asic_type != 'cisco-8000'"
        - "topo_type in ['m0', 'mx', 'm1']"
        - *lossyTopos

pfcwd/test_pfcwd_timer_accuracy.py::TestPfcwdAllTimer::test_pfcwd_timer_accuracy:
  skip:
    reason: "ipv6 mgmt ip is not supported, see check_timer_accuracy_test.yml#43"
    conditions:
    - "is_mgmt_ipv6_only==True"

pfcwd/test_pfcwd_warm_reboot.py:
   skip:
     reason: "Warm Reboot is not supported in T2 or in standalone topos. / Pfcwd tests skipped on M* testbed. / Warm reboot is not required for isolated topo / Pfcwd warm reboot is not supported on cisco-8000 platform. Warm reboot is not supported on smartswitch. /  It is skipped  for '202412' for now"
     conditions_logical_operator: or
     conditions:
        - "'t2' in topo_name"
        - "'standalone' in topo_name"
        - "topo_type in ['m0', 'mx', 'm1']"
        - *lossyTopos
        - "asic_type in ['cisco-8000']"
        - "'isolated' in topo_name"
        - "'dualtor' in topo_name and https://github.com/sonic-net/sonic-mgmt/issues/8400"
        - "https://github.com/sonic-net/sonic-mgmt/issues/15942 and asic_type in ['broadcom', 'mellanox']"
        - "is_smartswitch==True"
        - "asic_type in ['vs'] and https://github.com/sonic-net/sonic-mgmt/issues/20675"
        - "release in ['202412']"

pfcwd/test_pfcwd_warm_reboot.py::TestPfcwdWb::test_pfcwd_wb[IPv4-async_storm:
   skip:
     reason: "Warm Reboot is not supported in T2 or in standalone topos. / Pfcwd tests skipped on M* testbed. / Currently async_storm test is not supported on VS platform / Warm reboot is not required for 202412"
     conditions_logical_operator: or
     conditions:
        - "'t2' in topo_name"
        - "'standalone' in topo_name"
        - "topo_type in ['m0', 'mx', 'm1']"
        - *lossyTopos
        - "asic_type in ['vs'] and https://github.com/sonic-net/sonic-mgmt/issues/17803"
        - "release in ['202412']"

pfcwd/test_pfcwd_warm_reboot.py::TestPfcwdWb::test_pfcwd_wb[IPv6-async_storm:
   skip:
     reason: "Warm Reboot is not supported in T2 or in standalone topos. / Pfcwd tests skipped on M* testbed. / Currently async_storm test is not supported on VS platform / Warm reboot is not required for 202412"
     conditions_logical_operator: or
     conditions:
        - "'t2' in topo_name"
        - "'standalone' in topo_name"
        - "topo_type in ['m0', 'mx', 'm1']"
        - *lossyTopos
        - "asic_type in ['vs'] and https://github.com/sonic-net/sonic-mgmt/issues/17803"
        - "release in ['202412']"

#######################################
#####     platform_tests          #####
#######################################
platform_tests/api/test_sfp.py::TestSfpApi::test_get_transceiver_info:
  xfail:
    reason: "Testcase ignored on nvidia sn4700 and sn4280 due to github issue: https://github.com/sonic-net/sonic-buildimage/issues/23426"
    conditions:
    - "https://github.com/sonic-net/sonic-buildimage/issues/23426 and ('sn4700' in platform or 'sn4280' in platform)"

platform_tests/test_reload_config.py::test_reload_configuration:
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

platform_tests/test_reload_config.py::test_reload_configuration_checks:
  skip:
    reason: "Skip test_reload_configuration_checks on Cisco platform due to unstable results"
    conditions:
      - "asic_type in ['cisco-8000']"
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

#######################################
#####     process_monitoring      #####
#######################################
process_monitoring/test_critical_process_monitoring.py::test_orchagent_heartbeat:
  skip:
    reason: This test is intended for Orchagent freeze scenario during warm-reboot. It is not required for T1 devices, and not supported on 202412 release.
    conditions_logical_operator: or
    conditions:
      - "'t1' in topo_name"
      - "release in ['202412']"

#######################################
#####     ptftests      #####
#######################################
ptftests:
  skip:
    reason: "It is not tested for now"
    conditions:
      - "True"

#######################################
#####           qos               #####
#######################################
qos:
  skip:
    reason: "M* topo does not support qos"
    conditions_logical_operator: or
    conditions:
      - "topo_type in ['m0', 'mx', 'm1']"
      - "macsec_en==True"
      # ipv6 mgmt ip is not supported, see fixture dut_disable_ipv6 in qos_sai_base.py
      - "is_mgmt_ipv6_only==True"

qos/test_buffer.py:
  skip:
    reason: "These tests don't apply to cisco 8000 platforms or T2 or M* since they support only traditional model and it is skipped for '202412' for now"
    conditions_logical_operator: or
    conditions:
      - "asic_type in ['cisco-8000'] or topo_type == 't2'"
      - "topo_type in ['m0', 'mx', 'm1']"
      - "release in ['202412']"

qos/test_buffer.py::test_buffer_model_test:
  skip:
    reason: "Running only on mellanox devices and covered by unit testing / M* topo does not support qos"
    conditions_logical_operator: or
    conditions:
      - "asic_type in ['mellanox'] or asic_subtype in ['broadcom-dnx']"
      - "asic_type in ['cisco-8000'] or topo_type == 't2'"
      - "topo_type in ['m0', 'mx', 'm1']"

qos/test_buffer_traditional.py:
  skip:
    reason: "Buffer traditional test is only supported 201911 branch / M* topo does not support qos"
    conditions_logical_operator: or
    conditions:
      - "release not in ['201911']"
      - "topo_type in ['m0', 'mx', 'm1']"

qos/test_ecn_config.py:
  skip:
    reason: "This test only support on cisco device"
    conditions:
      - "asic_type not in ['cisco-8000']"

qos/test_oq_watchdog.py:
  skip:
    reason: "OQ watchdog tests only apply to cisco 8000 platforms."
    conditions:
      - "asic_type not in ['cisco-8000']"

qos/test_pfc_counters.py:
  skip:
    reason: "Not supported on SKU and It is skipped for '202412' for now"
    conditions_logical_operator: or
    conditions:
      - "hwsku in ['Mellanox-SN5600-C256S1', 'Mellanox-SN5600-C224O8', 'Mellanox-SN5640-C512S2',
                   'Mellanox-SN5640-C448O16']"
      - "release in ['202412']"

qos/test_pfc_pause.py:
  skip:
    reason: "This test is not run on this asic type or version or topology currently and also skip for 202412 for now"
    conditions_logical_operator: or
    conditions:
      - "topo_type not in ['t0']"
      - "release in ['202412']"

qos/test_pfc_pause.py::test_pfc_pause_lossless:
  # For this test, we use the fanout connected to the DUT to send PFC pause frames.
  # The fanout needs to send PFC frames fast enough so that the queue remains completely paused for the entire duration
  # of the test. The inter packet interval between PFC frames to completely block a queue vary based on link speed and
  # we have seen flakiness in our test runs. Since this test is already covered under the 'ixia' folder where we use a
  # traffic generator to generate pause frames, skipping this here.
  skip:
    reason: "Fanout needs to send PFC frames fast enough to completely pause the queue"

qos/test_qos_dscp_mapping.py:
  skip:
    reason: "ECN marking in combination with tunnel decap not yet supported. Test is also skipped on KVM since it is run in nightly."
    conditions_logical_operator: or
    conditions:
      - "asic_type in ['cisco-8000'] and platform.startswith('x86_64-8122_')"
      - "asic_type in ['vs']"

qos/test_qos_dscp_mapping.py::TestQoSSaiDSCPQueueMapping_IPIP_Base::test_dscp_to_queue_mapping[pipe]:
  skip:
    reason: "Pipe decap mode not supported due to either SAI or platform limitation / M* topo does not support qos"
    conditions_logical_operator: or
    conditions:
      - "asic_type in ['broadcom', 'cisco-8000']"
      - https://github.com/sonic-net/sonic-mgmt/issues/12906
      - "topo_type in ['m0', 'mx', 'm1']"

qos/test_qos_dscp_mapping.py::TestQoSSaiDSCPQueueMapping_IPIP_Base::test_dscp_to_queue_mapping[uniform]:
  skip:
    reason: "Uniform decap mode is not supported on Mellanox dualtor testbed due to the mode is pipe to support dscp remapping"
    conditions:
      - "'dualtor' in topo_name and asic_type in ['mellanox']"
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

qos/test_qos_masic.py:
  skip:
    reason: "QoS tests for multi-ASIC only. Supported topos: t1-lag, t1-64-lag, t1-56-lag, t1-backend. / M* topo does not support qos. / KVM do not support swap syncd."
    conditions_logical_operator: or
    conditions:
      - "is_multi_asic==False or topo_name not in ['t1-lag', 't1-64-lag', 't1-56-lag', 't1-backend']"
      - "topo_type in ['m0', 'mx', 'm1']"
      - "asic_type in ['vs']"

qos/test_qos_sai.py:
  skip:
    reason: "qos_sai tests not supported on t1 topo / M* topo does not support qos and It is skipped for '202412' for now"
    conditions_logical_operator: or
    conditions:
      - "asic_type in ['barefoot'] and topo_name in ['t1']"
      - "topo_type in ['m0', 'mx', 'm1']"
      - "release in ['202412']"

qos/test_qos_sai.py::TestQosSai:
  skip:
    reason: "Unsupported testbed type. / M* topo does not support qos"
    conditions_logical_operator: or
    conditions:
      - "topo_type in ['m0', 'mx', 'm1']"
      - "topo_name not in (constants['QOS_SAI_TOPO'] + ['t2_single_node_max', 't2_single_node_min']) and asic_type not in ['mellanox']"

qos/test_qos_sai.py::TestQosSai::testIPIPQosSaiDscpToPgMapping:
  skip:
    reason: "For DSCP to PG mapping on IPinIP traffic , mellanox device has different behavior to community. For mellanox device, testQosSaiDscpToPgMapping can cover the scenarios / Unsupported testbed type."
    conditions_logical_operator: or
    conditions:
      - "asic_type in ['mellanox']"
      - https://github.com/sonic-net/sonic-mgmt/issues/12906
      - "topo_type in ['m0', 'mx', 'm1']"
      - "topo_name not in constants['QOS_SAI_TOPO'] and asic_type not in ['mellanox']"

qos/test_qos_sai.py::TestQosSai::testPfcStormWithSharedHeadroomOccupancy:
  skip:
    reason: "This test is only for Mellanox."
    conditions_logical_operator: or
    conditions:
      - "asic_type in ['cisco-8000']"
      - "topo_type in ['m0', 'mx', 'm1']"
      - "topo_name not in constants['QOS_SAI_TOPO'] and asic_type not in ['mellanox']"

qos/test_qos_sai.py::TestQosSai::testQosSaiBufferPoolWatermark:
  skip:
    reason: "sai_thrift_read_buffer_pool_watermark are not supported on DNX / Unsupported testbed type."
    conditions_logical_operator: or
    conditions:
      - "platform in ['x86_64-nokia_ixr7250e_36x400g-r0', 'x86_64-arista_7800r3_48cq2_lc', 'x86_64-arista_7800r3_48cqm2_lc', 'x86_64-arista_7800r3a_36d2_lc', 'x86_64-arista_7800r3a_36dm2_lc','x86_64-arista_7800r3ak_36dm2_lc']"
      - "topo_type in ['m0', 'mx', 'm1']"
      - "topo_name not in constants['QOS_SAI_TOPO'] and asic_type not in ['mellanox']"

qos/test_qos_sai.py::TestQosSai::testQosSaiDot1pPgMapping:
  skip:
    reason: "Dot1p-PG mapping is only supported on backend."
    conditions_logical_operator: or
    conditions:
      - "'backend' not in topo_name"
      - "topo_type in ['m0', 'mx', 'm1']"
      - "topo_name not in constants['QOS_SAI_TOPO'] and asic_type not in ['mellanox']"

qos/test_qos_sai.py::TestQosSai::testQosSaiDot1pQueueMapping:
  skip:
    reason: "Dot1p-queue mapping is only supported on backend."
    conditions_logical_operator: or
    conditions:
      - "'backend' not in topo_name"
      - "topo_type in ['m0', 'mx', 'm1']"
      - "topo_name not in constants['QOS_SAI_TOPO'] and asic_type not in ['mellanox']"

qos/test_qos_sai.py::TestQosSai::testQosSaiDscpQueueMapping:
  skip:
    reason: "Unsupported testbed type."
    conditions_logical_operator: or
    conditions:
      - "'backend' in topo_name"
      - "topo_type in ['m0', 'mx', 'm1']"
      - "topo_name not in (constants['QOS_SAI_TOPO'] + ['t2_single_node_max', 't2_single_node_min']) and asic_type not in ['mellanox']"

qos/test_qos_sai.py::TestQosSai::testQosSaiDscpToPgMapping:
  skip:
    reason: "Unsupported testbed type."
    conditions_logical_operator: or
    conditions:
      - "'backend' in topo_name"
      - "topo_type in ['m0', 'mx', 'm1']"
      - "topo_name not in (constants['QOS_SAI_TOPO'] + ['t2_single_node_max', 't2_single_node_min']) and asic_type not in ['mellanox']"

qos/test_qos_sai.py::TestQosSai::testQosSaiDwrrWeightChange:
  skip:
    reason: "Skip DWRR weight change test on Mellanox platform. / Unsupported testbed type."
    conditions_logical_operator: or
    conditions:
      - "asic_type in ['mellanox']"
      - "topo_type in ['m0', 'mx', 'm1']"
      - "topo_name not in (constants['QOS_SAI_TOPO'] + ['t2_single_node_max', 't2_single_node_min']) and asic_type not in ['mellanox']"

qos/test_qos_sai.py::TestQosSai::testQosSaiFullMeshTrafficSanity:
  skip:
    reason: "Unsupported testbed type."
    conditions_logical_operator: or
    conditions:
      - "asic_type not in ['cisco-8000'] or topo_name not in ['ptf64']"
      - "topo_type in ['m0', 'mx', 'm1']"
      - "topo_name not in constants['QOS_SAI_TOPO'] and asic_type not in ['mellanox']"

qos/test_qos_sai.py::TestQosSai::testQosSaiHeadroomPoolSize:
  skip:
    reason: "Unsupported testbed type."
    conditions_logical_operator: or
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/12292 and hwsku in ['Force10-S6100']
       and topo_type in ['t1-64-lag'] and hwsku not in ['Arista-7060CX-32S-C32', 'Celestica-DX010-C32', 'Arista-7260CX3-D108C8', 'Arista-7260CX3-D108C10', 'Force10-S6100', 'Arista-7260CX3-Q64', 'Arista-7050CX3-32S-C32', 'Arista-7050CX3-32S-C28S4', 'Arista-7050CX3-32S-D48C8', 'Arista-7060CX-32S-D48C8'] and asic_type not in ['mellanox']
       and asic_type in ['cisco-8000']"
      - "topo_type in ['m0', 'mx', 'm1']"
      - "topo_name not in (constants['QOS_SAI_TOPO'] + ['t2_single_node_max', 't2_single_node_min']) and asic_type not in ['mellanox']"
      - "asic_type in ['vs']"

qos/test_qos_sai.py::TestQosSai::testQosSaiHeadroomPoolWatermark:
  skip:
    reason: "Unsupported testbed type."
    conditions_logical_operator: or
    conditions:
      - "platform in ['x86_64-nokia_ixr7250e_36x400g-r0', 'x86_64-arista_7800r3_48cq2_lc', 'x86_64-arista_7800r3_48cqm2_lc', 'x86_64-arista_7800r3a_36d2_lc', 'x86_64-arista_7800r3a_36dm2_lc', 'x86_64-arista_7800r3ak_36dm2_lc'] or asic_type in ['mellanox']
         and asic_type in ['cisco-8000']
         and https://github.com/sonic-net/sonic-mgmt/issues/12292 and hwsku in ['Force10-S6100'] and topo_type in ['t1-64-lag']"
      - "topo_type in ['m0', 'mx', 'm1']"
      - "topo_name not in constants['QOS_SAI_TOPO'] and asic_type not in ['mellanox']"
  xfail:
    reason: "Headroom pool size not supported."
    conditions:
      - "hwsku not in ['Arista-7060CX-32S-C32', 'Celestica-DX010-C32', 'Arista-7260CX3-D108C8', 'Arista-7260CX3-D108C10', 'Force10-S6100', 'Arista-7260CX3-Q64', 'Arista-7050CX3-32S-C32', 'Arista-7050CX3-32S-C28S4', 'Arista-7050CX3-32S-D48C8']"

qos/test_qos_sai.py::TestQosSai::testQosSaiLosslessVoq:
  skip:
    reason: "Unsupported testbed type."
    conditions_logical_operator: or
    conditions:
      - "asic_type not in ['cisco-8000'] or platform.startswith('x86_64-8122_')"
      - "topo_type in ['m0', 'mx', 'm1']"
      - "topo_name not in constants['QOS_SAI_TOPO'] and asic_type not in ['mellanox']"

qos/test_qos_sai.py::TestQosSai::testQosSaiLossyQueueVoq:
  skip:
    reason: "Unsupported testbed type."
    conditions_logical_operator: or
    conditions:
      - "asic_type not in ['cisco-8000'] or platform.startswith('x86_64-8122_')"
      - "topo_type in ['m0', 'mx', 'm1']"
      - "topo_name not in constants['QOS_SAI_TOPO'] and asic_type not in ['mellanox']"

qos/test_qos_sai.py::TestQosSai::testQosSaiLossyQueueVoqMultiSrc:
  skip:
    reason: "Unsupported testbed type."
    conditions_logical_operator: or
    conditions:
      - "asic_type not in ['cisco-8000'] or platform.startswith('x86_64-8122_')"
      - "topo_type in ['m0', 'mx', 'm1']"
      - "topo_name not in constants['QOS_SAI_TOPO'] and asic_type not in ['mellanox']"

qos/test_qos_sai.py::TestQosSai::testQosSaiPGDrop:
  skip:
    reason: "Unsupported testbed type."
    conditions_logical_operator: or
    conditions:
      - "asic_type not in ['cisco-8000'] or platform.startswith('x86_64-8122_')"
      - "topo_type in ['m0', 'mx', 'm1']"
      - "topo_name not in constants['QOS_SAI_TOPO'] and asic_type not in ['mellanox']"

qos/test_qos_sai.py::TestQosSai::testQosSaiPgHeadroomWatermark:
  skip:
    reason: "Unsupported testbed type."
    conditions_logical_operator: or
    conditions:
      - "asic_type in ['cisco-8000'] and not platform.startswith('x86_64-8122_')"
      - "topo_type in ['m0', 'mx', 'm1']"
      - "topo_name not in (constants['QOS_SAI_TOPO'] + ['t2_single_node_max', 't2_single_node_min']) and asic_type not in ['mellanox']"

qos/test_qos_sai.py::TestQosSai::testQosSaiPgSharedWatermark[None-wm_pg_shared_lossy]:
  xfail:
    reason: "Image issue on Arista platforms / Unsupported testbed type."
    conditions:
      - "platform in ['x86_64-arista_7050cx3_32s']"

qos/test_qos_sai.py::TestQosSai::testQosSaiQWatermarkAllPorts:
  skip:
    reason: "All Port Watermark test is verified only on Cisco Platforms."
    conditions_logical_operator: or
    conditions:
      - "asic_type not in ['cisco-8000']"
      - "topo_type in ['m0', 'mx', 'm1']"
      - "topo_name not in (constants['QOS_SAI_TOPO'] + ['t2_single_node_max', 't2_single_node_min']) and asic_type not in ['mellanox']"

qos/test_qos_sai.py::TestQosSai::testQosSaiSharedReservationSize:
  skip:
    reason: "Shared reservation size test is not supported."
    conditions_logical_operator: or
    conditions:
      - "asic_type not in ['cisco-8000'] or platform.startswith('x86_64-8122_')"
      - "topo_type in ['m0', 'mx', 'm1']"
      - "topo_name not in constants['QOS_SAI_TOPO'] and asic_type not in ['mellanox']"

qos/test_qos_sai.py::TestQosSai::testQosSaiXonHysteresis:
  skip:
    reason: "testQosSaiXonHysteresis case is only supported on cisco-8000 8102/8101/8111."
    conditions_logical_operator: or
    conditions:
      - "platform not in ['x86_64-8102_64h_o-r0', 'x86_64-8101_32fh_o-r0', 'x86_64-8111_32eh_o-r0']"
      - "asic_type not in ['cisco-8000']"

qos/test_tunnel_qos_remap.py:
  skip:
    reason: "Tunnel qos remap test needs some SAI attributes, which are not supported on KVM."
    conditions:
      - "asic_type in ['vs']"

qos/test_tunnel_qos_remap.py::test_pfc_watermark_extra_lossless_active:
  xfail:
    reason: "test_pfc_watermark_extra_lossless_active is not support on broadcom platform yet"
    conditions:
      - "asic_type in ['broadcom']"
      - https://github.com/sonic-net/sonic-mgmt/issues/11271

qos/test_tunnel_qos_remap.py::test_pfc_watermark_extra_lossless_standby:
  xfail:
    reason: "test_pfc_watermark_extra_lossless_standby is not support on broadcom platform yet"
    conditions:
      - "asic_type in ['broadcom']"
      - https://github.com/sonic-net/sonic-mgmt/issues/11271

qos/test_voq_watchdog.py:
  skip:
    reason: "These tests only apply to cisco 8000 platforms."
    conditions:
      - "asic_type not in ['cisco-8000']"

#######################################
#####           radv             #####
#######################################
radv/test_radv_ipv6_ra.py::test_radv_router_advertisement:
  xfail:
    reason: "xfail for IPv6-only topologies, need to added support for IPv6-only. Or test case has issue on the t0-isolated-d256u256s2 topo."
    conditions_logical_operator: or
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19924 and '-v6-' in topo_name"
      - "'t0-isolated-d256u256s2' in topo_name"

radv/test_radv_ipv6_ra.py::test_solicited_router_advertisement:
  xfail:
    reason: "xfail for IPv6-only topologies, need to added support for IPv6-only. Or test case has issue on the t0-isolated-d256u256s2 topo."
    conditions_logical_operator: or
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19924 and '-v6-' in topo_name"
      - "'t0-isolated-d256u256s2' in topo_name"

radv/test_radv_ipv6_ra.py::test_solicited_router_advertisement_with_m_flag:
  skip:
    reason: "Test case has issue on the dualtor-64 topo."
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/11322 and 'dualtor-64' in topo_name"
  xfail:
    reason: "xfail for IPv6-only topologies, need to added support for IPv6-only. Or test case has issue on the t0-isolated-d256u256s2 topo."
    conditions_logical_operator: or
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19924 and '-v6-' in topo_name"
      - "'t0-isolated-d256u256s2' in topo_name"

radv/test_radv_ipv6_ra.py::test_unsolicited_router_advertisement_with_m_flag:
  skip:
    reason: "Test case has issue on the dualtor-64 topo."
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/11322 and 'dualtor-64' in topo_name"
  xfail:
    reason: "xfail for IPv6-only topologies, need to added support for IPv6-only. Or test case has issue on the t0-isolated-d256u256s2 topo."
    conditions_logical_operator: or
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19924 and '-v6-' in topo_name"
      - "'t0-isolated-d256u256s2' in topo_name"

#######################################
#####          read_mac           #####
#######################################
read_mac/test_read_mac_metadata.py:
  skip:
    reason: "Read_mac test needs specific variables and image urls, currently do not support on KVM and regular nightly test."
    conditions:
      - "asic_type in ['vs']"

#######################################
#####      reset_factory          #####
#######################################
reset_factory/test_reset_factory.py:
  skip:
    reason: "This case has a known issue which leaves the DUT in a bad state. Skipping until the issue is addressed."
    conditions:
      - https://github.com/sonic-net/sonic-mgmt/issues/11103

#######################################
#####         restapi             #####
#######################################
restapi/test_restapi.py:
  skip:
    reason: "Only supported on Mellanox"
    conditions:
      - "asic_type not in ['mellanox']"

restapi/test_restapi.py::test_create_vrf:
  skip:
    reason: "Only supported on Mellanox T1"
    conditions_logical_operator: or
    conditions:
      - "'t1' not in topo_type"
      - "asic_type not in ['mellanox']"

restapi/test_restapi.py::test_data_path_sad:
  xfail:
    reason: "Skipped due to community issue https://github.com/sonic-net/sonic-mgmt/issues/17997 on SN5 devices"
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/17997 and 'SN5' in hwsku"

restapi/test_restapi_vxlan_ecmp.py:
  skip:
    reason: "Only supported on cisco 8102, 8101 and mlnx 4600C T1"
    conditions:
      - "not (platform in ['x86_64-8102_64h_o-r0', 'x86_64-8101_32fh_o-r0', 'x86_64-mlnx_msn4600c-r0']  and 't1' in topo_type)"

#######################################
#####           route             #####
#######################################
route/test_default_route.py:
  skip:
    reason: "Does not apply to standalone topos."
    conditions:
      - "'standalone' in topo_name"

route/test_default_route.py::test_default_route_set_src:
  xfail:
    reason: "xfail for IPv6-only topologies, need add support for IPv6-only"
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19925 and '-v6-' in topo_name"

route/test_default_route.py::test_default_route_with_bgp_flap:
  xfail:
    reason: "xfail for IPv6-only topologies, need add support for IPv6-only. Or test case has issue on the t0-isolated-d256u256s2 topo."
    conditions_logical_operator: or
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19925 and '-v6-' in topo_name"
      - "'t0-isolated-d256u256s2' in topo_name"

route/test_duplicate_route.py::test_duplicate_routes[4:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"

route/test_route_bgp_ecmp.py:
  xfail:
    reason: "xfail for IPv6-only topologies, need to add support for IPv6-only - https://github.com/sonic-net/sonic-mgmt/issues/20730"
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/20730 and '-v6-' in topo_name"

route/test_route_bgp_ecmp.py::test_route_bgp_ecmp:
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

route/test_route_consistency.py::TestRouteConsistency::test_route_withdraw_advertise:
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

route/test_route_flap.py:
  skip:
    reason: "Test case has issue on the t0-56-povlan and dualtor-64 topo. Does not apply to standalone or t1-isolated-d128 topos."
    conditions_logical_operator: or
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/11323 and 't0-56-po2vlan' in topo_name"
      - "https://github.com/sonic-net/sonic-mgmt/issues/11324 and 'dualtor-64' in topo_name"
      - "'standalone' in topo_name"
      - "topo_name in ['t1-isolated-d128']"

route/test_route_flow_counter.py:
  skip:
    reason: "Test not supported for cisco-8122 platform / Route flow counter is not supported on vs platform."
    conditions_logical_operator: or
    conditions:
      - "platform in ['x86_64-8122_64eh_o-r0', 'x86_64-8122_64ehf_o-r0']"
      - "asic_type in ['vs']"
  xfail:
    reason: "xfail for IPv6-only topologies, didn't use IPv6 when should"
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19926 and '-v6-' in topo_name"

route/test_route_perf.py:
  skip:
    reason: "Does not apply to standalone topos."
    conditions:
      - "'standalone' in topo_name"
  xfail:
    reason: "Test case has high failure rate on t1-la. Or test case has issue on the t0-isolated-d256u256s2 topo."
    conditions_logical_operator: or
    conditions:
      - "asic_type in ['vs'] and https://github.com/sonic-net/sonic-mgmt/issues/18893"
      - "'t0-isolated-d256u256s2' in topo_name"

route/test_static_route.py:
  skip:
    reason: "Test not supported for 201911 images or older. Does not apply to standalone topos. Not supported on cisco-8122 platform"
    conditions_logical_operator: OR
    conditions:
      - "release in ['201811', '201911']"
      - "'standalone' in topo_name"
      - "platform in ['x86_64-8122_64eh_o-r0', 'x86_64-8122_64ehf_o-r0']"

route/test_static_route.py::test_static_route[:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"

route/test_static_route.py::test_static_route_ecmp[:
  skip:
    reason: "Skip for IPv6-only topologies"
    conditions:
      - "'-v6-' in topo_name"

route/test_static_route.py::test_static_route_ecmp_ipv6:
  # This test case may fail due to a known issue https://github.com/sonic-net/sonic-buildimage/issues/4930.
  # Temporarily disabling the test case due to the this issue.
  skip:
    reason: "Test case may fail due to a known issue / Test not supported for 201911 images or older. Does not apply to standalone topos."
    conditions_logical_operator: OR
    conditions:
      - "https://github.com/sonic-net/sonic-buildimage/issues/4930"
      - "release in ['201811', '201911']"
      - "'standalone' in topo_name"

route/test_static_route.py::test_static_route_ipv6:
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

#######################################
#####           sai_qualify       #####
#######################################
sai_qualify:
  skip:
    reason: "It is not tested for now"
    conditions:
      - "True"

#######################################
#####              saitests         #####
#######################################
saitests:
  skip:
    reason: "It is not tested for now"
    conditions:
      - "True"

#######################################
#####              scp            #####
#######################################
scp/test_scp_copy.py::test_scp_copy:
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

#######################################
#####            scripts         #####
#######################################
scripts:
  skip:
    reason: "It is not tested for now"
    conditions:
      - "True"

#######################################
#####              sflow          #####
#######################################
sflow/test_sflow.py::TestReboot::testFastreboot:
  skip:
    reason: "Dualtor topology doesn't support advanced-reboot"
    conditions:
      - "topo_name in ['dualtor', 'dualtor-56', 'dualtor-120', 'dualtor-aa', 'dualtor-aa-56', 'dualtor-aa-64-breakout']"

sflow/test_sflow.py::TestReboot::testWarmreboot:
  skip:
    reason: "Dualtor topology doesn't support advanced-reboot"
    conditions:
      - "topo_name in ['dualtor', 'dualtor-56', 'dualtor-120', 'dualtor-aa', 'dualtor-aa-56', 'dualtor-aa-64-breakout']"

#######################################
#####      show_techsupport       #####
#######################################
show_techsupport/test_auto_techsupport.py:
  skip:
    reason: "auto techsupport on multi asic platforms doesnt work"
    strict: True
    conditions:
      - (is_multi_asic==True)

show_techsupport/test_auto_techsupport.py::TestAutoTechSupport::test_max_limit[core]:
  xfail:
    reason: "This test case may fail due to a known issue https://github.com/sonic-net/sonic-buildimage/issues/15051."
    conditions:
      - https://github.com/sonic-net/sonic-buildimage/issues/15051

show_techsupport/test_auto_techsupport.py::TestAutoTechSupport::test_sai_sdk_dump:
  skip:
    reason: "Test supported only on Nvidia(Mellanox) devices / auto techsupport on multi asic platforms doesnt work"
    conditions_logical_operator: or
    conditions:
      - "asic_type not in ['mellanox']"
      - "is_multi_asic==True"

#######################################
#####         snappi_tests        #####
#######################################
snappi_tests:
  skip:
    reason: "Snappi test only support on physical tgen testbed"
    conditions:
      - "asic_type in ['vs']"

snappi_tests/dash:
  skip:
    reason: "Skipping dash on 2025 releases"
    conditions:
      - "'2025' in release"

snappi_tests/dataplane:
  skip:
    reason: "Skipping dash on 2025 releases"
    conditions:
      - "'2025' in release"

snappi_tests/ecn/test_ecn_marking_with_pfc_quanta_variance_with_snappi.py:
  skip:
    reason: "Current test case only work with cisco platform"
    conditions:
      - "asic_type not in ['cisco-8000']"

snappi_tests/ecn/test_ecn_marking_with_snappi.py:
  skip:
    reason: "Current test case only work with cisco platform"
    conditions:
      - "asic_type not in ['cisco-8000']"

snappi_tests/ecn/test_red_accuracy_with_snappi:
  skip:
    reason: "Test should not be run as part of nightly. / Snappi test only support on physical tgen testbed"
    conditions_logical_operator: or
    conditions:
      - "topo_type in ['tgen']"
      - "asic_type in ['vs']"

snappi_tests/lacp:
  skip:
    reason: "Skipping dash on 2025 releases"
    conditions:
      - "'2025' in release"

snappi_tests/pfc/test_global_pause_with_snappi.py:
  skip:
    reason: "Global pause is not supported in cisco-8000. / Snappi test only support on physical tgen testbed"
    conditions_logical_operator: and
    conditions:
      - "asic_type in ['cisco-8000', 'vs']"
      - "topo_type in ['t2', 'multidut-tgen']"

snappi_tests/pfcwd/test_pfcwd_actions.py::test_pfcwd_frwd_90_10:
  skip:
    reason: "Forward action is not supported in cisco-8000."
    conditions:
      - "asic_type in ['cisco-8000']"

snappi_tests/pfcwd/test_pfcwd_actions.py::test_pfcwd_frwd_over_subs_40_09:
  skip:
    reason: "Forward action is not supported in cisco-8000."
    conditions:
      - "asic_type in ['cisco-8000']"

snappi_tests/reboot:
  skip:
    reason: "Skipping dash on 2025 releases"
    conditions:
      - "'2025' in release"

#######################################
#####            snmp             #####
#######################################
snmp/test_snmp_default_route.py:
  xfail:
    reason: "xfail for IPv6-only topologies, need add support for IPv6-only"
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/19927 and '-v6-' in topo_name"

snmp/test_snmp_default_route.py::test_snmp_default_route:
  skip:
    reason: "Skipping SNMP test because standalone topology has no default routes."
    conditions:
      - "'standalone' in topo_name"

snmp/test_snmp_link_local.py:
  skip:
    reason: "SNMP over IPv6 support not present in release branches."
    conditions:
      - "is_multi_asic==False"
      - "release in ['202205', '202211', '202305', '202311']"
  xfail:
    reason: "Test script has issues on kvm testbed."
    conditions:
      - "asic_type in ['vs']"
      - "https://github.com/sonic-net/sonic-mgmt/issues/15081"

snmp/test_snmp_lldp.py::test_snmp_lldp:
  skip:
    reason: "ipv6 mgmt ip is not supported"
    conditions:
      - "is_mgmt_ipv6_only==True"

snmp/test_snmp_loopback.py::test_snmp_loopback:
  skip:
    reason: "1. Not supported topology backend.
             2. Skipping SNMP test because standalone topology has no neighbor VMs,
            and SNMP queries will be executed from the neighbor VM."
    conditions_logical_operator: OR
    conditions:
      - "'backend' in topo_name"
      - "'standalone' in topo_name"
  xfail:
    reason: "xfail for IPv6-only topologies, SNMP over IPv6 not supported in single-asic"
    conditions:
      - "'-v6-' in topo_name"

snmp/test_snmp_pfc_counters.py:
  skip:
    reason: "M* topo does not support test_snmp_pfc_counters"
    conditions:
      - "topo_type in ['m0', 'mx', 'm1']"

snmp/test_snmp_phy_entity.py:
  skip:
    reason: "Only supports physical testbed."
    conditions:
      - "asic_type in ['vs']"

snmp/test_snmp_phy_entity.py::test_transceiver_info:
  xfail:
    reason: "Testcase ignored due to github issue: https://github.com/sonic-net/sonic-buildimage/issues/22213"
    conditions:
    - "https://github.com/sonic-net/sonic-buildimage/issues/22213"

snmp/test_snmp_queue.py:
  skip:
    reason: "Interfaces not present on supervisor node or M* topo does not support test_snmp_queue or unsupported platform"
    conditions:
      - "topo_type in ['m0', 'mx', 'm1'] or asic_type in ['barefoot']"

snmp/test_snmp_queue_counters.py:
  skip:
    conditions_logical_operator: OR
    reason: "Have an known issue on kvm testbed / Unsupported in M* topos"
    conditions:
      - "asic_type in ['vs'] and https://github.com/sonic-net/sonic-mgmt/issues/14007"
      - "topo_type in ['m0', 'mx', 'm1']"
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

#######################################
#####            span             #####
#######################################
span:
  skip:
    reason: "Skipping span test on broadcom/cisco-8000 platform."
    conditions:
      - "asic_type in ['broadcom', 'cisco-8000']"

span/test_port_mirroring.py:
  xfail:
    reason: "Testcase ignored on dualtor topology and mellanox setups due to Github issue: https://github.com/sonic-net/sonic-mgmt/issues/9647"
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/9647 and 'dualtor' in topo_name and asic_type in ['mellanox']"

#######################################
#####            srv6             #####
#######################################
srv6/test_srv6_basic_sanity.py:
  skip:
    reason: "It's a new test case, skip it for other topologies except cisco vs nodes and force nodes."
    conditions:
      - topo_name not in ["ciscovs-7nodes", "ciscovs-5nodes", "force10-7nodes"]

srv6/test_srv6_basic_sanity.py::test_traffic_check_normal:
  skip:
    reason: "It's a new test case, skip it for other topologies except cisco vs nodes (SRv6 data plane required)."
    conditions:
      - topo_name not in ["ciscovs-7nodes", "ciscovs-5nodes"]

srv6/test_srv6_dataplane.py:
  skip:
    reason: "Only target mellanox and brcm platform with 202412 image at this time. Skip for non Arista-7060X6-64PE-B-* TH5 SKUs. Skip for t0-isolated-d96u32, t1-isolated-d32/128. Or test case has issue on the t0-isolated-d256u256s2 topo."
    conditions_logical_operator: or
    conditions:
      - "asic_type not in ['mellanox', 'broadcom'] or release not in ['202412']"
      - "'Arista-7060X6-64PE' in hwsku and 'Arista-7060X6-64PE-B' not in hwsku"
      - "topo_name in ['t0-isolated-d96u32s2', 't1-isolated-d128', 't1-isolated-d32']"
      - "'t0-isolated-d256u256s2' in topo_name"

srv6/test_srv6_static_config.py:
  skip:
    reason: "Requires particular image support, skip in PR testing. Skip for non Arista-7060X6-64PE-B-* TH5 SKUs. Skip for t0-isolated-d96u32, t1-isolated-d32/128"
    conditions_logical_operator: or
    conditions:
      - "release not in ['202412']"
      - "'Arista-7060X6-64PE' in hwsku and 'Arista-7060X6-64PE-B' not in hwsku"
      - "topo_name in ['t0-isolated-d96u32s2', 't1-isolated-d128', 't1-isolated-d32']"

srv6/test_srv6_static_config.py::test_uDT46_config:
  skip:
    reason: "Unsupported platform"
    conditions:
      - "asic_type in ['mellanox']"

srv6/test_srv6_vlan_forwarding.py:
  skip:
    reason: "Only target mellanox/brcm platform with 202412 image at this time. Skip for non Arista-7060X6-64PE-B-* TH5 SKUs. Skip for t0-isolated-d96u32, t1-isolated-d32/128"
    conditions_logical_operator: or
    conditions:
      - "asic_type not in ['mellanox', 'broadcom'] or release not in ['202412']"
      - "'Arista-7060X6-64PE' in hwsku and 'Arista-7060X6-64PE-B' not in hwsku"
      - "topo_name in ['t0-isolated-d96u32s2', 't1-isolated-d128', 't1-isolated-d32']"

srv6/test_srv6_vlan_forwarding.py::test_srv6_uN_no_vlan_flooding[False]:
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

#######################################
#####             ssh             #####
#######################################
ssh/test_ssh_default_password:
  skip:
    reason: "Skip because the default password test is no longer appropriate after password rotation."

ssh/test_ssh_stress.py::test_ssh_stress:
  # This test is not stable, skip it for now.
  # known issue: https://github.com/paramiko/paramiko/issues/1508
  skip:
    reason: "This test failed intermittent due to known issue of paramiko, skip for now"
    conditions: https://github.com/paramiko/paramiko/issues/1508

#######################################
#####             stress          #####
#######################################
stress/test_stress_routes.py:
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

#######################################
#####     sub_port_interfaces     #####
#######################################
sub_port_interfaces:
  skip:
    reason: "Unsupported platform or asic and not supported on this DUT topology"
    conditions_logical_operator: or
    conditions:
      - "is_multi_asic==True or asic_gen not in ['td2', 'spc1', 'spc2', 'spc3', 'spc4'] and asic_type not in ['barefoot','marvell-teralynx']"
      - "asic_type in ['mellanox', 'nvidia']"
      - "'dualtor' in topo_name"
      - "hwsku in ['Arista-7050CX3-32S-C32', 'Arista-7060CX-32S-C32','Arista-7060CX-32S-D48C8','Arista-7260CX3-C64','Arista-7260CX3-D108C8','Arista-7260CX3-D108C10']"

sub_port_interfaces/test_show_subinterface.py::test_subinterface_status[port]:
  skip:
    reason: "Unsupported platform or asic"
    conditions_logical_operator: or
    conditions:
      - "asic_type in ['vs'] and https://github.com/sonic-net/sonic-buildimage/issues/19735"
      - "is_multi_asic==True or asic_gen not in ['td2', 'spc1', 'spc2', 'spc3', 'spc4'] and asic_type not in ['barefoot','marvell-teralynx']"

sub_port_interfaces/test_show_subinterface.py::test_subinterface_status[port_in_lag]:
  skip:
    reason: "Not supported port type"

sub_port_interfaces/test_sub_port_interfaces.py::TestSubPorts::test_routing_between_sub_ports_unaffected_by_sub_ports_removal[port_in_lag:
  skip:
    reason: "Not supported port type"

sub_port_interfaces/test_sub_port_interfaces.py::TestSubPorts::test_tunneling_between_sub_ports:
  skip:
    reason: "Cisco 8000 platform does not support DSCP PIPE Mode for IPinIP Tunnels / Unsupported platform or asic"
    conditions_logical_operator: or
    conditions:
      - "asic_type=='cisco-8000'"
      - "is_multi_asic==True or asic_gen not in ['td2', 'spc1', 'spc2', 'spc3', 'spc4'] and asic_type not in ['barefoot','marvell-teralynx']"

sub_port_interfaces/test_sub_port_interfaces.py::TestSubPorts::test_untagged_packet_not_routed[port_in_lag] :
  skip:
    reason: "Not supported port type"

sub_port_interfaces/test_sub_port_l2_forwarding.py::test_sub_port_l2_forwarding[port_in_lag]:
  skip:
    reason: "Not supported port type"

#######################################
#####             syslog          #####
#######################################
syslog/test_logrotate.py::test_orchagent_logrotate:
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

syslog/test_syslog.py:
  xfail:
    reason: "Generic internal image issue"
    conditions:
      - "branch in ['internal-202012']"
      - "build_version.split('.')[1].isdigit() and int(build_version.split('.')[1]) <= 33"

syslog/test_syslog_source_ip.py:
  skip:
    reason: "Vs setup doesn't work when creating mgmt vrf"
    conditions_logical_operator: or
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/16997"
      - "asic_type in ['vs']"

syslog/test_syslog_source_ip.py::TestSSIP::test_syslog_protocol_filter_severity:
  skip:
    reason: "Testcase consistent failed, raised issue to track / Vs setup doesn't work when creating mgmt vrf"
    conditions_logical_operator: or
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/16997"
      - "https://github.com/sonic-net/sonic-mgmt/issues/14493"
      - "asic_type in ['vs']"

#######################################
#####         system_health       #####
#######################################
system_health/test_system_health.py:
  skip:
    reason: "There is no table SYSTEM_HEALTH_INFO in STATE_DB on kvm testbed, skip in PR testing"
    conditions:
      - "asic_type in ['vs']"

system_health/test_system_health.py::test_service_checker_with_process_exit:
  xfail:
    strict: True
    conditions:
      - "branch in ['internal-202012']"
      - "build_version.split('.')[1].isdigit() and int(build_version.split('.')[1]) <= 44"

#######################################
#####           tacacs          #####
#######################################
tacacs/test_accounting.py:
  xfail:
    reason: "Testcase ignored due to Github issue: https://github.com/sonic-net/sonic-mgmt/issues/20452"
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/20452 and asic_type in ['mellanox']"

tacacs/test_authorization.py::test_authorization_tacacs_and_local:
  skip:
    reason: "Testcase ignored due to Github issue: https://github.com/sonic-net/sonic-mgmt/issues/11349"
    conditions:
      - https://github.com/sonic-net/sonic-mgmt/issues/11349

tacacs/test_ro_disk.py:
  skip:
    reason: "Testcase skip due to Github issue: https://github.com/sonic-net/sonic-mgmt/issues/20787"
    conditions:
      - https://github.com/sonic-net/sonic-mgmt/issues/20787

#######################################
#####           telemetry         #####
#######################################
telemetry/test_events.py:
  skip:
    reason: "Skip telemetry test events for 202211 and older branches"
    conditions:
      - "release in ['201811', '201911', '202012', '202205', '202211']"
  xfail:
    reason: "Test events is flaky in PR test, xfail until issue resolved"
    conditions:
      - "asic_type in ['vs']"
      - https://github.com/sonic-net/sonic-buildimage/issues/19943

telemetry/test_events.py::test_events:
  skip:
    reason: "dut ipv6 mgmt ip not supported"
    conditions_logical_operator: and
    conditions:
      - "is_mgmt_ipv6_only==True"
      - "https://github.com/sonic-net/sonic-mgmt/issues/20395"

telemetry/test_telemetry.py:
  skip:
    reason: "Skip telemetry test for 201911 and older branches"
    conditions:
      - "(is_multi_asic==True) and (release in ['201811', '201911'])"

telemetry/test_telemetry.py::test_osbuild_version:
  skip:
    reason: "dut ipv6 mgmt ip not supported"
    conditions:
      - "is_mgmt_ipv6_only==True"
      - "https://github.com/sonic-net/sonic-mgmt/issues/20395"

telemetry/test_telemetry.py::test_sysuptime:
  skip:
    reason: "dut ipv6 mgmt ip not supported"
    conditions:
      - "is_mgmt_ipv6_only==True"
      - "https://github.com/sonic-net/sonic-mgmt/issues/20395"

telemetry/test_telemetry.py::test_telemetry_ouput:
  skip:
    reason: "dut ipv6 mgmt ip not supported"
    conditions:
      - "is_mgmt_ipv6_only==True"
      - "https://github.com/sonic-net/sonic-mgmt/issues/20395"

telemetry/test_telemetry.py::test_telemetry_queue_buffer_cnt:
  skip:
    conditions_logical_operator: or
    reason: "Testcase ignored due to switch type is voq / Unsupported in M* topos / multi-asic issue 15393"
    conditions:
      - "(switch_type=='voq')"
      - "topo_type in ['m0', 'mx', 'm1']"
      - "(is_multi_asic==True) and https://github.com/sonic-net/sonic-mgmt/issues/15393"
      - "is_mgmt_ipv6_only==True and https://github.com/sonic-net/sonic-mgmt/issues/20395"

telemetry/test_telemetry.py::test_virtualdb_table_streaming:
  skip:
    reason: "dut ipv6 mgmt ip not supported"
    conditions:
      - "is_mgmt_ipv6_only==True"
      - "https://github.com/sonic-net/sonic-mgmt/issues/20395"

telemetry/test_telemetry_cert_rotation.py::test_telemetry_cert_rotate:
  skip:
    reason: "dut ipv6 mgmt ip not supported"
    conditions:
      - "is_mgmt_ipv6_only==True"
      - "https://github.com/sonic-net/sonic-mgmt/issues/20395"

telemetry/test_telemetry_cert_rotation.py::test_telemetry_post_cert_add:
  skip:
    reason: "dut ipv6 mgmt ip not supported"
    conditions:
      - "is_mgmt_ipv6_only==True"
      - "https://github.com/sonic-net/sonic-mgmt/issues/20395"

telemetry/test_telemetry_cert_rotation.py::test_telemetry_post_cert_del:
  skip:
    reason: "dut ipv6 mgmt ip not supported"
    conditions:
      - "is_mgmt_ipv6_only==True"
      - "https://github.com/sonic-net/sonic-mgmt/issues/20395"

telemetry/test_telemetry_poll.py::test_poll_mode_default_route:
  skip:
    reason: "dut ipv6 mgmt ip not supported"
    conditions:
      - "is_mgmt_ipv6_only==True"
      - "https://github.com/sonic-net/sonic-mgmt/issues/20395"

telemetry/test_telemetry_poll.py::test_poll_mode_delete:
  skip:
    reason: "dut ipv6 mgmt ip not supported"
    conditions:
      - "is_mgmt_ipv6_only==True"
      - "https://github.com/sonic-net/sonic-mgmt/issues/20395"

telemetry/test_telemetry_poll.py::test_poll_mode_no_table_or_key:
  skip:
    reason: "dut ipv6 mgmt ip not supported"
    conditions:
      - "is_mgmt_ipv6_only==True"
      - "https://github.com/sonic-net/sonic-mgmt/issues/20395"

telemetry/test_telemetry_poll.py::test_poll_mode_present_table_delayed_key:
  skip:
    reason: "dut ipv6 mgmt ip not supported"
    conditions:
      - "is_mgmt_ipv6_only==True"
      - "https://github.com/sonic-net/sonic-mgmt/issues/20395"

#######################################
#####           nbr               #####
#######################################
test_nbr_health.py:
  xfail:
    reason: "Test case has issue on the t0-isolated-d256u256s2 topo."
    conditions:
      - "'t0-isolated-d256u256s2' in topo_name"

#######################################
#####         pktgen              #####
#######################################
test_pktgen.py:
  skip:
    reason: "No need in M0/Mx/M1"
    conditions:
      - "topo_type in ['m0', 'mx', 'm1']"

#######################################
#####         vs_chassis          #####
#######################################
test_vs_chassis_setup.py:
  skip:
    reason: "Skip vs_chassis setup on non-vs testbeds"
    conditions:
      - "asic_type not in ['vs']"

#######################################
#####         upgrade_path        #####
#######################################
upgrade_path:
  skip:
    reason: "Upgrade path test needs base and target image lists, currently do not support on KVM."
    conditions:
      - "asic_type in ['vs']"

upgrade_path/test_multi_hop_upgrade_path.py:
  skip:
    reason: "Only supported on T0 topology"
    conditions:
      - "'t0' not in topo_type"

upgrade_path/test_upgrade_path.py::test_upgrade_path_t2:
  skip:
    reason: "Only supported on T2 topology"
    conditions:
      - "'t2' not in topo_type"

#######################################
#####            vlan             #####
#######################################
vlan/test_vlan.py::test_vlan_tc7_tagged_qinq_switch_on_outer_tag:
  skip:
    reason: "Unsupported platform."
    conditions:
      - "asic_type not in ['mellanox', 'barefoot', 'cisco-8000']"

vlan/test_vlan_ping.py:
  skip:
    reason: "test_vlan_ping doesn't work on Broadcom platform. Ignored on dualtor topo and mellanox setups due to Github issue: https://github.com/sonic-net/sonic-mgmt/issues/9642."
    conditions_logical_operator: OR
    conditions:
      - "asic_type in ['broadcom']"
      - "https://github.com/sonic-net/sonic-mgmt/issues/15061 and 'dualtor-aa' in topo_name"

#######################################
#####             voq             #####
#######################################
voq:
  skip:
    reason: "Cisco 8800 doesn't support voq tests and not supported on this DUT topology"
    conditions_logical_operator: or
    conditions:
      - "asic_type in ['cisco-8000']"
      - "'t2' not in topo_name"

voq/test_fabric_cli_and_db.py:
  skip:
    reason: "Skip test_fabric_cli_and_db on unsupported testbed."
    conditions_logical_operator: "OR"
    conditions:
      - "('t2' not in topo_name)"
      - "(asic_subtype not in ['broadcom-dnx'])"
      - "not any(i in platform for i in ['arista_7800', 'x86_64-nokia_ixr7250e'])"
      - "(asic_type in ['cisco-8000'])"

voq/test_fabric_reach.py:
  skip:
    reason: "Skip test_fabric_reach on unsupported testbed."
    conditions_logical_operator: "OR"
    conditions:
      - "('t2' not in topo_name)"
      - "(asic_subtype not in ['broadcom-dnx'])"
      - "not any(i in platform for i in ['arista_7800', 'x86_64-nokia_ixr7250e'])"
      - "(asic_type in ['cisco-8000'])"

voq/test_voq_counter.py::TestVoqCounter::test_voq_queue_counter[multi_dut_shortlink_to_longlink]:
  skip:
    reason: "Testcase ignored due to sonic-mgmt issue: https://github.com/sonic-net/sonic-buildimage/issues/21098"
    conditions:
      - "(switch_type=='voq')"
      - "('t2' in topo_name)"

voq/test_voq_counter.py::test_voq_drop_counter:
  skip:
    reason: "Testcase ignored due to sonic-mgmt issue: https://github.com/sonic-net/sonic-mgmt/issues/16140"
    conditions:
      - "('t2' in topo_name)"

voq/test_voq_counter.py::test_voq_queue_counter:
  skip:
    reason: "Skip test_voq_queue_counter for non broadcom-dnx 't2' platforms."
    conditions:
      - "('t2' not in topo_name)"
      - "(asic_subtype not in ['broadcom-dnx'])"

voq/test_voq_fabric_capacity.py:
  skip:
    reason: "Skip test_voq_fabric_capacity on unsupported testbed."
    conditions_logical_operator: "OR"
    conditions:
      - "('t2' not in topo_name)"
      - "(asic_subtype not in ['broadcom-dnx'])"
      - "(type in ['UpperSpineRouter'])"
      - "(asic_type in ['cisco-8000'])"

voq/test_voq_fabric_isolation.py:
  skip:
    reason: "Skip test_voq_fabric_isolation on unsupported testbed."
    conditions_logical_operator: "OR"
    conditions:
      - "('t2' not in topo_name)"
      - "(asic_subtype not in ['broadcom-dnx'])"
      - "(type in ['UpperSpineRouter'])"
      - "(asic_type in ['cisco-8000'])"

voq/test_voq_fabric_status_all.py:
  skip:
    reason: "Skip test_voq_fabric_status_all on unsupported testbed."
    conditions_logical_operator: "OR"
    conditions:
      - "('t2' not in topo_name)"
      - "(asic_subtype not in ['broadcom-dnx'])"
      - "not any(i in platform for i in ['arista_7800', 'x86_64-nokia_ixr7250e'])"
      - "(asic_type in ['cisco-8000'])"

#######################################
#####             vrf             #####
#######################################
vrf/test_vrf.py:
  skip:
    reason: "Vrf tests are skipped in PR testing, not supported on mellanox and nvidia asic from 202411 and later, not support for non t0 topology currently"
    conditions_logical_operator: or
    conditions:
      - "asic_type in ['vs', 'mellanox', 'nvidia']"
      - "topo_type not in ['t0']"

vrf/test_vrf.py::TestVrfAclRedirect:
  skip:
    reason: "Switch does not support ACL REDIRECT_ACTION."
    conditions_logical_operator: or
    conditions:
      - "'switch' in vars() and len([capabilities for capabilities in switch.values() if 'REDIRECT_ACTION' in capabilities]) == 0"
      - "asic_type in ['vs']"

vrf/test_vrf.py::TestVrfWarmReboot::test_vrf_swss_warm_reboot:
  skip:
    reason: "Dualtor topology doesn't support advanced-reboot"
    conditions:
      - "topo_name in ['dualtor', 'dualtor-56', 'dualtor-120', 'dualtor-aa', 'dualtor-aa-56', 'dualtor-aa-64-breakout']"

vrf/test_vrf.py::TestVrfWarmReboot::test_vrf_system_warm_reboot:
  skip:
    reason: "Dualtor topology doesn't support advanced-reboot"
    conditions:
      - "topo_name in ['dualtor', 'dualtor-56', 'dualtor-120', 'dualtor-aa', 'dualtor-aa-56', 'dualtor-aa-64-breakout']"

vrf/test_vrf_attr.py:
  skip:
    reason: "Vrf tests are skipped in PR testing, not supported on mellanox and nvidia asic from 202411 and later, not support for non t0 topology currently"
    conditions_logical_operator: or
    conditions:
      - "asic_type in ['vs', 'mellanox', 'nvidia']"
      - "topo_type not in ['t0']"

vrf/test_vrf_attr.py::TestVrfAttrSrcMac::test_vrf1_neigh_with_default_router_mac:
  skip:
    reason: "RIF MAC taking precedence over VRF MAC / Vrf test are skipped in PR testing."
    conditions:
      - "asic_type in ['barefoot', 'vs']"

#######################################
#####           vxlan            #####
#######################################
vxlan/test_vnet_bgp_route_precedence.py:
  skip:
    reason: "test_vnet_bgp_route_precedence can only run on cisco and mnlx platforms. Also skip in 202411"
    conditions_logical_operator: or
    conditions:
      - "asic_type not in ['cisco-8000', 'mellanox']"
      - "release in ['202411']"
  xfail:
    reason: "Testcase ignored due to github issue: https://github.com/sonic-net/sonic-buildimage/issues/23824"
    conditions:
      - "https://github.com/sonic-net/sonic-buildimage/issues/23824"

vxlan/test_vnet_route_leak.py:
  skip:
    reason: "Test skipped due to issue #8374"
    conditions:
      - https://github.com/sonic-net/sonic-mgmt/issues/8374

vxlan/test_vnet_vxlan.py:
  skip:
    reason: "1. Enable tests only for: mellanox, barefoot
             2. Test skipped due to issue #8374"
    conditions_logical_operator: OR
    conditions:
      - "asic_type not in ['mellanox', 'barefoot', 'vs']"
      - https://github.com/sonic-net/sonic-mgmt/issues/8374

vxlan/test_vxlan_bfd_tsa.py:
  skip:
    reason: "VxLAN ECMP BFD TSA test is not yet supported on multi-ASIC platform. Also this test can only run on some platforms."
    conditions:
      - "(is_multi_asic == True) or (platform not in ['x86_64-8102_64h_o-r0', 'x86_64-8101_32fh_o-r0', 'x86_64-mlnx_msn4600c-r0', 'x86_64-mlnx_msn2700-r0', 'x86_64-mlnx_msn2700a1-r0', 'x86_64-kvm_x86_64-r0', 'x86_64-mlnx_msn4700-r0', 'x86_64-nvidia_sn4280-r0', 'x86_64-8102_28fh_dpu_o-r0'])"

vxlan/test_vxlan_bfd_tsa.py::Test_VxLAN_BFD_TSA::test_tsa_case4:
  skip:
    reason: "VxLAN ECMP BFD TSA test is not yet supported on multi-ASIC platform. Also this test can only run on 4600c, 2700 and 8102. For KVM platform, this test is not supported due to system check not supported currently."
    conditions_logical_operator: OR
    conditions:
      - "(is_multi_asic == True) or (platform not in ['x86_64-8102_64h_o-r0', 'x86_64-8101_32fh_o-r0', 'x86_64-mlnx_msn4600c-r0', 'x86_64-mlnx_msn2700-r0', 'x86_64-mlnx_msn2700a1-r0', 'x86_64-kvm_x86_64-r0', 'x86_64-mlnx_msn4700-r0', 'x86_64-nvidia_sn4280-r0', 'x86_64-8102_28fh_dpu_o-r0'])"
      - "(asic_type in ['vs']) and https://github.com/sonic-net/sonic-buildimage/issues/19879"
  xfail:
    reason: "Skipped due to github issue https://github.com/sonic-net/sonic-buildimage/issues/22615"
    conditions_logical_operator: OR
    conditions:
      - "https://github.com/sonic-net/sonic-buildimage/issues/22615 and 'sn2' in platform"
      - "https://github.com/sonic-net/sonic-buildimage/issues/22615 and 'sn4280' in platform"

vxlan/test_vxlan_bfd_tsa.py::Test_VxLAN_BFD_TSA::test_tsa_case5:
  skip:
    reason: "VxLAN ECMP BFD TSA test is not yet supported on multi-ASIC platform. Also this test can only run on 4600c, 2700 and 8102. For KVM platform, this test is not supported due to system check not supported currently."
    conditions_logical_operator: OR
    conditions:
      - "(is_multi_asic == True) or (platform not in ['x86_64-8102_64h_o-r0', 'x86_64-8101_32fh_o-r0', 'x86_64-mlnx_msn4600c-r0', 'x86_64-mlnx_msn2700-r0', 'x86_64-mlnx_msn2700a1-r0', 'x86_64-kvm_x86_64-r0', 'x86_64-mlnx_msn4700-r0', 'x86_64-nvidia_sn4280-r0', 'x86_64-8102_28fh_dpu_o-r0'])"
      - "(asic_type in ['vs']) and https://github.com/sonic-net/sonic-buildimage/issues/19879"
  xfail:
    reason: "Skipped due to github issue https://github.com/sonic-net/sonic-buildimage/issues/22615"
    conditions_logical_operator: OR
    conditions:
      - "https://github.com/sonic-net/sonic-buildimage/issues/22615 and 'sn2' in platform"
      - "https://github.com/sonic-net/sonic-buildimage/issues/22615 and 'sn4280' in platform"

vxlan/test_vxlan_bfd_tsa.py::Test_VxLAN_BFD_TSA::test_tsa_case6:
  skip:
    reason: "VxLAN ECMP BFD TSA test is not yet supported on multi-ASIC platform. Also this test can only run on 4600c, 2700 and 8102. For KVM platform, this test is not supported due to system check not supported currently."
    conditions_logical_operator: OR
    conditions:
      - "(is_multi_asic == True) or (platform not in ['x86_64-8102_64h_o-r0', 'x86_64-8101_32fh_o-r0', 'x86_64-mlnx_msn4600c-r0', 'x86_64-mlnx_msn2700-r0', 'x86_64-mlnx_msn2700a1-r0', 'x86_64-kvm_x86_64-r0', 'x86_64-mlnx_msn4700-r0', 'x86_64-nvidia_sn4280-r0', 'x86_64-8102_28fh_dpu_o-r0'])"
      - "(asic_type in ['vs']) and https://github.com/sonic-net/sonic-buildimage/issues/19879"
  xfail:
    reason: "Skipped due to github issue https://github.com/sonic-net/sonic-buildimage/issues/22615"
    conditions_logical_operator: OR
    conditions:
      - "https://github.com/sonic-net/sonic-buildimage/issues/22615 and 'sn2' in platform"
      - "https://github.com/sonic-net/sonic-buildimage/issues/22615 and 'sn4280' in platform"

vxlan/test_vxlan_crm.py:
  skip:
    reason: "VxLAN crm test is not yet supported on multi-ASIC platform. Also this test can only run on some platforms."
    conditions:
      - "(is_multi_asic == True) or (platform not in ['x86_64-8102_64h_o-r0', 'x86_64-8101_32fh_o-r0', 'x86_64-mlnx_msn4600c-r0', 'x86_64-mlnx_msn2700-r0', 'x86_64-mlnx_msn2700a1-r0', 'x86_64-kvm_x86_64-r0', 'x86_64-mlnx_msn4700-r0', 'x86_64-nvidia_sn4280-r0', 'x86_64-8102_28fh_dpu_o-r0'])"

vxlan/test_vxlan_crm.py::Test_VxLAN_Crm::test_crm_128_group_members[v4_in_v6]:
  skip:
    reason: "VxLAN crm test is not yet supported on multi-ASIC platform. Also this test can only run on some platforms. On Mellanox spc1 platform, due to HW limitation, vxlan ipv6 tunnel is not supported"
    conditions_logical_operator: OR
    conditions:
      - "(is_multi_asic == True) or (platform not in ['x86_64-8102_64h_o-r0', 'x86_64-8101_32fh_o-r0', 'x86_64-mlnx_msn4600c-r0', 'x86_64-mlnx_msn2700-r0', 'x86_64-mlnx_msn2700a1-r0', 'x86_64-kvm_x86_64-r0', 'x86_64-mlnx_msn4700-r0', 'x86_64-nvidia_sn4280-r0', 'x86_64-8102_28fh_dpu_o-r0'])"
      - "asic_gen == 'spc1'"

vxlan/test_vxlan_crm.py::Test_VxLAN_Crm::test_crm_128_group_members[v6_in_v6]:
  skip:
    reason: "VxLAN crm test is not yet supported on multi-ASIC platform. Also this test can only run on some platforms. On Mellanox spc1 platform, due to HW limitation, vxlan ipv6 tunnel is not supported"
    conditions_logical_operator: OR
    conditions:
      - "(is_multi_asic == True) or (platform not in ['x86_64-8102_64h_o-r0', 'x86_64-8101_32fh_o-r0', 'x86_64-mlnx_msn4600c-r0', 'x86_64-mlnx_msn2700-r0', 'x86_64-mlnx_msn2700a1-r0', 'x86_64-kvm_x86_64-r0', 'x86_64-mlnx_msn4700-r0', 'x86_64-nvidia_sn4280-r0', 'x86_64-8102_28fh_dpu_o-r0'])"
      - "asic_gen == 'spc1'"

vxlan/test_vxlan_crm.py::Test_VxLAN_Crm::test_crm_16k_routes[v4_in_v6]:
  skip:
    reason: "VxLAN crm test is not yet supported on multi-ASIC platform. Also this test can only run on some platforms. On Mellanox spc1 platform, due to HW limitation, vxlan ipv6 tunnel is not supported"
    conditions_logical_operator: OR
    conditions:
      - "(is_multi_asic == True) or (platform not in ['x86_64-8102_64h_o-r0', 'x86_64-8101_32fh_o-r0', 'x86_64-mlnx_msn4600c-r0', 'x86_64-mlnx_msn2700-r0', 'x86_64-mlnx_msn2700a1-r0', 'x86_64-kvm_x86_64-r0', 'x86_64-mlnx_msn4700-r0', 'x86_64-nvidia_sn4280-r0', 'x86_64-8102_28fh_dpu_o-r0'])"
      - "asic_gen == 'spc1'"

vxlan/test_vxlan_crm.py::Test_VxLAN_Crm::test_crm_16k_routes[v6_in_v6]:
  skip:
    reason: "VxLAN crm test is not yet supported on multi-ASIC platform. Also this test can only run on some platforms. On Mellanox spc1 platform, due to HW limitation, vxlan ipv6 tunnel is not supported"
    conditions_logical_operator: OR
    conditions:
      - "(is_multi_asic == True) or (platform not in ['x86_64-8102_64h_o-r0', 'x86_64-8101_32fh_o-r0', 'x86_64-mlnx_msn4600c-r0', 'x86_64-mlnx_msn2700-r0', 'x86_64-mlnx_msn2700a1-r0', 'x86_64-kvm_x86_64-r0', 'x86_64-mlnx_msn4700-r0', 'x86_64-nvidia_sn4280-r0', 'x86_64-8102_28fh_dpu_o-r0'])"
      - "asic_gen == 'spc1'"

vxlan/test_vxlan_crm.py::Test_VxLAN_Crm::test_crm_512_nexthop_groups[v4_in_v6]:
  skip:
    reason: "VxLAN crm test is not yet supported on multi-ASIC platform. Also this test can only run on some platforms. On Mellanox spc1 platform, due to HW limitation, vxlan ipv6 tunnel is not supported"
    conditions_logical_operator: OR
    conditions:
      - "(is_multi_asic == True) or (platform not in ['x86_64-8102_64h_o-r0', 'x86_64-8101_32fh_o-r0', 'x86_64-mlnx_msn4600c-r0', 'x86_64-mlnx_msn2700-r0', 'x86_64-mlnx_msn2700a1-r0', 'x86_64-kvm_x86_64-r0', 'x86_64-mlnx_msn4700-r0', 'x86_64-nvidia_sn4280-r0', 'x86_64-8102_28fh_dpu_o-r0'])"
      - "asic_gen == 'spc1'"

vxlan/test_vxlan_crm.py::Test_VxLAN_Crm::test_crm_512_nexthop_groups[v6_in_v6]:
  skip:
    reason: "VxLAN crm test is not yet supported on multi-ASIC platform. Also this test can only run on some platforms. On Mellanox spc1 platform, due to HW limitation, vxlan ipv6 tunnel is not supported"
    conditions_logical_operator: OR
    conditions:
      - "(is_multi_asic == True) or (platform not in ['x86_64-8102_64h_o-r0', 'x86_64-8101_32fh_o-r0', 'x86_64-mlnx_msn4600c-r0', 'x86_64-mlnx_msn2700-r0', 'x86_64-mlnx_msn2700a1-r0', 'x86_64-kvm_x86_64-r0', 'x86_64-mlnx_msn4700-r0', 'x86_64-nvidia_sn4280-r0', 'x86_64-8102_28fh_dpu_o-r0'])"
      - "asic_gen == 'spc1'"

vxlan/test_vxlan_decap.py:
  skip:
    reason: "vxlan support not available for cisco-8122 platforms. Not required on isolated topologies d256u256s2, d96u32s2, d448u15-lag, and d128, as well as their minimzed and -v6 variants."
    conditions_logical_operator: OR
    conditions:
      - "platform in ['x86_64-8122_64eh_o-r0', 'x86_64-8122_64ehf_o-r0']"
      - *noVxlanTopos
  xfail:
    reason: "Skipped due to bug https://github.com/sonic-net/sonic-buildimage/issues/22056"
    conditions:
      - "topo_name in ['t0-isolated-d16u16s1','t0-isolated-d32u32s2'] and https://github.com/sonic-net/sonic-buildimage/issues/22056"

vxlan/test_vxlan_ecmp.py:
  skip:
    reason: "VxLAN ECMP test is not yet supported on multi-ASIC platform. Also this test can only run on some platforms."
    conditions:
      - "(is_multi_asic == True) or (platform not in ['x86_64-8102_64h_o-r0', 'x86_64-8101_32fh_o-r0', 'x86_64-mlnx_msn4600c-r0', 'x86_64-mlnx_msn2700-r0', 'x86_64-mlnx_msn2700a1-r0', 'x86_64-kvm_x86_64-r0', 'x86_64-mlnx_msn4700-r0', 'x86_64-nvidia_sn4280-r0', 'x86_64-8102_28fh_dpu_o-r0'])"

vxlan/test_vxlan_ecmp_switchover.py:
  skip:
    reason: "VxLAN ECMP switchover test is not yet supported on multi-ASIC platform. Also this test can only run on some platforms."
    conditions:
      - "(is_multi_asic == True) or (platform not in ['x86_64-8102_64h_o-r0', 'x86_64-8101_32fh_o-r0', 'x86_64-mlnx_msn4600c-r0', 'x86_64-mlnx_msn2700-r0', 'x86_64-mlnx_msn2700a1-r0', 'x86_64-kvm_x86_64-r0', 'x86_64-mlnx_msn4700-r0', 'x86_64-nvidia_sn4280-r0', 'x86_64-8102_28fh_dpu_o-r0'])"

vxlan/test_vxlan_ecmp_vnet_ping.py:
  skip:
    reason: "Skip for AI backend, as this feature is not been used"
    conditions:
      - "'t1-isolated' in topo_name"

vxlan/test_vxlan_multi_tunnel.py:
  skip:
    reason: "VxLAN multi-tunnel test is not yet supported on multi-ASIC platform. Also this test can only run on some platforms."
    conditions:
      - "(is_multi_asic == True) or (platform not in ['x86_64-8102_64h_o-r0', 'x86_64-8101_32fh_o-r0', 'x86_64-mlnx_msn4600c-r0', 'x86_64-kvm_x86_64-r0', 'x86_64-mlnx_msn4700-r0', 'x86_64-nvidia_sn4280-r0', 'x86_64-8102_28fh_dpu_o-r0'])"

vxlan/test_vxlan_route_advertisement.py:
  skip:
    reason: "VxLAN route advertisement can only run on cisco , mnlx and marvell-teralynx platforms. "
    conditions:
      - "asic_type not in ['cisco-8000', 'mellanox' , 'marvell-teralynx' , 'vs']"

vxlan/test_vxlan_route_advertisement.py::Test_VxLAN_route_Advertisement::test_basic_route_advertisement[v4_in_v4]:
  xfail:
    reason: "xfail for IPv6-only topologies, need to add support for IPv6-only - https://github.com/sonic-net/sonic-mgmt/issues/20725"
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/20725 and '-v6-' in topo_name"

vxlan/test_vxlan_route_advertisement.py::Test_VxLAN_route_Advertisement::test_basic_route_advertisement_with_community[v4_in_v4]:
  xfail:
    reason: "xfail for IPv6-only topologies, need to add support for IPv6-only - https://github.com/sonic-net/sonic-mgmt/issues/20725"
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/20725 and '-v6-' in topo_name"

vxlan/test_vxlan_route_advertisement.py::Test_VxLAN_route_Advertisement::test_basic_route_advertisement_with_community_change[v4_in_v4]:
  xfail:
    reason: "xfail for IPv6-only topologies, need to add support for IPv6-only - https://github.com/sonic-net/sonic-mgmt/issues/20725"
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/20725 and '-v6-' in topo_name"

vxlan/test_vxlan_route_advertisement.py::Test_VxLAN_route_Advertisement::test_route_advertisement_without_and_with_community[v4_in_v4]:
  xfail:
    reason: "xfail for IPv6-only topologies, need to add support for IPv6-only - https://github.com/sonic-net/sonic-mgmt/issues/20725"
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/20725 and '-v6-' in topo_name"

vxlan/test_vxlan_route_advertisement.py::Test_VxLAN_route_Advertisement::test_scale_route_advertisement_with_community[v4_in_v4]:
  xfail:
    reason: "xfail for IPv6-only topologies, need to add support for IPv6-only - https://github.com/sonic-net/sonic-mgmt/issues/20725"
    conditions:
      - "https://github.com/sonic-net/sonic-mgmt/issues/20725 and '-v6-' in topo_name"

#######################################
#####           wan_lacp          #####
#######################################
wan/lacp/test_wan_lag_min_link.py::test_lag_min_link:
  skip:
    reason: "Skip test due to there isn't enough port channel or members exists in current topology."
    conditions_logical_operator: OR
    conditions:
      - "len(minigraph_portchannels) < 2"
      - "not any(len(v['members']) > 1 for _, v in minigraph_portchannels.items())"

#######################################
#####             wol            #####
#######################################
wol:
  skip:
    reason: "Not supported on this DUT topology"
    conditions:
      - "topo_type not in ['mx', 'm0']"

#######################################
#####             zmq             #####
#######################################
zmq/test_gnmi_zmq.py:
  skip:
    reason: "Test is for smartswitch"
    conditions_logical_operator: or
    conditions:
      - "'arista' in platform"
      - "'isolated' in topo_name"

zmq/test_gnmi_zmq.py::test_gnmi_zmq:
  skip:
    reason: "dut ipv6 mgmt ip not supported"
    conditions:
      - "is_mgmt_ipv6_only==True"
      - "https://github.com/sonic-net/sonic-mgmt/issues/20395"
