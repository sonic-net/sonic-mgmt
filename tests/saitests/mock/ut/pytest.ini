# pytest configuration for unit tests
# Requirements: pip install pytest-order pytest-cov
#
# Usage:
#   Full output:  pytest .
#   Quiet mode:   pytest . -q
#   Specific test: pytest test_executor_registry.py

[pytest]
testpaths = .
python_files = test_*.py
python_classes = Test*
python_functions = test_*
# Auto-enable coverage with branch tracking and reports
# --cache-clear: Clear pytest cache before run (prevents stale .pyc issues)
addopts =
    -v -s
    --cache-clear
    --cov=../../probe
    --cov-branch
    --cov-report=html:htmlcov
    --cov-report=term-missing

[coverage:run]
# Measure coverage for all modules in probe directory
source = ../../probe
omit =
    */tests/*
    */test_*.py
    */__pycache__/*
    */conftest.py

[coverage:report]
# Coverage reporting settings
precision = 2
show_missing = True
skip_covered = False

[coverage:html]
directory = htmlcov
