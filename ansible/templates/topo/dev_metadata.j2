  <DeviceInfos>
    <DeviceInfo>
      <AutoNegotiation>true</AutoNegotiation>
      <EthernetInterfaces xmlns:a="http://schemas.datacontract.org/2004/07/Microsoft.Search.Autopilot.Evolution">
{% set num_of_intf = port_alias | length %}
{% for index in range(num_of_intf) %}
        <a:EthernetInterface>
          <ElementType>DeviceInterface</ElementType>
          <AlternateSpeeds i:nil="true"/>
          <EnableAutoNegotiation>true</EnableAutoNegotiation>
          <EnableFlowControl>true</EnableFlowControl>
          <Index>1</Index>
          <InterfaceName>{{ port_alias[index] }}</InterfaceName>
          <InterfaceType i:nil="true"/>
          <MultiPortsInterface>false</MultiPortsInterface>
          <PortName>0</PortName>
          <Priority>0</Priority>
          <Speed>{{ iface_speed }}</Speed>
        </a:EthernetInterface>
{% endfor %}
      </EthernetInterfaces>
      <FlowControl>true</FlowControl>
      <Height>0</Height>
      <HwSku>{{ hwsku }}</HwSku> 
      <ManagementInterfaces/>
    </DeviceInfo> 
  </DeviceInfos>
  <MetadataDeclaration>
{% set syslog_servers_str=';'.join(syslog_servers) %}
{% set dhcp_servers_str=';'.join(dhcp_servers) %}
{% set forced_mgmt_routes_str = ';'.join(forced_mgmt_routes)  %}
{% set ntp_servers_str = ';'.join(ntp_servers) %}
{% set snmp_servers_str = ';'.join(snmp_servers) %}
{% set tacacs_servers_str = ';'.join(tacacs_servers) %}
{% set radius_servers_str = ';'.join(radius_servers) %}
{% set erspan_dest_str = ';'.join(erspan_dest) %}
    <Devices xmlns:a="http://schemas.datacontract.org/2004/07/Microsoft.Search.Autopilot.Evolution">
      <a:DeviceMetadata>
        <a:Name>{{ inventory_hostname }}</a:Name>
        <a:Properties>
          <a:DeviceProperty>
            <a:Name>DhcpResources</a:Name>
            <a:Reference i:nil="true"/>
            <a:Value>{{ dhcp_servers_str }}</a:Value>
          </a:DeviceProperty>
          <a:DeviceProperty>
            <a:Name>NtpResources</a:Name>
            <a:Reference i:nil="true"/>
            <a:Value>{{ ntp_servers_str }}</a:Value>
          </a:DeviceProperty>
          <a:DeviceProperty>
            <a:Name>DeploymentId</a:Name>
            <a:Reference i:nil="true"/>
            <a:Value>1</a:Value>
          </a:DeviceProperty>
          <a:DeviceProperty>
            <a:Name>QosProfile</a:Name>
            <a:Reference i:nil="true"/>
            <a:Value>Profile0</a:Value>
          </a:DeviceProperty>
          <a:DeviceProperty>
            <a:Name>RadiusResources</a:Name>
            <a:Reference i:nil="true"/>
            <a:Value>{{ radius_servers_str }}</a:Value>
          </a:DeviceProperty>
          <a:DeviceProperty>
            <a:Name>SnmpResources</a:Name>
            <a:Reference i:nil="true"/>
            <a:Value>{{ snmp_servers_str }}</a:Value>
          </a:DeviceProperty>
          <a:DeviceProperty>
            <a:Name>SyslogResources</a:Name>
            <a:Reference i:nil="true"/>
            <a:Value>{{ syslog_servers_str }}</a:Value>
          </a:DeviceProperty>
          <a:DeviceProperty>
            <a:Name>TacacsGroup</a:Name>
            <a:Reference i:nil="true"/>
            <a:Value>{{ tacacs_group }}</a:Value>
          </a:DeviceProperty>
          <a:DeviceProperty>
            <a:Name>TacacsServer</a:Name>
            <a:Reference i:nil="true"/>
            <a:Value>{{ tacacs_servers_str }}</a:Value>
          </a:DeviceProperty>
          <a:DeviceProperty>
            <a:Name>ForcedMgmtRoutes</a:Name>
            <a:Reference i:nil="true"/>
            <a:Value>{{ forced_mgmt_routes_str }}</a:Value>
          </a:DeviceProperty>
          <a:DeviceProperty>
            <a:Name>ErspanDestinationIpv4</a:Name>
            <a:Reference i:nil="true"/>
            <a:Value>{{ erspan_dest_str }}</a:Value>
         </a:DeviceProperty>
        </a:Properties>
      </a:DeviceMetadata>
    </Devices>
    <Properties xmlns:a="http://schemas.datacontract.org/2004/07/Microsoft.Search.Autopilot.Evolution"/>
  </MetadataDeclaration>

